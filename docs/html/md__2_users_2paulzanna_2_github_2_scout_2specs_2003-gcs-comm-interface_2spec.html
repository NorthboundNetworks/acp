<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Feature Specification: Secure Control Protocol (SCP) v1.1 Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_scout_2specs_2003-gcs-comm-interface_2spec.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Feature Specification: Secure Control Protocol (SCP) v1.1 Implementation </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md8857"></a></p>
<p><b>Feature Branch</b>: <span class="tt">003-gcs-comm-interface</span> <br  />
 <b>Created</b>: 2025-10-26 <br  />
 <b>Status</b>: Draft <br  />
 <b>Input</b>: User description: "Implement Secure Control Protocol (SCP) v1.1 - a secure, auditable binary communication protocol between the drone's flight controller (ESP32-S3) and external ground control system (GCS) or onboard companion. This protocol replaces MAVLink for operational control and must support mission-critical communication in contested and military environments."</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8858"></a>
User Scenarios &amp; Testing <em>(mandatory)</em></h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8859"></a>
User Story 1 - Basic Command &amp; Control Communication (Priority: P1)</h2>
<p>Authorized operators (Mission Commander, Pilot) need to send arm/disarm commands and mode changes to the Scout drone based on their role privileges, while receiving immediate acknowledgment of command acceptance or rejection. This establishes role-based operational control over the aircraft.</p>
<p><b>Why this priority</b>: Essential for any drone operation - without reliable command authority, the drone cannot be safely operated. This is the minimal viable functionality for the communication protocol.</p>
<p><b>Independent Test</b>: Can be fully tested by connecting a simulated GCS client via UART/USB, sending arm/disarm commands, and verifying the drone responds with proper acknowledgments and state changes.</p>
<p><b>Acceptance Scenarios</b>:</p>
<ol type="1">
<li><b>Given</b> drone is in disarmed state and GCS is connected, <b>When</b> GCS sends arm command with valid authentication, <b>Then</b> drone arms and sends acknowledgment with session ID</li>
<li><b>Given</b> drone is armed and GCS session is valid, <b>When</b> GCS sends mode change command, <b>Then</b> drone changes mode and sends status update</li>
<li><b>Given</b> GCS sends command with invalid authentication, <b>When</b> command is processed, <b>Then</b> drone rejects command and sends error response with audit log entry</li>
</ol>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md8861"></a>
User Story 2 - Real-time Telemetry Streaming (Priority: P2)</h2>
<p>A GCS operator needs to continuously monitor drone status including position, orientation, battery level, and operational state through structured telemetry messages sent at configurable intervals.</p>
<p><b>Why this priority</b>: Situational awareness is critical for safe operation, but the drone can technically fly without continuous telemetry if basic commands work.</p>
<p><b>Independent Test</b>: Can be tested by establishing communication and verifying telemetry messages are received at configured rate (1-10 Hz) with accurate sensor data and timestamps.</p>
<p><b>Acceptance Scenarios</b>:</p>
<ol type="1">
<li><b>Given</b> drone is connected to GCS, <b>When</b> telemetry streaming is enabled, <b>Then</b> status messages are transmitted at configured rate with current sensor data</li>
<li><b>Given</b> telemetry is streaming, <b>When</b> drone state changes (arm/disarm, mode, GPS fix), <b>Then</b> updated status is reflected in next telemetry message</li>
<li><b>Given</b> communication link is interrupted, <b>When</b> connection is restored, <b>Then</b> telemetry resumes with updated sequence numbers</li>
</ol>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md8863"></a>
User Story 3 - Gimbal Control Integration (Priority: P3)</h2>
<p>A GCS operator needs to command gimbal movements for camera pointing and receive feedback on current gimbal position and status during reconnaissance missions.</p>
<p><b>Why this priority</b>: Gimbal control enhances mission effectiveness but is not essential for basic flight operations. The drone remains functional without gimbal commands.</p>
<p><b>Independent Test</b>: Can be tested by sending gimbal position commands and verifying gimbal moves to commanded angles with position feedback.</p>
<p><b>Acceptance Scenarios</b>:</p>
<ol type="1">
<li><b>Given</b> drone has gimbal attached and is armed, <b>When</b> GCS sends gimbal position command, <b>Then</b> gimbal moves to commanded position and sends feedback</li>
<li><b>Given</b> gimbal is moving, <b>When</b> GCS sends new position command, <b>Then</b> gimbal smoothly transitions to new target position</li>
<li><b>Given</b> gimbal reaches physical limits, <b>When</b> commanded beyond limits, <b>Then</b> gimbal stops at limit and reports actual position</li>
</ol>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md8865"></a>
User Story 4 - Security &amp; Audit Monitoring (Priority: P2)</h2>
<p>Security personnel and operators need visibility into all command attempts, including successful operations and security violations, through comprehensive audit logging and real-time security event reporting.</p>
<p><b>Why this priority</b>: Critical for military/contested environments where command authority and security breaches must be tracked, but not required for basic flight functionality.</p>
<p><b>Independent Test</b>: Can be tested by attempting various valid and invalid commands while monitoring audit log messages for complete security event coverage.</p>
<p><b>Acceptance Scenarios</b>:</p>
<ol type="1">
<li><b>Given</b> any command is received, <b>When</b> command passes security checks, <b>Then</b> audit log records successful command with source, action, and session ID</li>
<li><b>Given</b> malformed or unauthorized command is received, <b>When</b> security validation fails, <b>Then</b> audit log records rejection with detailed reason and source identification</li>
<li><b>Given</b> replay attack is attempted, <b>When</b> duplicate sequence number is detected, <b>Then</b> command is rejected and security violation is logged</li>
</ol>
<hr  />
<h2 class="doxsection"><a class="anchor" id="autotoc_md8867"></a>
Edge Cases</h2>
<ul>
<li>What happens when communication link is interrupted mid-command and restored with different session ID?</li>
<li>How does the system handle malformed frames with valid CRC but invalid message structure?</li>
<li>What occurs when authentication keys are rotated during active session?</li>
<li>How does the protocol behave when receiving commands faster than the safety mediation layer can process?</li>
<li>What happens when an operator exceeds their sustained rate limit but stays within burst allowance?</li>
<li>What happens when telemetry buffer overflows during high-rate streaming?</li>
<li>How does the system determine message priority levels for queuing decisions?</li>
<li>How does the system handle simultaneous commands from multiple GCS sources with different session IDs?</li>
<li>What happens when lower-priority operator attempts to override higher-priority operator's active command?</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8868"></a>
Requirements <em>(mandatory)</em></h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8869"></a>
Functional Requirements</h2>
<ul>
<li><b>FR-001</b>: System MUST enable secure command and control communication between ground operators and drone using standardized message format with data integrity protection</li>
<li><b>FR-002</b>: System MUST support reliable message transmission over multiple connection types including wired and wireless interfaces commonly used in field operations</li>
<li><b>FR-003</b>: System MUST detect and reject corrupted messages to prevent unsafe commands from reaching drone control systems</li>
<li><b>FR-004</b>: System MUST authenticate all incoming commands using cryptographic validation to prevent unauthorized control attempts</li>
<li><b>FR-005</b>: System MUST prevent replay attacks by rejecting duplicate or out-of-sequence commands within active communication sessions</li>
<li><b>FR-006</b>: System MUST route all ground control commands through existing safety validation and audit systems before execution</li>
<li><b>FR-007</b>: System MUST support essential command types including arm/disarm controls, flight mode changes, gimbal positioning, and system configuration updates</li>
<li><b>FR-008</b>: System MUST provide comprehensive status reporting including aircraft position, sensor readings, gimbal status, security events, and mission progress summaries</li>
<li><b>FR-009</b>: System MUST acknowledge all received commands with clear success or failure responses including detailed error information when commands are rejected</li>
<li><b>FR-010</b>: System MUST transmit status updates at operator-configurable intervals to support real-time situational awareness during missions</li>
<li><b>FR-011</b>: System MUST create detailed audit records for all command attempts including operator identification, role privileges, requested actions, approval results, and precise timestamps</li>
<li><b>FR-015</b>: System MUST enforce role-based command authorization with Mission Commander having full control authority, Pilot having flight operation authority, and Observer having monitoring-only privileges</li>
<li><b>FR-016</b>: System MUST resolve conflicting commands using operator hierarchy priority where Mission Commander commands override Pilot commands, which override Observer commands</li>
<li><b>FR-017</b>: System MUST implement per-operator rate limiting with sustained command rates of 5 commands per second and burst allowance of up to 20 commands per second to prevent system overload while supporting emergency operations</li>
<li><b>FR-018</b>: System MUST defend against active adversary threats including man-in-the-middle attacks, message injection, replay attacks, and communication jamming using comprehensive cryptographic validation and anti-jamming protocols</li>
<li><b>FR-019</b>: System MUST implement priority-based message queuing during overload conditions with emergency commands processed first, routine commands queued by operator priority, and telemetry messages dropped when necessary to maintain system responsiveness</li>
<li><b>FR-012</b>: System MUST manage communication sessions with automatic timeout after 15 minutes of inactivity to balance security requirements with operational convenience</li>
<li><b>FR-013</b>: System MUST provide clear error reporting for various failure conditions including data corruption, security violations, authentication failures, and system resource limitations</li>
<li><b>FR-014</b>: System MUST maintain compatibility with previous communication protocol versions to support existing ground control equipment during transition periods</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8870"></a>
Key Entities</h2>
<ul>
<li><b>Control Message</b>: Operator commands sent to drone including arm/disarm instructions, flight mode changes, gimbal positioning, and system configuration requests</li>
<li><b>Status Report</b>: Real-time information sent from drone to operators including aircraft position, sensor readings, system health, and operational state</li>
<li><b>Operator Session</b>: Authenticated communication connection between ground control station and drone with unique identification and security tracking</li>
<li><b>Security Event</b>: Audit record documenting all operator actions, command approvals, rejections, and potential security violations for accountability and investigation</li>
<li><b>Communication Link</b>: Secure data connection between ground operators and drone supporting reliable command delivery and status reporting</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8871"></a>
Clarifications</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8872"></a>
Session 2025-10-26</h2>
<ul>
<li>Q: Operator Role Authority Levels → A: Multiple operator roles (Mission Commander, Pilot, Observer) with different command privileges</li>
<li>Q: Concurrent Command Conflict Resolution → A: Operator hierarchy with role-based priority (Mission Commander &gt; Pilot &gt; Observer)</li>
<li>Q: Command Rate Limiting Strategy → A: Per-operator rate limits with burst allowance (e.g., 5/sec sustained, 20/sec burst)</li>
<li>Q: Security Threat Model Assumptions → A: Active adversary with network access (full crypto suite, anti-jamming)</li>
<li>Q: System Overload Message Handling → A: Priority queuing by message type (emergency commands first, telemetry droppable)</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8873"></a>
Success Criteria <em>(mandatory)</em></h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md8874"></a>
Measurable Outcomes</h2>
<ul>
<li><b>SC-001</b>: Operators receive acknowledgment of valid commands within 100 milliseconds, enabling responsive control during time-critical maneuvers</li>
<li><b>SC-002</b>: Unauthorized or corrupted commands are rejected and reported within 50 milliseconds, maintaining security without operational delays</li>
<li><b>SC-003</b>: Status information updates are delivered at operator-configured intervals (1-10 times per second) with consistent timing for reliable situational awareness</li>
<li><b>SC-004</b>: All operator actions and security events are recorded in audit logs with 100% coverage, supporting accountability and incident investigation</li>
<li><b>SC-005</b>: Communication remains reliable across different connection methods without data loss, supporting diverse operational environments and equipment</li>
<li><b>SC-006</b>: Communication recovers automatically within 2 seconds after temporary connection interruptions, minimizing mission impact from brief link failures</li>
<li><b>SC-007</b>: Security system successfully detects and blocks 100% of replay attacks and unauthorized access attempts, protecting against hostile interference</li>
<li><b>SC-008</b>: System supports up to 3 simultaneous operator connections without performance degradation, enabling multi-operator missions and backup control stations</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8875"></a>
Assumptions</h1>
<ul>
<li>Security credentials are securely configured on both ground control stations and drone before field deployment using out-of-band key distribution resistant to network-based attacks</li>
<li>Communication connections provide basic error detection but may require message retransmission for reliability</li>
<li>Ground control software properly manages communication sessions and tracks message sequencing for security</li>
<li>Existing drone safety and audit systems provide necessary validation capabilities for incoming commands</li>
<li>System resources support up to 3 simultaneous operator connections during multi-operator missions</li>
<li>15-minute session timeout provides appropriate balance between security requirements and operational convenience </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
