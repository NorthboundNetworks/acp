<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: ACP — Autonomous Command Protocol (C99 Reference)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__r_e_a_d_m_e.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ACP — Autonomous Command Protocol (C99 Reference) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md133"></a></p>
<p>ACP is a small, portable protocol and C99 library for framing, authenticating, and parsing telemetry and command messages across Linux, macOS, Windows (MinGW), and embedded systems.</p>
<p>This repository contains the reference C implementation with platform shims, tests, and documentation. It follows the ACP Constitution: portability first, minimal and deterministic, security by design, extensible but stable, open and testable.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md134"></a>
Highlights</h1>
<ul>
<li>COBS framing + CRC16-CCITT integrity</li>
<li>HMAC-SHA256 authentication (16-byte truncated) with constant-time verification</li>
<li>Command frames MUST be authenticated and replay-protected</li>
<li>Zero-heap default (compile-time opt-in for heap if needed)</li>
<li>Network byte order on the wire; packed headers; explicit versioning</li>
<li>Max payload: 1024 bytes per frame</li>
<li>Platform shims for logging, time, mutex, keystore (POSIX and Windows fallbacks)</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md135"></a>
Repository structure</h1>
<div class="fragment"><div class="line">.</div>
<div class="line">├── acp_constants.c</div>
<div class="line">├── acp_crypto.c                # HMAC-SHA256 and constant-time utilities</div>
<div class="line">├── acp_framer.c                # COBS framing + CRC16 integration</div>
<div class="line">├── acp_nvs.c                   # Default file-based keystore backend (&quot;NVS&quot;)</div>
<div class="line">├── acp_platform_keystore.h     # Platform shim headers</div>
<div class="line">├── acp_platform_log.h</div>
<div class="line">├── acp_platform_mutex.h</div>
<div class="line">├── acp_platform_time.h</div>
<div class="line">├── acp_session.c               # Session state + replay protection</div>
<div class="line">├── docs/</div>
<div class="line">│   └── acp_comm_spec_v0-3.md   # Protocol framing spec</div>
<div class="line">├── examples/                   # Example apps (to be added)</div>
<div class="line">└── tests/                      # Unit tests and vectors (to be added)</div>
</div><!-- fragment --><p>Note: Build system files (Makefile, CMakeLists.txt) and example sources are planned in tasks and may not exist yet on this branch.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md136"></a>
Build</h1>
<p>ACP supports both CMake and Make build systems with full cross-platform support:</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md137"></a>
Quick Start</h2>
<p><b>CMake (Recommended):</b></p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --parallel</div>
</div><!-- fragment --><p><b>Make:</b></p>
<div class="fragment"><div class="line">make all</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md138"></a>
Supported Platforms &amp; Artifacts</h2>
<ul>
<li><b>Linux/macOS</b>: <span class="tt">libacp.a</span> (static) and <span class="tt">libacp.so/.dylib</span> (shared)</li>
<li><b>Windows (MinGW)</b>: <span class="tt">libacp.a</span> (static library)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md139"></a>
Build Options</h2>
<ul>
<li><span class="tt">ACP_NO_HEAP=ON</span> (default): Embedded-friendly, no heap allocation</li>
<li><span class="tt">ACP_BUILD_SHARED=ON</span>: Build shared libraries (Linux/macOS)</li>
<li><span class="tt">ACP_BUILD_TESTS=ON</span>: Build test suite</li>
<li><span class="tt">ACP_BUILD_EXAMPLES=ON</span>: Build example programs</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md140"></a>
Installation</h2>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cmake --install . --prefix /usr/local</div>
<div class="line"> </div>
<div class="line"># Make</div>
<div class="line">make install PREFIX=/usr/local</div>
</div><!-- fragment --><p><b>For detailed build instructions, cross-compilation, and troubleshooting, see <a class="el" href="md_docs_2_b_u_i_l_d.html">BUILD.md</a>.</b></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md141"></a>
Security policy (command vs telemetry)</h1>
<ul>
<li>Command frames: MUST carry a 16-byte truncated HMAC-SHA256 tag and are subject to replay protection; unauthenticated or replayed command frames are rejected.</li>
<li>Telemetry frames: MAY be unauthenticated if explicitly configured; authentication is recommended.</li>
<li>Keystore: default file-based backend provided in <span class="tt"><a class="el" href="acp__nvs_8c.html" title="Non-volatile storage (keystore) implementation for ACP.">acp_nvs.c</a></span>; integrators may override via platform shim.</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md142"></a>
Memory Management and Embedded Support</h1>
<p><b>ACP is designed for embedded systems with zero heap allocation by default.</b></p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md143"></a>
No-Heap Default (Recommended)</h2>
<p>ACP operates without heap allocation by default (<span class="tt">ACP_NO_HEAP=ON</span>):</p>
<ul>
<li><b>Static Memory Only</b>: All operations use stack or static storage</li>
<li><b>Embedded Ready</b>: Suitable for microcontrollers and real-time systems</li>
<li><b>Deterministic</b>: Predictable memory usage without malloc/free</li>
<li><b>Validated</b>: Comprehensive no-heap verification testing</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md144"></a>
Enabling Heap Features (Optional)</h2>
<p>To enable optional heap-based features:</p>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cmake .. -DACP_NO_HEAP=OFF</div>
<div class="line"> </div>
<div class="line"># Make</div>
<div class="line">make ACP_ENABLE_HEAP=1</div>
</div><!-- fragment --><p><b>Heap features (when enabled):</b></p>
<ul>
<li>Dynamic keystore entries (vs fixed-size arrays)</li>
<li>Larger internal buffers for complex operations</li>
<li>Optional performance optimizations</li>
</ul>
<p><b>Note:</b> All core protocol features work without heap allocation. Heap mode is only needed for advanced integrations.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md145"></a>
Memory Requirements</h2>
<p><b>Stack usage (no-heap mode):</b></p>
<ul>
<li>Frame encode/decode: ~1KB stack</li>
<li>HMAC operations: ~300 bytes</li>
<li>Session state: ~100 bytes</li>
</ul>
<p><b>Static storage:</b></p>
<ul>
<li>Frame buffers: ~1KB per concurrent operation <br  />
</li>
<li>Keystore: ~2KB for default file backend</li>
<li>Total footprint: &lt;10KB for typical embedded use</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md146"></a>
Data model and wire format</h1>
<ul>
<li>Network byte order (big-endian) on the wire</li>
<li>Packed header with explicit version field</li>
<li>CRC16-CCITT over framed content</li>
<li>Optional HMAC tag (16 bytes) when authentication is enabled; mandatory for commands</li>
</ul>
<p>See `docs/acp_comm_spec_v0-3.md` and `specs/001-acp-protocol-spec/spec.md` for details.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md147"></a>
Documentation</h1>
<p>**Full API documentation is available in the generated HTML docs:**</p>
<p>To generate locally:</p>
<div class="fragment"><div class="line"># Install doxygen (if not already installed)</div>
<div class="line"># On macOS: brew install doxygen</div>
<div class="line"># On Ubuntu: apt-get install doxygen</div>
<div class="line"># On Windows: download from https://doxygen.nl</div>
<div class="line"> </div>
<div class="line">cd docs &amp;&amp; doxygen Doxyfile</div>
<div class="line">open html/index.html</div>
</div><!-- fragment --><p>The documentation includes:</p>
<ul>
<li>Complete API reference with function documentation</li>
<li>Data structure details and relationships <br  />
</li>
<li>Usage examples and integration guides</li>
<li>Protocol specification and wire format details</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md148"></a>
Examples and tests</h1>
<p>Comprehensive test suite includes:</p>
<ul>
<li>✅ Round-trip encode/decode tests (COBS + CRC16)</li>
<li>✅ CRC16 known vectors</li>
<li>✅ HMAC vectors and negative tests (bad/absent tags on commands)</li>
<li>✅ Replay rejection tests</li>
<li>✅ Byte-order conformance tests</li>
<li>✅ No-heap verification for embedded systems</li>
<li>⚠️ Example apps: <span class="tt"><a class="el" href="acp__client_8c.html" title="Example ACP client demonstrating frame encoding, authentication, and decoding.">acp_client.c</a></span>, <span class="tt"><a class="el" href="mock__serial_8c.html" title="Mock serial transport example for ACP frame streaming.">mock_serial.c</a></span> (planned)</li>
</ul>
<p>Run tests with:</p>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cd build &amp;&amp; ctest</div>
<div class="line"> </div>
<div class="line"># Make  </div>
<div class="line">make test</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md149"></a>
API Reference</h1>
<p>The complete public API is defined in <span class="tt"><a class="el" href="acp__protocol_8h.html" title="ACP (Autonomous Command Protocol) - Public API Header.">acp_protocol.h</a></span> with full type safety and documentation. Key components:</p>
<ul>
<li><b>Frame Management</b>: <span class="tt"><a class="el" href="acp__framer_8c.html#a6df8c96cca60a0d795b251e27cb97fda" title="Encode ACP frame to wire format.">acp_frame_encode()</a></span>, <span class="tt"><a class="el" href="acp__framer_8c.html#a7ff2fcea530d2699452c229b2d265fd0" title="Decode wire format to ACP frame.">acp_frame_decode()</a></span></li>
<li><b>Session Management</b>: <span class="tt"><a class="el" href="acp__protocol_8h.html#acaf20c1043ea84b0b196accad8846925" title="Initialize an ACP session.">acp_session_init()</a></span>, <span class="tt"><a class="el" href="acp__protocol_8h.html#a796726da49712e3ed72bbcf29a8d924b" title="Rotate session key or nonce.">acp_session_rotate()</a></span></li>
<li><b>Cryptography</b>: <span class="tt"><a class="el" href="acp__crypto_8c.html#a2094a0e188522d4f69aaec927e688416" title="Compute HMAC-SHA256 in one operation.">acp_hmac_sha256()</a></span>, <span class="tt"><a class="el" href="acp__crypto_8c.html#a19b40d42584b16058ffde79baa861858" title="Constant-time memory comparison.">acp_crypto_memcmp_ct()</a></span></li>
<li><b>Platform Integration</b>: Keystore, logging, time, and mutex abstractions</li>
</ul>
<p>See the generated HTML documentation or <span class="tt">specs/001-acp-protocol-spec/contracts/c-api.md</span> for detailed API contracts.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md150"></a>
Platform Integration and Customization</h1>
<p>ACP provides platform abstraction layers that can be customized for specific environments.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md151"></a>
Default Platform Support</h2>
<p><b>Built-in implementations provided:</b></p>
<ul>
<li><b>POSIX Systems</b>: Full implementation in <span class="tt"><a class="el" href="acp__platform__posix_8c.html" title="POSIX platform implementation for ACP.">acp_platform_posix.c</a></span></li>
<li><b>Windows</b>: Native Win32 implementation in <span class="tt"><a class="el" href="acp__platform__windows_8c_source.html">acp_platform_windows.c</a></span></li>
<li><b>Embedded</b>: Minimal stubs with override capability</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md152"></a>
Platform Shim Override</h2>
<p>To customize platform behavior for your system, override the platform shim functions:</p>
<p><b>Required Platform Functions:</b></p>
<div class="fragment"><div class="line"><span class="comment">// Time functions (acp_platform_time.h)</span></div>
<div class="line">uint64_t <a class="code hl_function" href="acp__platform__posix_8c.html#a237613b51690684b95ad69379a9b2ffd">acp_platform_get_time_ms</a>(<span class="keywordtype">void</span>);</div>
<div class="line">uint64_t acp_platform_get_monotonic_us(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="acp__platform__posix_8c.html#ab8a893bb0a7a7dbb4b8552503565cabe">acp_platform_sleep_ms</a>(uint32_t ms);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Mutex functions (acp_platform_mutex.h)  </span></div>
<div class="line"><a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a>* <a class="code hl_function" href="acp__platform__mutex_8h.html#acd7db8cc3a10569da0b8640c01887b00">acp_platform_mutex_create</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a2c83600265e90db7a27efb252def9f06">acp_platform_mutex_lock</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex);</div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a1fe93508dc8ce835ce4723fe85ad6cbc">acp_platform_mutex_unlock</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex);</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a8bd8846ae7129171add7e7a1763fb0c2">acp_platform_mutex_destroy</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Keystore functions (acp_platform_keystore.h)</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__keystore_8h.html#ad0bc94fc87d7f084b49b53a09a0a4c99">acp_platform_keystore_get_key</a>(uint32_t key_id, uint8_t *key_buffer, <span class="keywordtype">size_t</span> buffer_size);</div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__keystore_8h.html#a4fbc7aaad63188e41bb9bd0fb7363e68">acp_platform_keystore_store_key</a>(uint32_t key_id, <span class="keyword">const</span> uint8_t *key_data, <span class="keywordtype">size_t</span> key_len);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Logging functions (acp_platform_log.h)</span></div>
<div class="line"><span class="keywordtype">void</span> acp_platform_log(<span class="keywordtype">int</span> level, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);</div>
<div class="ttc" id="aacp__platform__keystore_8h_html_a4fbc7aaad63188e41bb9bd0fb7363e68"><div class="ttname"><a href="acp__platform__keystore_8h.html#a4fbc7aaad63188e41bb9bd0fb7363e68">acp_platform_keystore_store_key</a></div><div class="ttdeci">int acp_platform_keystore_store_key(uint32_t key_id, const uint8_t *key, size_t key_len)</div><div class="ttdoc">Store key by ID in keystore (simplified interface).</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00179">acp_platform_posix.c:179</a></div></div>
<div class="ttc" id="aacp__platform__keystore_8h_html_ad0bc94fc87d7f084b49b53a09a0a4c99"><div class="ttname"><a href="acp__platform__keystore_8h.html#ad0bc94fc87d7f084b49b53a09a0a4c99">acp_platform_keystore_get_key</a></div><div class="ttdeci">int acp_platform_keystore_get_key(uint32_t key_id, uint8_t *key_out, size_t *key_len)</div><div class="ttdoc">Get key by ID from keystore (simplified interface).</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00138">acp_platform_posix.c:138</a></div></div>
<div class="ttc" id="aacp__platform__mutex_8h_html_a1fe93508dc8ce835ce4723fe85ad6cbc"><div class="ttname"><a href="acp__platform__mutex_8h.html#a1fe93508dc8ce835ce4723fe85ad6cbc">acp_platform_mutex_unlock</a></div><div class="ttdeci">int acp_platform_mutex_unlock(acp_mutex_t *mutex)</div><div class="ttdoc">Unlock the mutex.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00121">acp_platform_posix.c:121</a></div></div>
<div class="ttc" id="aacp__platform__mutex_8h_html_a2c83600265e90db7a27efb252def9f06"><div class="ttname"><a href="acp__platform__mutex_8h.html#a2c83600265e90db7a27efb252def9f06">acp_platform_mutex_lock</a></div><div class="ttdeci">int acp_platform_mutex_lock(acp_mutex_t *mutex)</div><div class="ttdoc">Lock the mutex (blocking).</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00111">acp_platform_posix.c:111</a></div></div>
<div class="ttc" id="aacp__platform__mutex_8h_html_a8bd8846ae7129171add7e7a1763fb0c2"><div class="ttname"><a href="acp__platform__mutex_8h.html#a8bd8846ae7129171add7e7a1763fb0c2">acp_platform_mutex_destroy</a></div><div class="ttdeci">void acp_platform_mutex_destroy(acp_mutex_t *mutex)</div><div class="ttdoc">Destroy a mutex and release resources.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00099">acp_platform_posix.c:99</a></div></div>
<div class="ttc" id="aacp__platform__mutex_8h_html_acd7db8cc3a10569da0b8640c01887b00"><div class="ttname"><a href="acp__platform__mutex_8h.html#acd7db8cc3a10569da0b8640c01887b00">acp_platform_mutex_create</a></div><div class="ttdeci">acp_mutex_t * acp_platform_mutex_create(void)</div><div class="ttdoc">Create a new mutex.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00082">acp_platform_posix.c:82</a></div></div>
<div class="ttc" id="aacp__platform__mutex_8h_html_ae586f81c808e69bc0729de6159b3c41b"><div class="ttname"><a href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a></div><div class="ttdeci">void * acp_mutex_t</div><div class="ttdoc">Opaque handle for platform mutex.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__mutex_8h_source.html#l00047">acp_platform_mutex.h:47</a></div></div>
<div class="ttc" id="aacp__platform__posix_8c_html_a237613b51690684b95ad69379a9b2ffd"><div class="ttname"><a href="acp__platform__posix_8c.html#a237613b51690684b95ad69379a9b2ffd">acp_platform_get_time_ms</a></div><div class="ttdeci">uint64_t acp_platform_get_time_ms(void)</div><div class="ttdoc">Get monotonic timestamp in milliseconds.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00054">acp_platform_posix.c:54</a></div></div>
<div class="ttc" id="aacp__platform__posix_8c_html_ab8a893bb0a7a7dbb4b8552503565cabe"><div class="ttname"><a href="acp__platform__posix_8c.html#ab8a893bb0a7a7dbb4b8552503565cabe">acp_platform_sleep_ms</a></div><div class="ttdeci">void acp_platform_sleep_ms(uint32_t ms)</div><div class="ttdoc">Sleep for specified milliseconds.</div><div class="ttdef"><b>Definition</b> <a href="acp__platform__posix_8c_source.html#l00067">acp_platform_posix.c:67</a></div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md153"></a>
Custom Platform Integration</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md154"></a>
Method 1: Replace platform files</h3>
<div class="fragment"><div class="line"># Replace default implementation with your custom version</div>
<div class="line">cp my_platform_impl.c acp_platform_posix.c</div>
<div class="line"> </div>
<div class="line"># Build normally</div>
<div class="line">make all</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md155"></a>
Method 2: Compile-time override</h3>
<div class="fragment"><div class="line"><span class="comment">// In your project, define ACP_CUSTOM_PLATFORM before including ACP</span></div>
<div class="line"><span class="preprocessor">#define ACP_CUSTOM_PLATFORM 1</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="acp__protocol_8h.html">acp_protocol.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Provide your implementations</span></div>
<div class="line">uint64_t <a class="code hl_function" href="acp__platform__posix_8c.html#a237613b51690684b95ad69379a9b2ffd">acp_platform_get_time_ms</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Your custom time implementation</span></div>
<div class="line">    <span class="keywordflow">return</span> my_get_milliseconds();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ... implement other required functions</span></div>
<div class="ttc" id="aacp__protocol_8h_html"><div class="ttname"><a href="acp__protocol_8h.html">acp_protocol.h</a></div><div class="ttdoc">ACP (Autonomous Command Protocol) - Public API Header.</div></div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md156"></a>
Method 3: Link-time override</h3>
<div class="fragment"><div class="line"># Compile ACP without default platform</div>
<div class="line">make ACP_NO_PLATFORM=1</div>
<div class="line"> </div>
<div class="line"># Link with your platform implementation</div>
<div class="line">gcc -o myapp myapp.c libacp.a my_platform.o</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md157"></a>
Minimal Embedded Integration</h2>
<p>For resource-constrained systems:</p>
<div class="fragment"><div class="line"><span class="comment">// Minimal time implementation (required)</span></div>
<div class="line">uint64_t <a class="code hl_function" href="acp__platform__posix_8c.html#a237613b51690684b95ad69379a9b2ffd">acp_platform_get_time_ms</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keywordflow">return</span> system_tick_count_ms;  <span class="comment">// Your system tick counter</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Stub mutex implementation (if no threading)</span></div>
<div class="line"><a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a>* <a class="code hl_function" href="acp__platform__mutex_8h.html#acd7db8cc3a10569da0b8640c01887b00">acp_platform_mutex_create</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> (<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a>*)1; }</div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a2c83600265e90db7a27efb252def9f06">acp_platform_mutex_lock</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a1fe93508dc8ce835ce4723fe85ad6cbc">acp_platform_mutex_unlock</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="acp__platform__mutex_8h.html#a8bd8846ae7129171add7e7a1763fb0c2">acp_platform_mutex_destroy</a>(<a class="code hl_typedef" href="acp__platform__mutex_8h.html#ae586f81c808e69bc0729de6159b3c41b">acp_mutex_t</a> *mutex) { }</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Minimal keystore (if no persistent storage)</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__platform__keystore_8h.html#ad0bc94fc87d7f084b49b53a09a0a4c99">acp_platform_keystore_get_key</a>(uint32_t key_id, uint8_t *key_buffer, <span class="keywordtype">size_t</span> buffer_size) {</div>
<div class="line">    <span class="comment">// Return hardcoded key or error</span></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_define" href="acp__errors_8h.html#aeb8d0308c08a8a3437e78bdbc822441b">ACP_ERR_NOT_FOUND</a>;</div>
<div class="line">}</div>
<div class="ttc" id="aacp__errors_8h_html_aeb8d0308c08a8a3437e78bdbc822441b"><div class="ttname"><a href="acp__errors_8h.html#aeb8d0308c08a8a3437e78bdbc822441b">ACP_ERR_NOT_FOUND</a></div><div class="ttdeci">#define ACP_ERR_NOT_FOUND</div><div class="ttdoc">Requested item not found.</div><div class="ttdef"><b>Definition</b> <a href="acp__errors_8h_source.html#l00091">acp_errors.h:91</a></div></div>
</div><!-- fragment --><p><b>Note:</b> Only time functions are strictly required. Other functions can return appropriate error codes if not needed.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md158"></a>
Build Matrix</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Platform  </th><th class="markdownTableHeadNone">Compiler  </th><th class="markdownTableHeadNone">Static Lib  </th><th class="markdownTableHeadNone">Shared Lib  </th><th class="markdownTableHeadNone">CI Status  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Linux x64  </td><td class="markdownTableBodyNone">GCC 9+  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone"><a href="https://github.com/pzanna/acp/actions"><img src="https://github.com/pzanna/acp/workflows/Build%20and%20Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Linux x64  </td><td class="markdownTableBodyNone">Clang 10+  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone"><a href="https://github.com/pzanna/acp/actions"><img src="https://github.com/pzanna/acp/workflows/Build%20and%20Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">macOS (Intel/M1)  </td><td class="markdownTableBodyNone">Clang (Xcode)  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone"><a href="https://github.com/pzanna/acp/actions"><img src="https://github.com/pzanna/acp/workflows/Build%20and%20Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Windows x64  </td><td class="markdownTableBodyNone">MinGW-w64  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">⚠️ v0.4+  </td><td class="markdownTableBodyNone"><a href="https://github.com/pzanna/acp/actions"><img src="https://github.com/pzanna/acp/workflows/Build%20and%20Test/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Windows x64  </td><td class="markdownTableBodyNone">MSVC  </td><td class="markdownTableBodyNone">⚠️ v0.4+  </td><td class="markdownTableBodyNone">⚠️ v0.4+  </td><td class="markdownTableBodyNone">Not supported in v0.3  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ARM64 Linux  </td><td class="markdownTableBodyNone">GCC/Clang  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">Cross-compilation tested  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ARM Embedded  </td><td class="markdownTableBodyNone">arm-none-eabi-gcc  </td><td class="markdownTableBodyNone">✅  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Cross-compilation support  </td></tr>
</table>
<p><b>Legend:</b></p>
<ul>
<li>✅ Fully supported and tested</li>
<li>⚠️ Planned for future release <br  />
</li>
<li>❌ Not supported</li>
</ul>
<p><b>Dependencies:</b> Standard C library only (C99 compliant)</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md159"></a>
License</h1>
<p>MIT License</p>
<p>Copyright (c) 2025 Northbound Networks Pty. Ltd. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
