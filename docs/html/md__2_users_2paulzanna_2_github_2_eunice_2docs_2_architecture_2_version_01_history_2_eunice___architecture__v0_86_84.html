<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Eunice v0.6.4 Architecture — Advanced Task Management &amp; Web UI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_version_01_history_2_eunice___architecture__v0_86_84.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Eunice v0.6.4 Architecture — Advanced Task Management &amp; Web UI </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1704"></a></p>
<p><b>Date:</b> 14-08-2025 <br  />
 <b>Owner:</b> Paul Zanna <br  />
 <b>Status:</b> ✅ COMPLETED</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md1705"></a>
1) Executive Summary</h1>
<p>v0.6.4 delivers a <b>production-ready task management system</b> with a <b>sophisticated React web UI</b>, <b>multi-step task creation workflows</b>, <b>real-time status management</b>, and <b>comprehensive resource integration</b>. The implementation represents enterprise-grade research workflow management capabilities.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1707"></a>
2) Scope</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1708"></a>
✅ Goals Achieved</h2>
<ul>
<li><b>Advanced Web UI</b>: Full-featured React+TypeScript interface with shadcn/ui components</li>
<li><b>Task Lifecycle Management</b>: Complete CRUD operations with real-time status updates</li>
<li><b>Multi-Step Task Creation</b>: KickoffWizard with 5-step configuration process</li>
<li><b>Resource Integration</b>: Materials, equipment, and DoE (Design of Experiments) systems</li>
<li><b>Type-Safe API</b>: Hybrid MCP+native database access with Zod validation</li>
<li><b>Real-time Updates</b>: React Query with automatic cache invalidation and 5-second polling</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1709"></a>
Enhanced Implementation Beyond Original Scope</h2>
<ul>
<li><b>Four-Tab Interface</b>: Overview, Workflows, Deliverables, Activity &amp; Audit</li>
<li><b>Task Status Management</b>: Visual status progression with action controls</li>
<li><b>Materials Management</b>: Picklist integration with cost tracking and BOM pricing</li>
<li><b>Equipment Scheduling</b>: 14-day reservation forecasts with detail sheets</li>
<li><b>Protocol Integration</b>: Playbook preview with markdown rendering</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1711"></a>
3) High‑Level Architecture</h1>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph &quot;Frontend Layer&quot;</div>
<div class="line">        UI[React + Vite UI&lt;br/&gt;PostApprovalPage]</div>
<div class="line">        Wizard[KickoffWizard&lt;br/&gt;Multi-Step Creator]</div>
<div class="line">        Materials[MaterialsPage&lt;br/&gt;Resource Manager]</div>
<div class="line">        Equipment[EquipmentPage&lt;br/&gt;Reservations]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;API Layer&quot;</div>
<div class="line">        Gateway[API Gateway&lt;br/&gt;Hybrid DB Access]</div>
<div class="line">        Types[Type-Safe Client&lt;br/&gt;Zod Validation]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Task Management&quot;</div>
<div class="line">        Tasks[Task CRUD&lt;br/&gt;Status Lifecycle]</div>
<div class="line">        RealTime[React Query&lt;br/&gt;Real-time Updates]</div>
<div class="line">        Status[Status Mapping&lt;br/&gt;UI Integration]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Backend Services&quot;</div>
<div class="line">        DB[Database Service&lt;br/&gt;MCP Tools]</div>
<div class="line">        Network[Network Service&lt;br/&gt;External APIs]</div>
<div class="line">        Research[Research Manager&lt;br/&gt;Orchestration]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    UI --&gt; Types</div>
<div class="line">    Wizard --&gt; Types</div>
<div class="line">    Materials --&gt; Types</div>
<div class="line">    Equipment --&gt; Types</div>
<div class="line">    Types --&gt; Gateway</div>
<div class="line">    Gateway --&gt; Tasks</div>
<div class="line">    Tasks --&gt; RealTime</div>
<div class="line">    RealTime --&gt; Status</div>
<div class="line">    Gateway --&gt; DB</div>
<div class="line">    Gateway --&gt; Network</div>
<div class="line">    Tasks --&gt; Research</div>
</div><!-- fragment --><p><b>Key Properties</b></p>
<ul>
<li><b>Enterprise Quality</b>: Professional TypeScript implementation with comprehensive error handling</li>
<li><b>Real-time Sync</b>: Live status updates without manual refresh</li>
<li><b>Type Safety</b>: End-to-end type checking from database to UI components</li>
<li><b>Resource Integration</b>: Unified workflow management across materials, equipment, and protocols</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1713"></a>
4) Components</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1714"></a>
4.1 ✅ PostApprovalPage.tsx - Main Task Interface</h2>
<p><b>Status</b>: Fully Implemented <br  />
 <b>Features</b>:</p>
<ul>
<li><b>Four-Tab Interface</b>:<ul>
<li>Overview: Plan statistics, progress tracking, cost estimates</li>
<li>Workflows: Task management with CRUD operations</li>
<li>Deliverables: DoE, protocols, materials &amp; equipment integration</li>
<li>Activity &amp; Audit: Complete task activity log</li>
</ul>
</li>
<li><b>Real-time Data</b>: React Query with 5-second polling and cache invalidation</li>
<li><b>Task Controls</b>: Context-aware Start/Stop/Complete/Delete buttons</li>
<li><b>Status Visualization</b>: Color-coded status chips with progress indicators</li>
<li><b>Integration Features</b>: DoE summaries, materials picklists, equipment reservations</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1715"></a>
4.2 ✅ KickoffWizard.tsx - Task Creation Workflow</h2>
<p><b>Status</b>: Fully Implemented <br  />
 <b>Features</b>:</p>
<ul>
<li><b>Five-Step Process</b>:<ul>
<li>Scope: Objectives and hypotheses definition</li>
<li>Literature: Automated search configuration</li>
<li>Experiment: DoE template selection with parameters</li>
<li>Materials: Budget caps and substitution preferences <br  />
</li>
<li>Review: Final confirmation and launch</li>
</ul>
</li>
<li><b>State Management</b>: localStorage persistence with Zod schema validation</li>
<li><b>Task Generation</b>: Creates multiple task types with structured metadata</li>
<li><b>Dialog Management</b>: Intelligent wizard flow with callback system</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1716"></a>
4.3 ✅ Resource Management Pages</h2>
<p><b>Materials &amp; Equipment Integration</b>:</p>
<ul>
<li><b>MaterialsPage</b>: Full picklist management with detail sheets</li>
<li><b>EquipmentPage</b>: Reservation system with time-based filtering <br  />
</li>
<li><b>Navigation</b>: Seamless integration with main plan interface</li>
<li><b>Data Visualization</b>: Table views with sorting and filtering</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1717"></a>
4.4 ✅ Type-Safe API Client</h2>
<p><b>Robust Integration Layer</b>:</p>
<ul>
<li><b>Complete CRUD</b>: All task lifecycle operations</li>
<li><b>Schema Validation</b>: Zod schemas for type safety</li>
<li><b>Error Handling</b>: 30-second timeouts with graceful degradation</li>
<li><b>Hybrid Access</b>: Native reads + MCP writes for optimal performance</li>
<li><b>Dynamic Updates</b>: Partial field updates with validation</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1719"></a>
5) Task Management System</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1720"></a>
5.1 ✅ Supported Task Types</h2>
<div class="fragment"><div class="line">// Currently Supported</div>
<div class="line">type TaskType = </div>
<div class="line">  | &quot;literature_review&quot;  // Automated literature search</div>
<div class="line">  | &quot;analysis&quot;          // General analysis (DoE, experiments)  </div>
<div class="line">  | &quot;synthesis&quot;         // Data synthesis and compilation</div>
<div class="line">  | &quot;validation&quot;        // Validation and verification</div>
<div class="line">  | &quot;systematic_review&quot; // Structured systematic reviews</div>
<div class="line">  | &quot;meta_analysis&quot;     // Meta-analysis workflows</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md1721"></a>
5.2 ✅ Task Lifecycle</h2>
<div class="fragment"><div class="line">stateDiagram-v2</div>
<div class="line">    [*] --&gt; pending: Create Task</div>
<div class="line">    pending --&gt; running: Start</div>
<div class="line">    running --&gt; completed: Complete</div>
<div class="line">    running --&gt; failed: Fail</div>
<div class="line">    pending --&gt; [*]: Delete</div>
<div class="line">    completed --&gt; [*]: Archive</div>
<div class="line">    failed --&gt; pending: Retry</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md1722"></a>
5.3 ✅ Task Metadata Structure</h2>
<div class="fragment"><div class="line">interface TaskMetadata {</div>
<div class="line">  kind: &quot;literature_run&quot; | &quot;experiment_design&quot; | &quot;materials_build&quot;</div>
<div class="line">  payload: {</div>
<div class="line">    literature?: {</div>
<div class="line">      sources: string[]</div>
<div class="line">      filters: { in_vitro?: boolean }</div>
<div class="line">    }</div>
<div class="line">    experiment?: {</div>
<div class="line">      template: &quot;factorial&quot; | &quot;screening&quot; | &quot;response_surface&quot;</div>
<div class="line">      factors: Array&lt;{ name: string, levels: string[] }&gt;</div>
<div class="line">      responses: string[]</div>
<div class="line">      random_seed: number</div>
<div class="line">    }</div>
<div class="line">    materials?: {</div>
<div class="line">      budget_cap_aud: number</div>
<div class="line">      enable_substitutions: boolean</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  lifecycle?: {</div>
<div class="line">    started_at?: string</div>
<div class="line">    completed_at?: string</div>
<div class="line">    result?: any</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1724"></a>
6) ✅ Implementation Verification</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1725"></a>
6.1 Live Testing Results (14-08-2025)</h2>
<p><b>Complete Task Lifecycle Verified</b>:</p>
<div class="fragment"><div class="line">✅ Task Creation: POST /plans/{id}/tasks</div>
<div class="line">✅ Task Start: POST /tasks/{id}/start  </div>
<div class="line">✅ Task Complete: POST /tasks/{id}/complete</div>
<div class="line">✅ Task Delete: DELETE /tasks/{id}</div>
<div class="line">✅ Real-time Updates: React Query polling working</div>
<div class="line">✅ Statistics Updates: Plan progress calculation functional</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md1726"></a>
6.2 Data Verification</h2>
<p><b>Current Test Data</b>:</p>
<ul>
<li>Project: "Biological Neural Networks" ✅</li>
<li>Topic: "Avian neuron culture media" ✅ <br  />
</li>
<li>Plan: "Avian neuron culture media" (approved) ✅</li>
<li>Tasks: Full lifecycle tested ✅</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1727"></a>
6.3 UI Verification</h2>
<p><b>Frontend Functionality</b>:</p>
<ul>
<li>PostApprovalPage tabs rendering correctly ✅</li>
<li>KickoffWizard multi-step flow working ✅</li>
<li>Real-time status updates functioning ✅</li>
<li>Materials/Equipment pages operational ✅</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1729"></a>
7) ✅ Quality Metrics</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1730"></a>
7.1 Code Quality</h2>
<ul>
<li><b>Type Safety</b>: 100% TypeScript coverage with strict mode</li>
<li><b>Error Handling</b>: Comprehensive try/catch with user feedback</li>
<li><b>Loading States</b>: Professional skeleton loading patterns</li>
<li><b>Performance</b>: Optimistic updates with cache invalidation</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1731"></a>
7.2 User Experience</h2>
<ul>
<li><b>Responsive Design</b>: Works across all device sizes</li>
<li><b>Real-time Feedback</b>: No manual refresh required</li>
<li><b>Intuitive Workflow</b>: Clear task creation and management</li>
<li><b>Visual Polish</b>: shadcn/ui components with consistent styling</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1732"></a>
7.3 Architecture</h2>
<ul>
<li><b>Separation of Concerns</b>: Clean component boundaries</li>
<li><b>Reusable Components</b>: Shared UI elements and utilities</li>
<li><b>API Integration</b>: Type-safe client with proper error handling</li>
<li><b>State Management</b>: React Query for server state, localStorage for forms</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1734"></a>
8) ✅ Integration Ecosystem</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1735"></a>
8.1 Materials Management</h2>
<ul>
<li><b>Picklist Integration</b>: Real-time materials tracking</li>
<li><b>Cost Estimation</b>: BOM pricing with currency formatting</li>
<li><b>Inventory Management</b>: Quantity and unit tracking</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1736"></a>
8.2 Equipment Scheduling</h2>
<ul>
<li><b>Reservation System</b>: 14-day forecast integration</li>
<li><b>Resource Management</b>: Equipment capability tracking</li>
<li><b>Timeline Visualization</b>: Date-based reservation display</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1737"></a>
8.3 DoE Integration</h2>
<ul>
<li><b>Design Templates</b>: Factorial, screening, response surface</li>
<li><b>Parameter Configuration</b>: Factors, responses, random seeds</li>
<li><b>Status Tracking</b>: Design completion and approval workflow</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1738"></a>
8.4 Protocol Management</h2>
<ul>
<li><b>Playbook Preview</b>: Markdown rendering with dialog</li>
<li><b>BOM Integration</b>: Bill of materials with pricing</li>
<li><b>Cost Analysis</b>: Real-time budget tracking</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1740"></a>
9) ✅ Acceptance Criteria - COMPLETED</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1741"></a>
Core Functionality ✅</h2>
<ul class="check">
<li class="checked">Complete task CRUD operations via API and UI</li>
</ul>
<ul class="check">
<li class="checked">Real-time task status management with visual feedback</li>
</ul>
<ul class="check">
<li class="checked">Multi-step task creation workflow with validation</li>
</ul>
<ul class="check">
<li class="checked">Integration with materials, equipment, and DoE systems</li>
</ul>
<ul class="check">
<li class="checked">Type-safe API client with comprehensive error handling</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1742"></a>
User Experience ✅</h2>
<ul class="check">
<li class="checked">Professional, responsive React interface</li>
</ul>
<ul class="check">
<li class="checked">Intuitive task management workflows</li>
</ul>
<ul class="check">
<li class="checked">Real-time updates without manual refresh</li>
</ul>
<ul class="check">
<li class="checked">Comprehensive loading states and error feedback</li>
</ul>
<ul class="check">
<li class="checked">Seamless navigation between resources</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1743"></a>
Technical Quality ✅</h2>
<ul class="check">
<li class="checked">Enterprise-grade TypeScript implementation</li>
</ul>
<ul class="check">
<li class="checked">React Query for optimal data synchronization</li>
</ul>
<ul class="check">
<li class="checked">Zod schemas for runtime type validation</li>
</ul>
<ul class="check">
<li class="checked">Proper error boundaries and graceful degradation</li>
</ul>
<ul class="check">
<li class="checked">Performance optimization with caching strategies</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1744"></a>
Production Readiness ✅</h2>
<ul class="check">
<li class="checked">All services healthy and operational</li>
</ul>
<ul class="check">
<li class="checked">Database integration working correctly</li>
</ul>
<ul class="check">
<li class="checked">Frontend build system functional</li>
</ul>
<ul class="check">
<li class="checked">API endpoints responding correctly</li>
</ul>
<ul class="check">
<li class="checked">End-to-end workflows verified</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1746"></a>
10) 🎯 Implementation Status: PRODUCTION READY</h1>
<p><b>The v0.6.4 task management system is fully operational and represents enterprise-grade functionality.</b> The implementation exceeds the original scope with sophisticated workflow management, real-time synchronization, and comprehensive resource integration.</p>
<p><b>Key Achievements</b>:</p>
<ul>
<li>✅ Complete task lifecycle management</li>
<li>✅ Professional React/TypeScript frontend</li>
<li>✅ Real-time data synchronization <br  />
</li>
<li>✅ Multi-resource integration (materials, equipment, DoE)</li>
<li>✅ Type-safe end-to-end implementation</li>
<li>✅ Production-quality error handling and UX</li>
</ul>
<p><b>Next Development Priorities</b>:</p>
<ol type="1">
<li>Backend task workers for automated processing</li>
<li>Task result visualization and analytics</li>
<li>Advanced workflow dependencies</li>
<li>Notification systems for task completion</li>
<li>Performance monitoring and metrics dashboard </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
