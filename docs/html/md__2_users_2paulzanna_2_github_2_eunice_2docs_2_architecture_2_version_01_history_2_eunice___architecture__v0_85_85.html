<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Eunice Architecture — v0.5.5</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_version_01_history_2_eunice___architecture__v0_85_85.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Eunice Architecture — v0.5.5 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1301"></a></p>
<p><b>Title:</b> Critical Appraisal &amp; Bias Signals <br  />
 <b>Status:</b> Planned <br  />
 <b>Date:</b> 11‑08‑2025 (Australia/Melbourne) <br  />
 <b>Depends on:</b> v0.5.2 (retrieval/dedup/ranking/queue/PRISMA), v0.5.3 (auto‑screen, full‑text, parsing), v0.5.4 (extraction v2)</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1303"></a>
1) Objective</h1>
<p>Automatically estimate study <b>quality</b> and <b>risk‑of‑bias (RoB)</b> from parsed full texts and v0.5.4 extractions, producing:</p>
<ul>
<li>Per‑criterion judgements (<b>yes / no / unclear</b>) with <b>rationales</b> and <b>span citations</b>.</li>
<li>A <b>composite appraisal score</b> ([0,1]) and a <b>tier</b> (low / moderate / high RoB).</li>
<li>Signals and flags that can <b>gate synthesis</b> (v0.5.6) and tune depth per <b>level profile</b> (Undergrad / Masters / PhD).</li>
</ul>
<p>Human‑in‑the‑loop is not required; outputs are auditable and reproducible.</p>
<p>Out of scope: GRADE certainty of evidence, full ROB‑2/ROBINS‑I domain parity; UI.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1305"></a>
2) High‑level Flow</h1>
<p>For each <b>included</b> record with <b>Extraction v2</b>:</p>
<p>1) Build <b>feature pack</b> from: extraction payload, parsed sections/tables, and metadata. <br  />
 2) Run <b>criterion evaluators</b> (rules + LLM justification) to produce per‑criterion outcomes. <br  />
 3) Compute <b>composite score</b> and <b>tier</b>; emit flags. <br  />
 4) Persist payload, spans, and metrics; update PRISMA (appraised count). <br  />
</p>
<p>All steps are deterministic given pinned models, prompts, and config.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1307"></a>
3) Scope (Detailed)</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1308"></a>
In scope</h2>
<ul>
<li>Appraisal <b>criteria set</b> (below) with scoring and weights.</li>
<li>Deterministic <b>heuristic detectors</b> (regex/keyword) and an <b>LLM justifier</b> per criterion to extract rationale spans.</li>
<li>Composite scoring with <b>level‑aware thresholds</b> (UG/Masters/PhD).</li>
<li>Database migrations, tools/endpoints, metrics, tests.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1309"></a>
Out of scope</h2>
<ul>
<li>Publisher‑specific scraping; manual adjudication workflows; UI.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1311"></a>
4) Criteria &amp; Signals</h1>
<p>Each criterion yields <span class="tt">judgement ∈ {yes, no, unclear}</span>, <span class="tt">weight ∈ [0,1]</span>, and optional <span class="tt">severity</span> to modulate score impact.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID  </th><th class="markdownTableHeadNone">Criterion  </th><th class="markdownTableHeadNone">Examples of evidence (non‑exhaustive)  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C1  </td><td class="markdownTableBodyNone"><b>Design clarity</b>  </td><td class="markdownTableBodyNone">Stated design (in vitro / ex vivo / in vivo / clinical), objective/hypothesis explicitly stated  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C2  </td><td class="markdownTableBodyNone"><b>Control group / comparator</b>  </td><td class="markdownTableBodyNone">Untreated, vehicle, baseline or appropriate comparator present  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C3  </td><td class="markdownTableBodyNone"><b>Randomisation</b>  </td><td class="markdownTableBodyNone">“randomised”, “randomly assigned”, method of randomisation described  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C4  </td><td class="markdownTableBodyNone"><b>Blinding / masking</b>  </td><td class="markdownTableBodyNone">Blinded outcome assessment, blinded analyst  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C5  </td><td class="markdownTableBodyNone"><b>Sample size justification</b>  </td><td class="markdownTableBodyNone">Power calculation, effect size assumption described  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C6  </td><td class="markdownTableBodyNone"><b>Inclusion/exclusion criteria</b>  </td><td class="markdownTableBodyNone">Explicit criteria for subjects/samples  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C7  </td><td class="markdownTableBodyNone"><b>Handling of missing data</b>  </td><td class="markdownTableBodyNone">ITT, imputation, attrition described  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C8  </td><td class="markdownTableBodyNone"><b>Replicates / reproducibility</b>  </td><td class="markdownTableBodyNone">Biological vs technical replicates reported; number of independent experiments  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C9  </td><td class="markdownTableBodyNone"><b>Pre‑registration / protocol access</b>  </td><td class="markdownTableBodyNone">Trial registration, OSF/PROSPERO/protocol DOI  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C10  </td><td class="markdownTableBodyNone"><b>Data/code availability</b>  </td><td class="markdownTableBodyNone">Repository links, supplementary data, license  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C11  </td><td class="markdownTableBodyNone"><b>Ethics / approvals</b>  </td><td class="markdownTableBodyNone">Animal/human ethics statements, consent  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C12  </td><td class="markdownTableBodyNone"><b>Funding &amp; competing interests</b>  </td><td class="markdownTableBodyNone">Sponsors disclosed; conflict statements  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C13  </td><td class="markdownTableBodyNone"><b>Outcome measure validity</b>  </td><td class="markdownTableBodyNone">Established assays/measures; calibration  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">C14  </td><td class="markdownTableBodyNone"><b>Statistical methods suitability</b>  </td><td class="markdownTableBodyNone">Methods match design; multiple‑testing control  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">C15  </td><td class="markdownTableBodyNone"><b>Selective reporting risk</b>  </td><td class="markdownTableBodyNone">Outcome switching hints; mismatch between methods and reported results  </td></tr>
</table>
<p><b>Weights (defaults):</b> C1:.05, C2:.1, C3:.1, C4:.08, C5:.07, C6:.06, C7:.06, C8:.08, C9:.05, C10:.05, C11:.06, C12:.04, C13:.1, C14:.1, C15:.1 (sums to 1.0). Configurable.</p>
<p>Judgement scoring: <span class="tt">yes=1.0</span>, <span class="tt">unclear=0.5</span>, <span class="tt">no=0.0</span> (per‑criterion overrides allowed). Composite <span class="tt">score = Σ weight_i * value_i</span>.</p>
<p><b>Tier mapping (default):</b> <span class="tt">score ≥ 0.8 → Low RoB</span>, <span class="tt">0.6–0.8 → Moderate</span>, <span class="tt">&lt; 0.6 → High</span>. Level profiles may tighten thresholds.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1313"></a>
5) Model &amp; Determinism</h1>
<p>A hybrid evaluator for each criterion:</p>
<p>1) <b>Rules</b>: fast keyword/regex heuristics (e.g., <span class="tt">random</span>, <span class="tt">blind</span>, <span class="tt">power</span>, <span class="tt">sample size calculation</span>, ethics accession patterns, preregistration IDs). <br  />
 2) <b>LLM justifier (temperature 0.0, greedy)</b>: given the likely section(s), extract a short <b>rationale</b> sentence and <b>span offsets</b> supporting <span class="tt">yes</span> or <span class="tt">no</span>; if ambiguous, return <span class="tt">unclear</span> with the nearest language. <br  />
 3) <b>Conflict resolver</b>: if rules and LLM disagree, prefer <b>explicit negation</b> or fall back to <span class="tt">unclear</span>.</p>
<p>All prompts are versioned; model and tokenizer are pinned. Prompt hashes and decisions are recorded.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1315"></a>
6) Appraisal Payload (JSON)</h1>
<p>Stored per record as <b>AppraisalV1</b>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;schema_version&quot;: 1,</div>
<div class="line">  &quot;composite&quot;: {&quot;score&quot;: 0.76, &quot;tier&quot;: &quot;moderate&quot;},</div>
<div class="line">  &quot;criteria&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;id&quot;: &quot;C3&quot;,</div>
<div class="line">      &quot;name&quot;: &quot;Randomisation&quot;,</div>
<div class="line">      &quot;judgement&quot;: &quot;yes|no|unclear&quot;,</div>
<div class="line">      &quot;weight&quot;: 0.10,</div>
<div class="line">      &quot;rationale&quot;: &quot;Animals were randomly assigned to groups using a computer-generated sequence.&quot;,</div>
<div class="line">      &quot;confidence&quot;: 0.85,</div>
<div class="line">      &quot;spans&quot;: [</div>
<div class="line">        {&quot;section&quot;: &quot;methods&quot;, &quot;start&quot;: 12440, &quot;end&quot;: 12532, &quot;sha256&quot;: &quot;&lt;64hex&gt;&quot;, &quot;quote&quot;: &quot;... randomly assigned ...&quot;}</div>
<div class="line">      ]</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;flags&quot;: {&quot;high_risk&quot;: false, &quot;suspected_selective_reporting&quot;: true},</div>
<div class="line">  &quot;provenance&quot;: {&quot;model&quot;: &quot;&lt;pinned&gt;&quot;, &quot;prompt_version&quot;: &quot;1&quot;, &quot;prompt_hash&quot;: &quot;&lt;sha256&gt;&quot;}</div>
<div class="line">}</div>
</div><!-- fragment --><p>Notes: every criterion should include ≥1 <span class="tt">span</span> when <span class="tt">judgement = yes</span> or <span class="tt">no</span>. <span class="tt">unclear</span> may omit spans or cite nearest text.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1317"></a>
7) Data Model &amp; Migrations</h1>
<p>Additive only.</p>
<ol type="1">
<li><b><span class="tt">appraisal_runs</span></b> <br  />
<ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">run_id uuid fk -&gt; lit_search_runs(id)</span> (nullable for ad‑hoc), <span class="tt">level_profile text</span>, <span class="tt">created_at timestamptz</span>, <span class="tt">config jsonb</span></li>
</ul>
</li>
<li><b><span class="tt">appraisals_v1</span></b> <br  />
<ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">record_id uuid fk -&gt; literature_records(id)</span></li>
<li><span class="tt">run_id uuid fk -&gt; appraisal_runs(id)</span> (nullable)</li>
<li><span class="tt">payload jsonb</span>, <span class="tt">score numeric</span>, <span class="tt">tier text</span>, <span class="tt">created_at timestamptz</span> <br  />
</li>
<li>Indexes: <span class="tt">idx_app_record_id</span>, GIN on <span class="tt">(payload)</span></li>
</ul>
</li>
<li><b><span class="tt">appraisal_spans</span></b> <br  />
<ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">appraisal_id uuid fk -&gt; appraisals_v1(id)</span>, <span class="tt">record_id uuid fk</span></li>
<li><span class="tt">criterion_id text</span>, <span class="tt">section text</span>, <span class="tt">start int</span>, <span class="tt">end int</span>, <span class="tt">sha256 char(64)</span>, <span class="tt">quote text</span></li>
<li>Indexes: <span class="tt">idx_appspans_record_id</span>, <span class="tt">idx_appspans_appraisal_id</span></li>
</ul>
</li>
</ol>
<p>No destructive changes to earlier tables.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1319"></a>
8) Services &amp; Tools</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1320"></a>
8.1 database‑service (MCP)</h2>
<ul>
<li><span class="tt">appraisal_start(run_id|record_ids[], level_profile?)</span> → enqueue jobs. <br  />
</li>
<li><span class="tt">appraisal_upsert(record_id, payload)</span> → write <span class="tt">appraisals_v1</span> + <span class="tt">appraisal_spans</span>. <br  />
</li>
<li><span class="tt">appraisal_get(record_id)</span> → latest payload. <br  />
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1321"></a>
8.2 network‑service / appraiser</h2>
<ul>
<li>Build feature pack from v0.5.4 <span class="tt">extractions_v2</span> + parsed sections + metadata. <br  />
</li>
<li>Criterion evaluators (rules + LLM justifier) with pinned prompts/models. <br  />
</li>
<li>Composite scoring and tier mapping; apply level profile thresholds. <br  />
</li>
<li>Emit metrics.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1322"></a>
8.3 api‑gateway</h2>
<ul>
<li><span class="tt">POST /literature/appraisal/start</span> (legacy: /v2/...) (by <span class="tt">run_id</span> or <span class="tt">record_ids</span>, with optional <span class="tt">level_profile</span>). <br  />
</li>
<li><span class="tt">GET  /literature/appraisal/{record_id}</span> (legacy: /v2/...) → latest AppraisalV1. <br  />
</li>
<li><span class="tt">GET  /literature/appraisal/status?run_id=...</span> (legacy: /v2/...) → counts by tier and criterion coverage.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1323"></a>
8.4 research‑manager</h2>
<ul>
<li>Orchestrate appraisal over included &amp; extracted records; configurable concurrency; back‑pressure.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1325"></a>
9) Level Profiles (thresholds)</h1>
<p>Profiles adjust tier thresholds and mandatory criteria. Defaults:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;undergrad&quot;: {&quot;low&quot;: 0.75, &quot;moderate&quot;: [0.6, 0.75], &quot;mandatory&quot;: [&quot;C1&quot;,&quot;C2&quot;], &quot;notes&quot;: &quot;introductory rigour&quot;},</div>
<div class="line">  &quot;masters&quot;:   {&quot;low&quot;: 0.80, &quot;moderate&quot;: [0.65, 0.80], &quot;mandatory&quot;: [&quot;C1&quot;,&quot;C2&quot;,&quot;C13&quot;,&quot;C14&quot;]},</div>
<div class="line">  &quot;phd&quot;:       {&quot;low&quot;: 0.85, &quot;moderate&quot;: [0.7, 0.85],  &quot;mandatory&quot;: [&quot;C1&quot;,&quot;C2&quot;,&quot;C3&quot;,&quot;C4&quot;,&quot;C5&quot;,&quot;C13&quot;,&quot;C14&quot;,&quot;C15&quot;]}</div>
<div class="line">}</div>
</div><!-- fragment --><p>If any <b>mandatory</b> criterion is <span class="tt">no</span>, cap tier at <b>High RoB</b> irrespective of composite score.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1327"></a>
10) Metrics</h1>
<ul>
<li><span class="tt">lit_appraisal_total{result=success|failure}</span> <br  />
</li>
<li><span class="tt">lit_appraisal_criteria_total{id,judgement}</span> <br  />
</li>
<li><span class="tt">lit_appraisal_tier_total{tier}</span> <br  />
</li>
<li><span class="tt">lit_appraisal_latency_ms_bucket</span> <br  />
</li>
<li><span class="tt">lit_appraisal_disagreements_total</span> (rules vs LLM) <br  />
</li>
</ul>
<p>All metrics include <span class="tt">{worker="appraisal"}</span>.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1329"></a>
11) Configuration (defaults)</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;appraisal&quot;: {</div>
<div class="line">    &quot;model&quot;: &quot;&lt;pinned-llm&gt;&quot;,</div>
<div class="line">    &quot;prompt_version&quot;: &quot;1&quot;,</div>
<div class="line">    &quot;temperature&quot;: 0.0,</div>
<div class="line">    &quot;criteria_weights&quot;: {&quot;C1&quot;:0.05,&quot;C2&quot;:0.10,&quot;C3&quot;:0.10,&quot;C4&quot;:0.08,&quot;C5&quot;:0.07,&quot;C6&quot;:0.06,&quot;C7&quot;:0.06,&quot;C8&quot;:0.08,&quot;C9&quot;:0.05,&quot;C10&quot;:0.05,&quot;C11&quot;:0.06,&quot;C12&quot;:0.04,&quot;C13&quot;:0.10,&quot;C14&quot;:0.10,&quot;C15&quot;:0.10},</div>
<div class="line">    &quot;judgement_values&quot;: {&quot;yes&quot;:1.0, &quot;unclear&quot;:0.5, &quot;no&quot;:0.0},</div>
<div class="line">    &quot;tier_thresholds&quot;: {&quot;low&quot;:0.80, &quot;moderate_lo&quot;:0.60},</div>
<div class="line">    &quot;mandatory_by_level&quot;: {</div>
<div class="line">      &quot;undergrad&quot;: [&quot;C1&quot;,&quot;C2&quot;],</div>
<div class="line">      &quot;masters&quot;: [&quot;C1&quot;,&quot;C2&quot;,&quot;C13&quot;,&quot;C14&quot;],</div>
<div class="line">      &quot;phd&quot;: [&quot;C1&quot;,&quot;C2&quot;,&quot;C3&quot;,&quot;C4&quot;,&quot;C5&quot;,&quot;C13&quot;,&quot;C14&quot;,&quot;C15&quot;]</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1331"></a>
12) SLOs (initial)</h1>
<ul>
<li><b>Appraisal success:</b> ≥ 98% of included records produce a valid payload. <br  />
</li>
<li><b>Determinism:</b> repeated runs on identical inputs yield identical judgements and score (hash match) in 100% of cases. <br  />
</li>
<li><b>Throughput:</b> ≥ 40 records/min on CPU with cached models.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1333"></a>
13) Definition of Done (DoD)</h1>
<ul>
<li><span class="tt">appraisals_v1</span> and <span class="tt">appraisal_spans</span> populated; payloads contain per‑criterion judgements, spans, composite score, tier. <br  />
</li>
<li>Metrics emitted; PRISMA reflects appraised counts. <br  />
</li>
<li>API/tools available; docs updated; tests (unit+integration) passing; feature flag guards behaviour.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1335"></a>
14) Test Plan</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1336"></a>
Unit</h2>
<ul>
<li>Heuristic detectors for each criterion (positive/negative/edge cases). <br  />
</li>
<li>LLM justifier returns deterministic spans under fixed prompt/model; conflict resolver behaviour. <br  />
</li>
<li>Scoring maths (weights, judgement values, tier thresholds) including level profiles. <br  />
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1337"></a>
Integration</h2>
<ul>
<li>End‑to‑end on a labelled mini‑corpus: compare against reference judgements; report per‑criterion precision/recall; ensure composite/tier mapping. <br  />
</li>
<li>Disagreement logging between rules and LLM; metrics increments. <br  />
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1338"></a>
Non‑functional</h2>
<ul>
<li>Reproducibility check (hash of outputs) across reruns. <br  />
</li>
<li>Backoff/retry on model timeouts; bounded concurrency.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1340"></a>
15) Risks &amp; Mitigations</h1>
<ul>
<li><b>Ambiguous language → misclassification:</b> if disagreement or weak signals, prefer <span class="tt">unclear</span> and lower confidence; include rationale text to aid audit. <br  />
</li>
<li><b>Domain heterogeneity:</b> permit per‑domain overrides for keywords and weights via config. <br  />
</li>
<li><b>Model drift:</b> pin model/prompt; store hashes; periodic evaluation against held‑out labels. <br  />
</li>
<li><b>Over‑penalising exploratory studies:</b> cap effect of certain criteria (e.g., preregistration) for in‑vitro designs via design‑conditioned weights.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1342"></a>
16) Rollout &amp; Backward Compatibility</h1>
<ul>
<li>Feature flag: <span class="tt">appraisal.enabled</span> (default off). <br  />
</li>
<li>Safe to run on historic records; additive migrations only. <br  />
</li>
<li>Outputs feed into v0.5.6 synthesis gating (optional filters by tier).</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1344"></a>
17) Open Questions</h1>
<ul>
<li>Do we want design‑specific weight matrices (e.g., separate weights for in‑vitro vs animal vs clinical)? <br  />
</li>
<li>Should we introduce a small training set to calibrate judgement thresholds per domain? <br  />
</li>
<li>Where to persist per‑domain keyword lexicons (code vs DB)? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
