<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Citadel Core CLI - Deployment Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_citadel_2docs_2_d_e_p_l_o_y_m_e_n_t.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Citadel Core CLI - Deployment Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md304"></a></p>
<p><b>Version</b>: 0.1.0 <br  />
 <b>Date</b>: 2025-10-26 <br  />
 <b>Audience</b>: System administrators, DevOps engineers, deployment specialists</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md305"></a>
Overview</h1>
<p>This guide provides comprehensive instructions for deploying Citadel Core CLI in various environments, from development setups to production systems.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md306"></a>
System Requirements</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md307"></a>
Minimum Requirements</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component  </th><th class="markdownTableHeadNone">Requirement  </th><th class="markdownTableHeadNone">Notes  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>CPU</b>  </td><td class="markdownTableBodyNone">x86_64 or ARM64  </td><td class="markdownTableBodyNone">Intel/AMD 64-bit or Apple Silicon  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>RAM</b>  </td><td class="markdownTableBodyNone">16 MB  </td><td class="markdownTableBodyNone">Minimal footprint  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Disk</b>  </td><td class="markdownTableBodyNone">10 MB  </td><td class="markdownTableBodyNone">Binary + logs  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>OS</b>  </td><td class="markdownTableBodyNone">Linux 3.0+, macOS 10.12+, Windows 10+  </td><td class="markdownTableBodyNone">POSIX-compliant preferred  </td></tr>
</table>
<h2 class="doxsection"><a class="anchor" id="autotoc_md308"></a>
Recommended Requirements</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component  </th><th class="markdownTableHeadNone">Recommendation  </th><th class="markdownTableHeadNone">Benefit  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>CPU</b>  </td><td class="markdownTableBodyNone">2+ cores, 1+ GHz  </td><td class="markdownTableBodyNone">Better TUI performance  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>RAM</b>  </td><td class="markdownTableBodyNone">64 MB  </td><td class="markdownTableBodyNone">Extended logging capability  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Disk</b>  </td><td class="markdownTableBodyNone">100 MB  </td><td class="markdownTableBodyNone">Log rotation and archives  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Network</b>  </td><td class="markdownTableBodyNone">USB 2.0+ port  </td><td class="markdownTableBodyNone">Serial communication  </td></tr>
</table>
<h2 class="doxsection"><a class="anchor" id="autotoc_md309"></a>
Software Dependencies</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md310"></a>
Required Dependencies</h3>
<ul>
<li><b>C11 Compiler</b>: GCC 7+ or Clang 9+</li>
<li><b>GNU Make</b>: 4.0+ or compatible build system</li>
<li><b>libc</b>: Standard C library (glibc 2.17+ or musl)</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md311"></a>
Optional Dependencies</h3>
<ul>
<li><b>ncurses</b>: 6.0+ (for TUI mode)</li>
<li><b>pkg-config</b>: For dependency detection</li>
<li><b>valgrind</b>: Memory debugging (development)</li>
<li><b>clang-tidy</b>: Static analysis (development)</li>
<li><b>cppcheck</b>: Static analysis (development)</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md312"></a>
Installation Methods</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md313"></a>
Method 1: Binary Release (Recommended)</h2>
<p>Download and install pre-built binaries for your platform.</p>
<div class="fragment"><div class="line"># Download latest release</div>
<div class="line">curl -L https://github.com/your-org/citadel/releases/latest/download/citadel-core-cli-0.1.0-linux-x86_64.tar.gz -o citadel.tar.gz</div>
<div class="line"> </div>
<div class="line"># Extract and install</div>
<div class="line">tar -xzf citadel.tar.gz</div>
<div class="line">cd citadel-core-cli-0.1.0-linux-x86_64</div>
<div class="line">sudo ./install.sh</div>
<div class="line"> </div>
<div class="line"># Verify installation</div>
<div class="line">citadel_cli --version</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md314"></a>
Available Platforms</h3>
<ul>
<li><b>Linux x86_64</b>: <span class="tt">citadel-core-cli-0.1.0-linux-x86_64.tar.gz</span></li>
<li><b>Linux ARM64</b>: <span class="tt">citadel-core-cli-0.1.0-linux-arm64.tar.gz</span></li>
<li><b>macOS Intel</b>: <span class="tt">citadel-core-cli-0.1.0-darwin-x86_64.tar.gz</span></li>
<li><b>macOS Apple Silicon</b>: <span class="tt">citadel-core-cli-0.1.0-darwin-arm64.tar.gz</span></li>
<li><b>Windows x86_64</b>: <span class="tt">citadel-core-cli-0.1.0-windows-x86_64.zip</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md315"></a>
Method 2: Build from Source</h2>
<p>Compile from source for custom configurations or unsupported platforms.</p>
<div class="fragment"><div class="line"># Install build dependencies (Ubuntu/Debian)</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install build-essential libncurses5-dev pkg-config</div>
<div class="line"> </div>
<div class="line"># Install build dependencies (RHEL/CentOS)</div>
<div class="line">sudo yum groupinstall &quot;Development Tools&quot;</div>
<div class="line">sudo yum install ncurses-devel pkgconfig</div>
<div class="line"> </div>
<div class="line"># Install build dependencies (macOS)</div>
<div class="line">brew install ncurses pkg-config</div>
<div class="line"> </div>
<div class="line"># Clone and build</div>
<div class="line">git clone https://github.com/your-org/citadel.git</div>
<div class="line">cd citadel</div>
<div class="line">make release</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md316"></a>
Method 3: Package Manager Installation</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md317"></a>
Homebrew (macOS)</h3>
<div class="fragment"><div class="line">brew tap your-org/citadel</div>
<div class="line">brew install citadel-core-cli</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md318"></a>
APT (Debian/Ubuntu)</h3>
<div class="fragment"><div class="line"># Add repository</div>
<div class="line">curl -fsSL https://apt.your-org.com/gpg | sudo apt-key add -</div>
<div class="line">echo &quot;deb https://apt.your-org.com/stable main&quot; | sudo tee /etc/apt/sources.list.d/citadel.list</div>
<div class="line"> </div>
<div class="line"># Install</div>
<div class="line">sudo apt update</div>
<div class="line">sudo apt install citadel-core-cli</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md319"></a>
YUM (RHEL/CentOS)</h3>
<div class="fragment"><div class="line"># Add repository</div>
<div class="line">sudo yum-config-manager --add-repo https://yum.your-org.com/citadel.repo</div>
<div class="line"> </div>
<div class="line"># Install</div>
<div class="line">sudo yum install citadel-core-cli</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md320"></a>
Configuration</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md321"></a>
System-Wide Configuration</h2>
<p>Create <span class="tt">/etc/citadel/citadel.conf</span> for system-wide defaults:</p>
<div class="fragment"><div class="line">[serial]</div>
<div class="line">port = /dev/ttyUSB0</div>
<div class="line">baud = 115200</div>
<div class="line">timeout = 5000</div>
<div class="line"> </div>
<div class="line">[display]</div>
<div class="line">mode = ascii</div>
<div class="line">update_rate = 10</div>
<div class="line">colors = true</div>
<div class="line">show_timestamps = true</div>
<div class="line"> </div>
<div class="line">[logging]</div>
<div class="line">enabled = true</div>
<div class="line">filename = /var/log/citadel/telemetry_%Y%m%d_%H%M%S.csv</div>
<div class="line">max_size = 10MB</div>
<div class="line">rotate = true</div>
<div class="line"> </div>
<div class="line">[scp]</div>
<div class="line">validate_crc = true</div>
<div class="line">sync_timeout = 1000</div>
<div class="line">max_retries = 3</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md322"></a>
User Configuration</h2>
<p>Users can override defaults in <span class="tt">~/.config/citadel/citadel.conf</span>:</p>
<div class="fragment"><div class="line">[display]</div>
<div class="line">mode = tui</div>
<div class="line">colors = true</div>
<div class="line"> </div>
<div class="line">[logging]</div>
<div class="line">filename = ~/citadel_logs/session_%Y%m%d_%H%M%S.csv</div>
<div class="line">max_size = 50MB</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md323"></a>
Environment Variables</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable  </th><th class="markdownTableHeadNone">Description  </th><th class="markdownTableHeadNone">Default  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">CITADEL_CONFIG</span>  </td><td class="markdownTableBodyNone">Configuration file path  </td><td class="markdownTableBodyNone"><span class="tt">/etc/citadel/citadel.conf</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">CITADEL_LOG_DIR</span>  </td><td class="markdownTableBodyNone">Log directory  </td><td class="markdownTableBodyNone"><span class="tt">/var/log/citadel</span>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">CITADEL_PORT</span>  </td><td class="markdownTableBodyNone">Default serial port  </td><td class="markdownTableBodyNone"><span class="tt">/dev/ttyUSB0</span>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">CITADEL_BAUD</span>  </td><td class="markdownTableBodyNone">Default baud rate  </td><td class="markdownTableBodyNone"><span class="tt">115200</span>  </td></tr>
</table>
<h1 class="doxsection"><a class="anchor" id="autotoc_md324"></a>
Deployment Scenarios</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md325"></a>
Scenario 1: Development Environment</h2>
<p>Quick setup for development and testing.</p>
<div class="fragment"><div class="line"># Install to user directory</div>
<div class="line">make install PREFIX=$HOME/.local</div>
<div class="line"> </div>
<div class="line"># Create user configuration</div>
<div class="line">mkdir -p ~/.config/citadel</div>
<div class="line">cat &gt; ~/.config/citadel/citadel.conf &lt;&lt; EOF</div>
<div class="line">[serial]</div>
<div class="line">port = /dev/ttyUSB0</div>
<div class="line">baud = 115200</div>
<div class="line"> </div>
<div class="line">[display]</div>
<div class="line">mode = tui</div>
<div class="line">colors = true</div>
<div class="line"> </div>
<div class="line">[logging]</div>
<div class="line">enabled = true</div>
<div class="line">filename = ~/citadel_dev_%Y%m%d.csv</div>
<div class="line">EOF</div>
<div class="line"> </div>
<div class="line"># Run with development configuration</div>
<div class="line">citadel_cli --config ~/.config/citadel/citadel.conf</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md326"></a>
Scenario 2: Production Server</h2>
<p>Automated deployment for production environments.</p>
<div class="fragment"><div class="line"># Create dedicated user</div>
<div class="line">sudo useradd -r -s /bin/false citadel</div>
<div class="line">sudo mkdir -p /opt/citadel /var/log/citadel /etc/citadel</div>
<div class="line">sudo chown citadel:citadel /var/log/citadel</div>
<div class="line"> </div>
<div class="line"># Install binary</div>
<div class="line">sudo cp bin/citadel_cli /opt/citadel/</div>
<div class="line">sudo chmod +x /opt/citadel/citadel_cli</div>
<div class="line">sudo ln -sf /opt/citadel/citadel_cli /usr/local/bin/</div>
<div class="line"> </div>
<div class="line"># Create production configuration</div>
<div class="line">sudo tee /etc/citadel/citadel.conf &lt;&lt; EOF</div>
<div class="line">[serial]</div>
<div class="line">port = /dev/ttyUSB0</div>
<div class="line">baud = 115200</div>
<div class="line">timeout = 10000</div>
<div class="line"> </div>
<div class="line">[display]</div>
<div class="line">mode = ascii</div>
<div class="line">update_rate = 1</div>
<div class="line">colors = false</div>
<div class="line">show_timestamps = true</div>
<div class="line"> </div>
<div class="line">[logging]</div>
<div class="line">enabled = true</div>
<div class="line">filename = /var/log/citadel/telemetry_%Y%m%d_%H.csv</div>
<div class="line">max_size = 100MB</div>
<div class="line">rotate = true</div>
<div class="line"> </div>
<div class="line">[scp]</div>
<div class="line">validate_crc = true</div>
<div class="line">sync_timeout = 2000</div>
<div class="line">max_retries = 5</div>
<div class="line">EOF</div>
<div class="line"> </div>
<div class="line"># Set permissions</div>
<div class="line">sudo chmod 644 /etc/citadel/citadel.conf</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md327"></a>
Scenario 3: Embedded System</h2>
<p>Deployment on resource-constrained embedded systems.</p>
<div class="fragment"><div class="line"># Build minimal static binary</div>
<div class="line">make STATIC=1 MINIMAL=1 release</div>
<div class="line"> </div>
<div class="line"># Strip debug symbols for minimal size</div>
<div class="line">strip bin/citadel_cli</div>
<div class="line"> </div>
<div class="line"># Verify minimal binary</div>
<div class="line">ls -la bin/citadel_cli</div>
<div class="line">file bin/citadel_cli</div>
<div class="line"> </div>
<div class="line"># Deploy to embedded system</div>
<div class="line">scp bin/citadel_cli root@embedded-system:/usr/bin/</div>
<div class="line">ssh root@embedded-system &quot;chmod +x /usr/bin/citadel_cli&quot;</div>
<div class="line"> </div>
<div class="line"># Create minimal configuration</div>
<div class="line">ssh root@embedded-system &quot;mkdir -p /etc/citadel&quot;</div>
<div class="line">cat &lt;&lt; &#39;EOF&#39; | ssh root@embedded-system &quot;cat &gt; /etc/citadel/citadel.conf&quot;</div>
<div class="line">[serial]</div>
<div class="line">port = /dev/ttyS0</div>
<div class="line">baud = 115200</div>
<div class="line"> </div>
<div class="line">[display]</div>
<div class="line">mode = ascii</div>
<div class="line">colors = false</div>
<div class="line"> </div>
<div class="line">[logging]</div>
<div class="line">enabled = false</div>
<div class="line">EOF</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md328"></a>
Scenario 4: Container Deployment</h2>
<p>Containerized deployment using Docker.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md329"></a>
Dockerfile</h3>
<div class="fragment"><div class="line">FROM alpine:3.18</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Install runtime dependencies</span></div>
<div class="line">RUN apk add --no-cache libc6-compat ncurses</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Create citadel user</span></div>
<div class="line">RUN adduser -D -s /bin/sh citadel</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Copy binary and configuration</span></div>
<div class="line">COPY bin/citadel_cli /usr/local/bin/</div>
<div class="line">COPY docker/citadel.conf /etc/citadel/</div>
<div class="line">RUN chmod +x /usr/local/bin/citadel_cli</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Create log directory</span></div>
<div class="line">RUN mkdir -p /var/log/citadel &amp;&amp; \</div>
<div class="line">    chown citadel:citadel /var/log/citadel</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Switch to citadel user</span></div>
<div class="line">USER citadel</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Expose volume for logs</span></div>
<div class="line">VOLUME [<span class="stringliteral">&quot;/var/log/citadel&quot;</span>]</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Set entrypoint</span></div>
<div class="line">ENTRYPOINT [<span class="stringliteral">&quot;/usr/local/bin/citadel_cli&quot;</span>]</div>
<div class="line">CMD [<span class="stringliteral">&quot;--config&quot;</span>, <span class="stringliteral">&quot;/etc/citadel/citadel.conf&quot;</span>]</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md330"></a>
Docker Deployment</h3>
<div class="fragment"><div class="line"># Build container</div>
<div class="line">docker build -t citadel-core-cli:0.1.0 .</div>
<div class="line"> </div>
<div class="line"># Run container with device access</div>
<div class="line">docker run -d \</div>
<div class="line">  --name citadel-monitor \</div>
<div class="line">  --device=/dev/ttyUSB0:/dev/ttyUSB0 \</div>
<div class="line">  -v citadel-logs:/var/log/citadel \</div>
<div class="line">  citadel-core-cli:0.1.0 \</div>
<div class="line">  --port /dev/ttyUSB0 --mode ascii --log /var/log/citadel/telemetry.csv</div>
<div class="line"> </div>
<div class="line"># View logs</div>
<div class="line">docker logs citadel-monitor</div>
<div class="line">docker exec citadel-monitor tail -f /var/log/citadel/telemetry.csv</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md331"></a>
Service Integration</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md332"></a>
systemd Service (Linux)</h2>
<p>Create <span class="tt">/etc/systemd/system/citadel-monitor.service</span>:</p>
<div class="fragment"><div class="line">[Unit]</div>
<div class="line">Description=Citadel Core CLI Telemetry Monitor</div>
<div class="line">After=network.target</div>
<div class="line">Wants=network.target</div>
<div class="line"> </div>
<div class="line">[Service]</div>
<div class="line">Type=simple</div>
<div class="line">User=citadel</div>
<div class="line">Group=citadel</div>
<div class="line">ExecStart=/usr/local/bin/citadel_cli --config /etc/citadel/citadel.conf --port /dev/ttyUSB0 --mode ascii --log /var/log/citadel/telemetry.csv</div>
<div class="line">Restart=always</div>
<div class="line">RestartSec=5</div>
<div class="line">StandardOutput=journal</div>
<div class="line">StandardError=journal</div>
<div class="line"> </div>
<div class="line"># Security hardening</div>
<div class="line">NoNewPrivileges=yes</div>
<div class="line">ProtectSystem=strict</div>
<div class="line">ProtectHome=yes</div>
<div class="line">ReadWritePaths=/var/log/citadel</div>
<div class="line">PrivateTmp=yes</div>
<div class="line"> </div>
<div class="line">[Install]</div>
<div class="line">WantedBy=multi-user.target</div>
</div><!-- fragment --><div class="fragment"><div class="line"># Enable and start service</div>
<div class="line">sudo systemctl daemon-reload</div>
<div class="line">sudo systemctl enable citadel-monitor</div>
<div class="line">sudo systemctl start citadel-monitor</div>
<div class="line"> </div>
<div class="line"># Check status</div>
<div class="line">sudo systemctl status citadel-monitor</div>
<div class="line">sudo journalctl -u citadel-monitor -f</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md333"></a>
launchd Service (macOS)</h2>
<p>Create <span class="tt">/Library/LaunchDaemons/com.yourorg.citadel.plist</span>:</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;!<span class="keyword">DOCTYPE</span> <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="stringliteral">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="stringliteral">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">plist</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">&lt;<span class="keywordtype">dict</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">key</span>&gt;<span class="keyword">Label</span>&lt;/<span class="keywordtype">key</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">string</span>&gt;<span class="keyword">com.yourorg.citadel</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">key</span>&gt;<span class="keyword">ProgramArguments</span>&lt;/<span class="keywordtype">key</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">array</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;/<span class="keyword">usr</span>/<span class="keyword">local</span>/<span class="keyword">bin</span>/<span class="keyword">citadel_cli</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;--<span class="keyword">config</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;/<span class="keyword">etc</span>/<span class="keyword">citadel</span>/<span class="keyword">citadel.conf</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;--<span class="keyword">port</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;/<span class="keyword">dev</span>/<span class="keyword">cu.usbserial</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;--<span class="keyword">mode</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">string</span>&gt;<span class="keyword">ascii</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">array</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">key</span>&gt;<span class="keyword">KeepAlive</span>&lt;/<span class="keywordtype">key</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">true</span>/&gt;</div>
<div class="line">    &lt;<span class="keywordtype">key</span>&gt;<span class="keyword">StandardOutPath</span>&lt;/<span class="keywordtype">key</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">string</span>&gt;/<span class="keyword">var</span>/<span class="keyword">log</span>/<span class="keyword">citadel</span>/<span class="keyword">citadel.log</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">key</span>&gt;<span class="keyword">StandardErrorPath</span>&lt;/<span class="keywordtype">key</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">string</span>&gt;/<span class="keyword">var</span>/<span class="keyword">log</span>/<span class="keyword">citadel</span>/<span class="keyword">citadel.log</span>&lt;/<span class="keywordtype">string</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">dict</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">plist</span>&gt;</div>
</div><!-- fragment --><div class="fragment"><div class="line"># Load and start service</div>
<div class="line">sudo launchctl load /Library/LaunchDaemons/com.yourorg.citadel.plist</div>
<div class="line">sudo launchctl start com.yourorg.citadel</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md334"></a>
Security Considerations</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md335"></a>
File Permissions</h2>
<div class="fragment"><div class="line"># Secure configuration files</div>
<div class="line">sudo chmod 644 /etc/citadel/citadel.conf</div>
<div class="line">sudo chown root:root /etc/citadel/citadel.conf</div>
<div class="line"> </div>
<div class="line"># Secure log directory</div>
<div class="line">sudo chmod 755 /var/log/citadel</div>
<div class="line">sudo chown citadel:citadel /var/log/citadel</div>
<div class="line"> </div>
<div class="line"># Secure binary</div>
<div class="line">sudo chmod 755 /usr/local/bin/citadel_cli</div>
<div class="line">sudo chown root:root /usr/local/bin/citadel_cli</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md336"></a>
Serial Port Access</h2>
<p>Grant access to serial devices without root privileges:</p>
<div class="fragment"><div class="line"># Add user to dialout group (Linux)</div>
<div class="line">sudo usermod -a -G dialout $USER</div>
<div class="line"> </div>
<div class="line"># Add user to wheel group (macOS)</div>
<div class="line">sudo dseditgroup -o edit -a $USER -t user wheel</div>
<div class="line"> </div>
<div class="line"># Create udev rule for specific device (Linux)</div>
<div class="line">echo &#39;SUBSYSTEM==&quot;tty&quot;, ATTRS{idVendor}==&quot;1234&quot;, ATTRS{idProduct}==&quot;5678&quot;, GROUP=&quot;citadel&quot;, MODE=&quot;0660&quot;&#39; | sudo tee /etc/udev/rules.d/99-citadel-serial.rules</div>
<div class="line">sudo udevadm control --reload-rules</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md337"></a>
Network Security</h2>
<p>For network-enabled deployments:</p>
<div class="fragment"><div class="line"># Firewall configuration (Linux)</div>
<div class="line">sudo ufw allow from 192.168.1.0/24 to any port 8080</div>
<div class="line">sudo ufw enable</div>
<div class="line"> </div>
<div class="line"># SELinux configuration (RHEL/CentOS)</div>
<div class="line">sudo setsebool -P httpd_can_network_connect 1</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md338"></a>
Monitoring and Maintenance</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md339"></a>
Log Management</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md340"></a>
Log Rotation</h3>
<p>Configure logrotate for automatic log management:</p>
<div class="fragment"><div class="line"># Create /etc/logrotate.d/citadel</div>
<div class="line">sudo tee /etc/logrotate.d/citadel &lt;&lt; EOF</div>
<div class="line">/var/log/citadel/*.csv {</div>
<div class="line">    daily</div>
<div class="line">    rotate 30</div>
<div class="line">    compress</div>
<div class="line">    delaycompress</div>
<div class="line">    missingok</div>
<div class="line">    notifempty</div>
<div class="line">    copytruncate</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/var/log/citadel/*.log {</div>
<div class="line">    weekly</div>
<div class="line">    rotate 4</div>
<div class="line">    compress</div>
<div class="line">    delaycompress</div>
<div class="line">    missingok</div>
<div class="line">    notifempty</div>
<div class="line">    copytruncate</div>
<div class="line">}</div>
<div class="line">EOF</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md341"></a>
Log Analysis</h3>
<p>Monitor system health through logs:</p>
<div class="fragment"><div class="line"># Monitor real-time telemetry</div>
<div class="line">tail -f /var/log/citadel/telemetry_$(date +%Y%m%d).csv</div>
<div class="line"> </div>
<div class="line"># Check for errors</div>
<div class="line">grep -E &quot;(ERROR|WARN)&quot; /var/log/citadel/*.log</div>
<div class="line"> </div>
<div class="line"># Analyze performance</div>
<div class="line">awk -F, &#39;NR&gt;1 {sum+=$3; count++} END {print &quot;Average CPU temp:&quot;, sum/count &quot;°C&quot;}&#39; /var/log/citadel/telemetry_$(date +%Y%m%d).csv</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md342"></a>
Health Monitoring</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md343"></a>
Process Monitoring</h3>
<div class="fragment"><div class="line"># Check if citadel is running</div>
<div class="line">pgrep -f citadel_cli</div>
<div class="line"> </div>
<div class="line"># Monitor resource usage</div>
<div class="line">top -p $(pgrep citadel_cli)</div>
<div class="line"> </div>
<div class="line"># Check memory usage</div>
<div class="line">ps aux | grep citadel_cli</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md344"></a>
Connection Monitoring</h3>
<div class="fragment"><div class="line"># Monitor serial port status</div>
<div class="line">lsof | grep ttyUSB</div>
<div class="line"> </div>
<div class="line"># Check for USB device</div>
<div class="line">lsusb | grep -E &quot;(Serial|UART|USB)&quot;</div>
<div class="line"> </div>
<div class="line"># Monitor connection statistics</div>
<div class="line">journalctl -u citadel-monitor | grep -E &quot;(CONNECT|DISCONNECT|ERROR)&quot;</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md345"></a>
Troubleshooting</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md346"></a>
Common Issues</h2>
<h3 class="doxsection"><a class="anchor" id="autotoc_md347"></a>
1. Permission Denied on Serial Port</h3>
<div class="fragment"><div class="line"># Check current user groups</div>
<div class="line">groups $USER</div>
<div class="line"> </div>
<div class="line"># Add user to dialout group</div>
<div class="line">sudo usermod -a -G dialout $USER</div>
<div class="line"> </div>
<div class="line"># Log out and back in, or use newgrp</div>
<div class="line">newgrp dialout</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md348"></a>
2. Device Not Found</h3>
<div class="fragment"><div class="line"># List available serial devices</div>
<div class="line">ls -la /dev/tty*</div>
<div class="line"> </div>
<div class="line"># Check USB devices</div>
<div class="line">lsusb</div>
<div class="line">dmesg | grep -i usb</div>
<div class="line"> </div>
<div class="line"># Check device permissions</div>
<div class="line">ls -la /dev/ttyUSB0</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md349"></a>
3. Build Failures</h3>
<div class="fragment"><div class="line"># Install missing dependencies</div>
<div class="line">sudo apt install build-essential libncurses5-dev</div>
<div class="line"> </div>
<div class="line"># Clean and rebuild</div>
<div class="line">make clean</div>
<div class="line">make DEBUG=1</div>
</div><!-- fragment --><h3 class="doxsection"><a class="anchor" id="autotoc_md350"></a>
4. Performance Issues</h3>
<div class="fragment"><div class="line"># Run performance tests</div>
<div class="line">make perf</div>
<div class="line"> </div>
<div class="line"># Check system resources</div>
<div class="line">htop</div>
<div class="line">iostat 1 5</div>
<div class="line"> </div>
<div class="line"># Analyze with profiling tools</div>
<div class="line">valgrind --tool=callgrind ./bin/citadel_cli</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md351"></a>
Debug Mode</h2>
<p>Enable debug output for troubleshooting:</p>
<div class="fragment"><div class="line"># Compile with debug symbols</div>
<div class="line">make clean</div>
<div class="line">make DEBUG=1</div>
<div class="line"> </div>
<div class="line"># Run with verbose output</div>
<div class="line">citadel_cli --port /dev/ttyUSB0 --debug --log debug.csv</div>
<div class="line"> </div>
<div class="line"># Use GDB for debugging</div>
<div class="line">gdb ./bin/citadel_cli</div>
<div class="line">(gdb) run --port /dev/ttyUSB0</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md352"></a>
Log Analysis</h2>
<p>Common log patterns and their meanings:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Pattern  </th><th class="markdownTableHeadNone">Meaning  </th><th class="markdownTableHeadNone">Action  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">SERIAL_ERR_OPEN_FAILED</span>  </td><td class="markdownTableBodyNone">Cannot open serial port  </td><td class="markdownTableBodyNone">Check device and permissions  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">SCP_SYNC_TIMEOUT</span>  </td><td class="markdownTableBodyNone">No data from drone  </td><td class="markdownTableBodyNone">Check connection and baud rate  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">CRC_ERROR</span>  </td><td class="markdownTableBodyNone">Data corruption  </td><td class="markdownTableBodyNone">Check cable and interference  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">FRAME_OVERFLOW</span>  </td><td class="markdownTableBodyNone">High data rate  </td><td class="markdownTableBodyNone">Increase buffer size or reduce rate  </td></tr>
</table>
<h1 class="doxsection"><a class="anchor" id="autotoc_md353"></a>
Performance Tuning</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md354"></a>
System Optimization</h2>
<div class="fragment"><div class="line"># Increase serial buffer size (Linux)</div>
<div class="line">echo 4096 &gt; /sys/class/tty/ttyUSB0/rx_buffer_size</div>
<div class="line"> </div>
<div class="line"># Set CPU governor to performance</div>
<div class="line">echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor</div>
<div class="line"> </div>
<div class="line"># Disable power management for USB</div>
<div class="line">echo -1 | sudo tee /sys/module/usbcore/parameters/autosuspend</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md355"></a>
Application Tuning</h2>
<div class="fragment"><div class="line"># Use high priority scheduling</div>
<div class="line">nice -n -10 citadel_cli --port /dev/ttyUSB0</div>
<div class="line"> </div>
<div class="line"># Increase update rate for high-frequency data</div>
<div class="line">citadel_cli --port /dev/ttyUSB0 --mode tui --update-rate 50</div>
<div class="line"> </div>
<div class="line"># Disable logging for maximum performance</div>
<div class="line">citadel_cli --port /dev/ttyUSB0 --no-log</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md356"></a>
Backup and Recovery</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md357"></a>
Configuration Backup</h2>
<div class="fragment"><div class="line"># Backup configuration</div>
<div class="line">sudo tar -czf citadel-config-$(date +%Y%m%d).tar.gz /etc/citadel/</div>
<div class="line"> </div>
<div class="line"># Backup logs</div>
<div class="line">sudo tar -czf citadel-logs-$(date +%Y%m%d).tar.gz /var/log/citadel/</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md358"></a>
Recovery Procedures</h2>
<div class="fragment"><div class="line"># Restore configuration</div>
<div class="line">sudo tar -xzf citadel-config-YYYYMMDD.tar.gz -C /</div>
<div class="line"> </div>
<div class="line"># Restore service</div>
<div class="line">sudo systemctl stop citadel-monitor</div>
<div class="line">sudo cp /opt/citadel/citadel_cli.backup /opt/citadel/citadel_cli</div>
<div class="line">sudo systemctl start citadel-monitor</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md359"></a>
Migration Guide</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md360"></a>
Upgrading from Previous Versions</h2>
<ol type="1">
<li><p class="startli"><b>Stop the service</b>:</p>
<div class="fragment"><div class="line">sudo systemctl stop citadel-monitor</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Backup current installation</b>:</p>
<div class="fragment"><div class="line">sudo cp /usr/local/bin/citadel_cli /usr/local/bin/citadel_cli.backup</div>
<div class="line">sudo cp /etc/citadel/citadel.conf /etc/citadel/citadel.conf.backup</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Install new version</b>:</p>
<div class="fragment"><div class="line">sudo make install</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Update configuration</b> (if needed):</p>
<div class="fragment"><div class="line">sudo nano /etc/citadel/citadel.conf</div>
</div><!-- fragment --></li>
<li><p class="startli"><b>Start service</b>:</p>
<div class="fragment"><div class="line">sudo systemctl start citadel-monitor</div>
</div><!-- fragment --></li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md361"></a>
Configuration Migration</h2>
<p>Configuration changes between versions:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Version  </th><th class="markdownTableHeadNone">Changes  </th><th class="markdownTableHeadNone">Migration Required  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0.1.0 → 0.2.0  </td><td class="markdownTableBodyNone">Added <span class="tt">scp.max_retries</span>  </td><td class="markdownTableBodyNone">Add to config file  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0.2.0 → 0.3.0  </td><td class="markdownTableBodyNone">Changed logging format  </td><td class="markdownTableBodyNone">Update column names  </td></tr>
</table>
<h1 class="doxsection"><a class="anchor" id="autotoc_md362"></a>
Support and Resources</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md363"></a>
Documentation</h2>
<ul>
<li><b>API Reference</b>: <span class="tt">docs/API.md</span></li>
<li><b>Configuration Guide</b>: <span class="tt">docs/Configuration.md</span></li>
<li><b>Troubleshooting</b>: <span class="tt">docs/Troubleshooting.md</span></li>
<li><b>Performance Guide</b>: <span class="tt">docs/Performance.md</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md364"></a>
Community Resources</h2>
<ul>
<li><b>GitHub Repository</b>: <a href="https://github.com/your-org/citadel">https://github.com/your-org/citadel</a></li>
<li><b>Documentation Site</b>: <a href="https://docs.your-org.com/citadel">https://docs.your-org.com/citadel</a></li>
<li><b>Community Forum</b>: <a href="https://community.your-org.com/citadel">https://community.your-org.com/citadel</a></li>
<li><b>Issue Tracker</b>: <a href="https://github.com/your-org/citadel/issues">https://github.com/your-org/citadel/issues</a></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md365"></a>
Professional Support</h2>
<ul>
<li><b>Email Support</b>: <a href="#" onclick="location.href='mai'+'lto:'+'sup'+'po'+'rt@'+'yo'+'ur-'+'or'+'g.c'+'om'; return false;">suppo<span class="obfuscator">.nosp@m.</span>rt@y<span class="obfuscator">.nosp@m.</span>our-o<span class="obfuscator">.nosp@m.</span>rg.c<span class="obfuscator">.nosp@m.</span>om</a></li>
<li><b>Priority Support</b>: <a href="#" onclick="location.href='mai'+'lto:'+'ent'+'er'+'pri'+'se'+'@yo'+'ur'+'-or'+'g.'+'com'; return false;">enter<span class="obfuscator">.nosp@m.</span>pris<span class="obfuscator">.nosp@m.</span>e@you<span class="obfuscator">.nosp@m.</span>r-or<span class="obfuscator">.nosp@m.</span>g.com</a></li>
<li><b>Training Services</b>: <a href="#" onclick="location.href='mai'+'lto:'+'tra'+'in'+'ing'+'@y'+'our'+'-o'+'rg.'+'co'+'m'; return false;">train<span class="obfuscator">.nosp@m.</span>ing@<span class="obfuscator">.nosp@m.</span>your-<span class="obfuscator">.nosp@m.</span>org.<span class="obfuscator">.nosp@m.</span>com</a></li>
<li><b>Consulting</b>: <a href="#" onclick="location.href='mai'+'lto:'+'con'+'su'+'lti'+'ng'+'@yo'+'ur'+'-or'+'g.'+'com'; return false;">consu<span class="obfuscator">.nosp@m.</span>ltin<span class="obfuscator">.nosp@m.</span>g@you<span class="obfuscator">.nosp@m.</span>r-or<span class="obfuscator">.nosp@m.</span>g.com</a></li>
</ul>
<hr  />
<p>This deployment guide covers comprehensive installation, configuration, and maintenance procedures for Citadel Core CLI across various environments and use cases. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
