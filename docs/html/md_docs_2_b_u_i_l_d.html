<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: ACP Library Build Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md_docs_2_b_u_i_l_d.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ACP Library Build Guide </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md53"></a></p>
<p>This guide covers building, installing, and integrating the ACP (Autonomous Command Protocol) library across different platforms and build systems.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md54"></a>
Table of Contents</h1>
<ol type="1">
<li>Quick Start</li>
<li>Build Systems</li>
<li>Platform Support</li>
<li>Build Options</li>
<li>Installation</li>
<li>Integration</li>
<li>Cross-Compilation</li>
<li>Troubleshooting</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md55"></a>
Quick Start</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md56"></a>
Prerequisites</h2>
<ul>
<li><b>C99 compliant compiler</b>: GCC 4.9+, Clang 3.5+, or MSVC 2015+</li>
<li><b>Build tools</b>: Make and/or CMake 3.16+</li>
<li><b>Platform</b>: Linux, macOS, Windows (MinGW), or embedded systems</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md57"></a>
Fast Build (CMake)</h2>
<div class="fragment"><div class="line"># Clone and build</div>
<div class="line">git clone https://github.com/pzanna/acp.git</div>
<div class="line">cd acp</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --parallel</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md58"></a>
Fast Build (Make)</h2>
<div class="fragment"><div class="line"># Clone and build</div>
<div class="line">git clone https://github.com/pzanna/acp.git</div>
<div class="line">cd acp</div>
<div class="line">make all</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md59"></a>
Build Systems</h1>
<p>ACP supports two build systems with feature parity:</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md60"></a>
CMake (Recommended)</h2>
<p>CMake provides the most portable and feature-rich build experience:</p>
<div class="fragment"><div class="line"># Configure</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. [OPTIONS]</div>
<div class="line"> </div>
<div class="line"># Build</div>
<div class="line">cmake --build . --parallel</div>
<div class="line"> </div>
<div class="line"># Test</div>
<div class="line">ctest --output-on-failure</div>
<div class="line"> </div>
<div class="line"># Install</div>
<div class="line">cmake --install . --prefix /usr/local</div>
</div><!-- fragment --><p><b>Key CMake Features:</b></p>
<ul>
<li>Automatic platform detection</li>
<li>Shared/static library generation</li>
<li>Cross-platform install targets</li>
<li>Find module generation</li>
<li>MSVC support (future)</li>
<li>Embedded system support</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md61"></a>
Make</h2>
<p>Make provides a lightweight alternative with platform detection:</p>
<div class="fragment"><div class="line"># Build everything</div>
<div class="line">make all</div>
<div class="line"> </div>
<div class="line"># Build specific targets</div>
<div class="line">make static          # Static library only</div>
<div class="line">make shared          # Shared library only (Unix)  </div>
<div class="line">make examples        # Example programs</div>
<div class="line">make tests          # Test programs</div>
<div class="line"> </div>
<div class="line"># Run tests</div>
<div class="line">make check</div>
<div class="line"> </div>
<div class="line"># Install</div>
<div class="line">make install PREFIX=/usr/local</div>
<div class="line"> </div>
<div class="line"># Clean</div>
<div class="line">make clean</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md62"></a>
Platform Support</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md63"></a>
Linux (x86_64, ARM64)</h2>
<p><b>Supported Compilers:</b></p>
<ul>
<li>GCC 4.9+ (recommended: 9.0+)</li>
<li>Clang 3.5+ (recommended: 10.0+)</li>
</ul>
<p><b>Build Commands:</b></p>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --parallel</div>
<div class="line"> </div>
<div class="line"># Make  </div>
<div class="line">make all CC=gcc</div>
<div class="line">make all CC=clang</div>
</div><!-- fragment --><p><b>Generated Libraries:</b></p>
<ul>
<li><span class="tt">libacp.a</span> (static)</li>
<li><span class="tt">libacp.so</span> (shared with versioning)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md64"></a>
macOS (Intel, Apple Silicon)</h2>
<p><b>Supported Compilers:</b></p>
<ul>
<li>Clang (Xcode Command Line Tools)</li>
<li>GCC via Homebrew</li>
</ul>
<p><b>Prerequisites:</b></p>
<div class="fragment"><div class="line"># Install Xcode Command Line Tools</div>
<div class="line">xcode-select --install</div>
<div class="line"> </div>
<div class="line"># Optional: Install additional tools via Homebrew</div>
<div class="line">brew install cmake gcc doxygen</div>
</div><!-- fragment --><p><b>Build Commands:</b></p>
<div class="fragment"><div class="line"># CMake (uses system clang by default)</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --parallel</div>
<div class="line"> </div>
<div class="line"># Make</div>
<div class="line">make all</div>
</div><!-- fragment --><p><b>Generated Libraries:</b></p>
<ul>
<li><span class="tt">libacp.a</span> (static)</li>
<li><span class="tt">libacp.dylib</span> (shared with versioning)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md65"></a>
Windows (MinGW, MSVC)</h2>
<p><b>Supported Compilers:</b></p>
<ul>
<li>MinGW-w64 (via MSYS2) - Recommended</li>
<li>Microsoft Visual C++ 2015+ (partial support)</li>
<li>Clang for Windows</li>
</ul>
<p><b>Prerequisites:</b></p>
<ul>
<li>MSYS2 with MinGW-w64 toolchain (recommended)</li>
<li>CMake (via MSYS2 or standalone installer)</li>
<li>Windows SDK (for native Windows APIs)</li>
</ul>
<p><b>Setup MSYS2 (Recommended):</b></p>
<div class="fragment"><div class="line"># Install complete toolchain</div>
<div class="line">pacman -S mingw-w64-x86_64-gcc</div>
<div class="line">pacman -S mingw-w64-x86_64-cmake</div>
<div class="line">pacman -S mingw-w64-x86_64-make</div>
<div class="line">pacman -S mingw-w64-x86_64-pkg-config</div>
</div><!-- fragment --><p><b>Build Commands:</b></p>
<div class="fragment"><div class="line"># CMake with MinGW (in MSYS2 shell)</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -G &quot;MinGW Makefiles&quot; -DCMAKE_BUILD_TYPE=Release</div>
<div class="line">cmake --build . --parallel</div>
<div class="line"> </div>
<div class="line"># CMake with Visual Studio</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -G &quot;Visual Studio 16 2019&quot; -A x64</div>
<div class="line">cmake --build . --config Release</div>
<div class="line"> </div>
<div class="line"># Make (in MSYS2 shell)</div>
<div class="line">make all PLATFORM=windows</div>
</div><!-- fragment --><p><b>Generated Libraries:</b></p>
<ul>
<li><span class="tt">libacp.a</span> (static)</li>
<li>Windows shared library support planned for v0.4</li>
</ul>
<p><b>Windows Platform Features:</b></p>
<ul>
<li>Native Win32 API time functions (QueryPerformanceCounter)</li>
<li>Critical Section mutexes</li>
<li>Windows-style logging with timestamps</li>
<li>Keystore in <span class="tt">C:\ProgramData\ACP\acp_keystore.bin</span></li>
<li>Automatic WS2_32 linking for socket support</li>
</ul>
<p><b>Runtime Dependencies:</b></p>
<ul>
<li>None (statically linked by default)</li>
<li>WS2_32.dll (Windows Sockets - standard on all Windows)</li>
</ul>
<p><b>Installation Paths:</b></p>
<ul>
<li>Headers: <span class="tt">C:\Program Files\ACP\include\</span></li>
<li>Libraries: <span class="tt">C:\Program Files\ACP\lib\</span></li>
<li>Documentation: <span class="tt">C:\Program Files\ACP\doc\</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md66"></a>
Embedded Systems</h2>
<p>ACP is designed for embedded use with the <span class="tt">ACP_NO_HEAP</span> flag (default):</p>
<div class="fragment"><div class="line"># CMake for embedded (example for ARM Cortex-M)</div>
<div class="line">cmake .. -DCMAKE_SYSTEM_NAME=Generic \</div>
<div class="line">         -DCMAKE_C_COMPILER=arm-none-eabi-gcc \</div>
<div class="line">         -DACP_NO_HEAP=ON \</div>
<div class="line">         -DACP_BUILD_SHARED=OFF \</div>
<div class="line">         -DACP_BUILD_EXAMPLES=OFF</div>
<div class="line"> </div>
<div class="line"># Make for embedded</div>
<div class="line">make static CC=arm-none-eabi-gcc CPPFLAGS=&quot;-DACP_NO_HEAP=1&quot;</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md67"></a>
Build Options</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md68"></a>
CMake Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">ACP_BUILD_STATIC</span>  </td><td class="markdownTableBodyNone">ON  </td><td class="markdownTableBodyNone">Build static library (.a)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">ACP_BUILD_SHARED</span>  </td><td class="markdownTableBodyNone">ON  </td><td class="markdownTableBodyNone">Build shared library (.so/.dylib)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">ACP_BUILD_EXAMPLES</span>  </td><td class="markdownTableBodyNone">ON  </td><td class="markdownTableBodyNone">Build example programs  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">ACP_BUILD_TESTS</span>  </td><td class="markdownTableBodyNone">ON  </td><td class="markdownTableBodyNone">Build test programs  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">ACP_ENABLE_HEAP</span>  </td><td class="markdownTableBodyNone">OFF  </td><td class="markdownTableBodyNone">Allow heap allocation (embedded=OFF)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">CMAKE_BUILD_TYPE</span>  </td><td class="markdownTableBodyNone">Debug  </td><td class="markdownTableBodyNone">Debug, Release, RelWithDebInfo, MinSizeRel  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">CMAKE_INSTALL_PREFIX</span>  </td><td class="markdownTableBodyNone">/usr/local  </td><td class="markdownTableBodyNone">Installation directory  </td></tr>
</table>
<p><b>Example Configurations:</b></p>
<div class="fragment"><div class="line"># Production build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release \</div>
<div class="line">         -DACP_BUILD_TESTS=OFF \</div>
<div class="line">         -DACP_BUILD_EXAMPLES=OFF</div>
<div class="line"> </div>
<div class="line"># Development build  </div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=Debug \</div>
<div class="line">         -DACP_BUILD_TESTS=ON \</div>
<div class="line">         -DACP_ENABLE_HEAP=ON</div>
<div class="line"> </div>
<div class="line"># Embedded build</div>
<div class="line">cmake .. -DCMAKE_BUILD_TYPE=MinSizeRel \</div>
<div class="line">         -DACP_NO_HEAP=ON \</div>
<div class="line">         -DACP_BUILD_SHARED=OFF \</div>
<div class="line">         -DACP_BUILD_EXAMPLES=OFF \</div>
<div class="line">         -DACP_BUILD_TESTS=OFF</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md69"></a>
Make Options</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">CC</span>  </td><td class="markdownTableBodyNone">gcc  </td><td class="markdownTableBodyNone">Compiler to use  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">PREFIX</span>  </td><td class="markdownTableBodyNone">/usr/local  </td><td class="markdownTableBodyNone">Install prefix  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">ACP_ENABLE_HEAP</span>  </td><td class="markdownTableBodyNone">(unset)  </td><td class="markdownTableBodyNone">Set to 1 to enable heap  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">CFLAGS</span>  </td><td class="markdownTableBodyNone">(see Makefile)  </td><td class="markdownTableBodyNone">Additional compiler flags  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">LDFLAGS</span>  </td><td class="markdownTableBodyNone">(empty)  </td><td class="markdownTableBodyNone">Additional linker flags  </td></tr>
</table>
<p><b>Example Configurations:</b></p>
<div class="fragment"><div class="line"># Cross-compilation</div>
<div class="line">make CC=aarch64-linux-gnu-gcc PREFIX=/opt/acp</div>
<div class="line"> </div>
<div class="line"># Debug build</div>
<div class="line">make CFLAGS=&quot;-g -O0 -DDEBUG&quot;</div>
<div class="line"> </div>
<div class="line"># Embedded build  </div>
<div class="line">make CC=arm-none-eabi-gcc ACP_ENABLE_HEAP=0</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md70"></a>
Installation</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md71"></a>
System-wide Installation</h2>
<p><b>CMake:</b></p>
<div class="fragment"><div class="line"># Install to system directories (requires sudo on Unix)</div>
<div class="line">cd build</div>
<div class="line">sudo cmake --install . --prefix /usr/local</div>
<div class="line"> </div>
<div class="line"># Install to custom prefix</div>
<div class="line">cmake --install . --prefix $HOME/local</div>
</div><!-- fragment --><p><b>Make:</b></p>
<div class="fragment"><div class="line"># Install to system directories</div>
<div class="line">sudo make install</div>
<div class="line"> </div>
<div class="line"># Install to custom prefix  </div>
<div class="line">make install PREFIX=$HOME/local</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md72"></a>
Package Manager Integration</h2>
<p><b>pkg-config Support:</b></p>
<div class="fragment"><div class="line"># After installation, use pkg-config</div>
<div class="line">pkg-config --cflags acp</div>
<div class="line">pkg-config --libs acp</div>
<div class="line"> </div>
<div class="line"># Compile with pkg-config</div>
<div class="line">gcc myapp.c $(pkg-config --cflags --libs acp) -o myapp</div>
</div><!-- fragment --><p><b>CMake Find Module:</b></p>
<div class="fragment"><div class="line"># In your CMakeLists.txt</div>
<div class="line">find_package(acp REQUIRED)</div>
<div class="line">target_link_libraries(myapp acp::static)</div>
<div class="line"># OR</div>
<div class="line">target_link_libraries(myapp acp::shared)</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md73"></a>
Integration</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md74"></a>
Using Static Library</h2>
<p><b>With pkg-config:</b></p>
<div class="fragment"><div class="line">gcc -std=c99 myapp.c $(pkg-config --cflags --libs acp) -o myapp</div>
</div><!-- fragment --><p><b>Manual linking:</b></p>
<div class="fragment"><div class="line">gcc -std=c99 -I/usr/local/include myapp.c -L/usr/local/lib -lacp -o myapp</div>
</div><!-- fragment --><p><b>CMake integration:</b></p>
<div class="fragment"><div class="line">find_package(acp REQUIRED)</div>
<div class="line">add_executable(myapp myapp.c)</div>
<div class="line">target_link_libraries(myapp acp::static)</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md75"></a>
Using Shared Library</h2>
<p><b>Runtime linking (Unix):</b></p>
<div class="fragment"><div class="line"># Ensure library is in system path or set LD_LIBRARY_PATH</div>
<div class="line">export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH</div>
<div class="line">./myapp</div>
</div><!-- fragment --><p><b>CMake integration:</b></p>
<div class="fragment"><div class="line">find_package(acp REQUIRED)</div>
<div class="line">add_executable(myapp myapp.c)</div>
<div class="line">target_link_libraries(myapp acp::shared)</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md76"></a>
Code Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="acp__protocol_8h.html">acp_protocol.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="acp__client_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="comment">// Initialize ACP</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="acp_8c.html#a6bf8ce444f991d26e3fdf142e1ccf4e5">acp_init</a>() != <a class="code hl_define" href="acp__errors_8h.html#a53b71d741ae3a1d091a8904ae1418124">ACP_OK</a>) {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Failed to initialize ACP\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Your ACP application code here</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Cleanup</span></div>
<div class="line">    <a class="code hl_function" href="acp_8c.html#a596b2bcebc93442d02d5ed4b2dd4d34d">acp_cleanup</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aacp_8c_html_a596b2bcebc93442d02d5ed4b2dd4d34d"><div class="ttname"><a href="acp_8c.html#a596b2bcebc93442d02d5ed4b2dd4d34d">acp_cleanup</a></div><div class="ttdeci">void acp_cleanup(void)</div><div class="ttdoc">Cleanup the ACP library.</div><div class="ttdef"><b>Definition</b> <a href="acp_8c_source.html#l00079">acp.c:79</a></div></div>
<div class="ttc" id="aacp_8c_html_a6bf8ce444f991d26e3fdf142e1ccf4e5"><div class="ttname"><a href="acp_8c.html#a6bf8ce444f991d26e3fdf142e1ccf4e5">acp_init</a></div><div class="ttdeci">acp_result_t acp_init(void)</div><div class="ttdoc">Initialize the ACP library.</div><div class="ttdef"><b>Definition</b> <a href="acp_8c_source.html#l00057">acp.c:57</a></div></div>
<div class="ttc" id="aacp__client_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="acp__client_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">Main example program.</div><div class="ttdef"><b>Definition</b> <a href="acp__client_8c_source.html#l00257">acp_client.c:257</a></div></div>
<div class="ttc" id="aacp__errors_8h_html_a53b71d741ae3a1d091a8904ae1418124"><div class="ttname"><a href="acp__errors_8h.html#a53b71d741ae3a1d091a8904ae1418124">ACP_OK</a></div><div class="ttdeci">#define ACP_OK</div><div class="ttdoc">Operation successful.</div><div class="ttdef"><b>Definition</b> <a href="acp__errors_8h_source.html#l00082">acp_errors.h:82</a></div></div>
<div class="ttc" id="aacp__protocol_8h_html"><div class="ttname"><a href="acp__protocol_8h.html">acp_protocol.h</a></div><div class="ttdoc">ACP (Autonomous Command Protocol) - Public API Header.</div></div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md77"></a>
Cross-Compilation</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md78"></a>
ARM Linux (aarch64)</h2>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cmake .. -DCMAKE_SYSTEM_NAME=Linux \</div>
<div class="line">         -DCMAKE_C_COMPILER=aarch64-linux-gnu-gcc \</div>
<div class="line">         -DCMAKE_BUILD_TYPE=Release</div>
<div class="line"> </div>
<div class="line"># Make  </div>
<div class="line">make CC=aarch64-linux-gnu-gcc</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md79"></a>
ARM Embedded (Cortex-M)</h2>
<div class="fragment"><div class="line"># CMake</div>
<div class="line">cmake .. -DCMAKE_SYSTEM_NAME=Generic \</div>
<div class="line">         -DCMAKE_C_COMPILER=arm-none-eabi-gcc \</div>
<div class="line">         -DACP_NO_HEAP=ON \</div>
<div class="line">         -DACP_BUILD_SHARED=OFF \</div>
<div class="line">         -DCMAKE_C_FLAGS=&quot;-mcpu=cortex-m4 -mthumb&quot;</div>
<div class="line"> </div>
<div class="line"># Make</div>
<div class="line">make CC=arm-none-eabi-gcc \</div>
<div class="line">     CFLAGS=&quot;-mcpu=cortex-m4 -mthumb -DACP_NO_HEAP=1&quot; \</div>
<div class="line">     static</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md80"></a>
Windows from Linux (MinGW)</h2>
<div class="fragment"><div class="line"># CMake  </div>
<div class="line">cmake .. -DCMAKE_SYSTEM_NAME=Windows \</div>
<div class="line">         -DCMAKE_C_COMPILER=x86_64-w64-mingw32-gcc \</div>
<div class="line">         -DCMAKE_BUILD_TYPE=Release</div>
<div class="line"> </div>
<div class="line"># Make</div>
<div class="line">make CC=x86_64-w64-mingw32-gcc</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md81"></a>
Troubleshooting</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md82"></a>
Common Build Issues</h2>
<p><b>1. Missing compiler features:</b></p>
<div class="fragment"><div class="line">Error: ACP requires C99 or later</div>
</div><!-- fragment --><p>Solution: Use <span class="tt">-std=c99</span> or newer compiler version.</p>
<p><b>2. Heap usage in no-heap build:</b></p>
<div class="fragment"><div class="line">Undefined reference to __wrap_malloc</div>
</div><!-- fragment --><p>Solution: Remove heap allocations or set <span class="tt">ACP_ENABLE_HEAP=ON</span>.</p>
<p><b>3. Missing dependencies:</b></p>
<div class="fragment"><div class="line">fatal error: &#39;acp_protocol.h&#39; file not found</div>
</div><!-- fragment --><p>Solution: Add include path with <span class="tt">-I</span> or install library properly.</p>
<p><b>4. Link errors with shared library:</b></p>
<div class="fragment"><div class="line">error while loading shared libraries: libacp.so.0</div>
</div><!-- fragment --><p>Solution: Set <span class="tt">LD_LIBRARY_PATH</span> or install to system directory.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md83"></a>
Platform-Specific Issues</h2>
<p><b>macOS: Code signing issues</b></p>
<div class="fragment"><div class="line"># Allow unsigned binaries in development</div>
<div class="line">codesign --remove-signature ./build/libacp.dylib</div>
</div><!-- fragment --><p><b>Windows: MSYS2 path issues</b></p>
<div class="fragment"><div class="line"># Use proper MSYS2 environment</div>
<div class="line">export PATH=&quot;/mingw64/bin:$PATH&quot;</div>
</div><!-- fragment --><p><b>Linux: Permission issues</b></p>
<div class="fragment"><div class="line"># Install to user directory instead</div>
<div class="line">cmake --install . --prefix $HOME/.local</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md84"></a>
Debug Builds</h2>
<p>Enable verbose output:</p>
<div class="fragment"><div class="line"># CMake verbose build</div>
<div class="line">cmake --build . --verbose</div>
<div class="line"> </div>
<div class="line"># Make verbose build  </div>
<div class="line">make V=1</div>
<div class="line"> </div>
<div class="line"># Run feature test for diagnostics</div>
<div class="line">./tests/acp_feature_test</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md85"></a>
Getting Help</h2>
<ol type="1">
<li>Check the <a href="https://github.com/pzanna/acp/issues">GitHub Issues</a></li>
<li>Run the feature validation: <span class="tt">./tests/acp_feature_test</span> <br  />
</li>
<li>Enable verbose builds for detailed error messages</li>
<li>Consult platform-specific documentation for your toolchain</li>
</ol>
<hr  />
<p>For more information, see:</p>
<ul>
<li><a class="el" href="md_docs_2acp__comm__spec__v0-3.html">Protocol Specification</a></li>
<li><a href="docs/">API Documentation</a> (generated with Doxygen)</li>
<li><a href="examples/">Example Applications</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
