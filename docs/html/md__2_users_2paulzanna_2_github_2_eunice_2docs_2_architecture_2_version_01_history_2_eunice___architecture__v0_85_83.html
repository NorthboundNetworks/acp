<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Eunice Architecture — v0.5.3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_version_01_history_2_eunice___architecture__v0_85_83.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Eunice Architecture — v0.5.3 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1211"></a></p>
<p><b>Title:</b> Auto‑screening (Title/Abstract) &amp; Full‑text Acquisition/Parsing <br  />
 <b>Status:</b> Planned <br  />
 <b>Date:</b> 11‑08‑2025 (Australia/Melbourne) <br  />
 <b>Depends on:</b> v0.5.2 (deterministic retrieval, dedup, ranking, screening queue, PRISMA) <br  />
</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1213"></a>
1) Objective</h1>
<p>Automate two critical steps toward a fully automated literature review:</p>
<ol type="1">
<li><b>Auto‑screening (title/abstract)</b> to decide include/exclude with calibrated thresholds. <br  />
</li>
<li><b>Full‑text acquisition &amp; parsing</b> for included records: locate legal OA copies, fetch PDFs/HTML, and parse into structured sections (GROBID → TEI, HTML fallback). <br  />
</li>
</ol>
<p>Human‑in‑the‑loop is not required for v0.5.3; decisions are machine‑made but fully auditable.</p>
<p><b>Out of scope (deferred to v0.5.4+):</b> extraction v2 (methods/results), critical appraisal, synthesis/meta‑analysis, UI.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1215"></a>
2) High‑level Flow</h1>
<p>Starting from a <b>v0.5.2 search run</b> and its <b>deduplicated, ranked records</b>:</p>
<p>1) <b>Auto‑screen (Title/Abstract):</b></p>
<ul>
<li>Classifier consumes {title, abstract, metadata, search_score}. <br  />
</li>
<li>Produces <span class="tt">decision ∈ {include, exclude}</span> + <span class="tt">confidence ∈ [0,1]</span> + rationale (short JSON). <br  />
</li>
<li>Thresholds are configurable; uncertain band treated <b>conservatively as include</b> to avoid false negatives.</li>
</ul>
<p>2) <b>Full‑text locate → fetch → parse</b> for included items only:</p>
<ul>
<li><b>Locate</b> candidate OA URLs via resolver chain (see §5). <br  />
</li>
<li><b>Fetch</b> respecting licence and robots/HTTP policies; store binary + checksum. <br  />
</li>
<li><b>Parse</b> via GROBID (PDF→TEI) or HTML parser fallback; persist structured sections and any tables found.</li>
</ul>
<p>3) <b>Metrics &amp; PRISMA</b> updated automatically. <br  />
</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1217"></a>
3) Scope (Detailed)</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1218"></a>
In scope</h2>
<ul>
<li>Auto‑screening worker using leased items from <span class="tt">literature_screening_queue</span> (stage=<span class="tt">title_abstract</span>).</li>
<li>Calibrated thresholds with evaluation on a labelled fixture set.</li>
<li>Full‑text locators: PubMed/PMC, Unpaywall (by DOI), OpenAlex (hosted locations), arXiv direct.</li>
<li>PDF/HTML fetcher with licence capture, SHA‑256, and content‑type sniffing.</li>
<li>GROBID client (containerised or configured URL) + HTML parser fallback.</li>
<li>Database migrations for full‑text and parsed sections.</li>
<li>Admin/API endpoints to trigger and monitor v0.5.3 pipeline.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1219"></a>
Out of scope</h2>
<ul>
<li>Non‑OA/paywalled acquisition; per‑publisher scraping. <br  />
</li>
<li>Advanced table normalisation and figure OCR (basic table capture allowed). <br  />
</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1221"></a>
4) Auto‑screening (Title/Abstract)</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1222"></a>
4.1 Model</h2>
<p>A deterministic <b>LLM+rules ensemble</b>:</p>
<ul>
<li><b>Feature pack:</b> title, abstract, year, venue, search_score, source_priority, keyword hits. <br  />
</li>
<li><b>Rules pre‑filter:</b> hard excludes (language not in allow‑list, publication types not allowed), hard includes (exact MeSH/keyword match lists), then LLM score ∈ [0,1]. <br  />
</li>
<li><b>Decision:</b><ul>
<li><span class="tt">include</span> if <span class="tt">score ≥ T_incl</span> <br  />
</li>
<li><span class="tt">exclude</span> if <span class="tt">score ≤ T_excl</span> <br  />
</li>
<li>otherwise <span class="tt">include</span> (uncertain band is conservatively included)</li>
</ul>
</li>
<li><b>Default thresholds:</b> <span class="tt">T_incl=0.72</span>, <span class="tt">T_excl=0.28</span> (configurable). <br  />
</li>
<li><b>Determinism:</b> pin model, prompts, and temperature; set decoding to greedy; log prompt hash.</li>
</ul>
<blockquote class="doxtable">
<p>Optional: accept a <span class="tt">level_profile</span> (Undergrad/Masters/PhD) to tighten/loosen thresholds; if omitted, defaults above are used. </p>
</blockquote>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1223"></a>
4.2 Queue Integration</h2>
<ul>
<li>A dedicated <b>auto‑screen worker</b> leases items from <span class="tt">literature_screening_queue</span> (stage=<span class="tt">title_abstract</span>). <br  />
</li>
<li>On decision, it writes to the existing screening decision path (same table as human decisions) with <span class="tt">actor='auto'</span>, <span class="tt">rationale</span> JSON, and confidence. <br  />
</li>
<li>Lease semantics: as per v0.5.2 (§7a) with TTL=90s, heartbeat every 30s.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1224"></a>
4.3 Rationale Schema (stored on decision)</h2>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;version&quot;: 1,</div>
<div class="line">  &quot;features&quot;: {</div>
<div class="line">    &quot;keywords_hit&quot;: [&quot;neuron&quot;, &quot;avian&quot;],</div>
<div class="line">    &quot;search_score&quot;: 0.83,</div>
<div class="line">    &quot;venue&quot;: &quot;J. Neurosci. Methods&quot;,</div>
<div class="line">    &quot;year&quot;: 2024</div>
<div class="line">  },</div>
<div class="line">  &quot;llm_score&quot;: 0.79,</div>
<div class="line">  &quot;rules&quot;: {&quot;language&quot;: &quot;en&quot;, &quot;type_allowed&quot;: true},</div>
<div class="line">  &quot;notes&quot;: &quot;Abstract explicitly states primary neuron culture protocol.&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md1225"></a>
4.4 Metrics</h2>
<ul>
<li><span class="tt">lit_autoscreen_total{decision}</span> <br  />
</li>
<li><span class="tt">lit_autoscreen_latency_ms_bucket</span> <br  />
</li>
<li><span class="tt">lit_autoscreen_confidence_histogram</span> <br  />
</li>
<li><b>Evaluation job</b> (on labelled fixtures): precision/recall/F1, ROC‑AUC; store confusion matrix in <span class="tt">lit_autoscreen_eval</span> table.</li>
</ul>
<p>All <span class="tt">lit_autoscreen_*</span> metrics include the label <span class="tt">{worker="autoscreen"}</span> for consistency with the platform metrics taxonomy.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1227"></a>
5) Full‑text Acquisition</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1228"></a>
5.1 Locator Chain (priority order)</h2>
<ol type="1">
<li><b>PubMed/PMC</b>: if PMID→PMCID/PMC link present → direct OA PDF/HTML. <br  />
</li>
<li><b>Unpaywall (via DOI)</b>: retrieve <span class="tt">best_oa_location</span> (respect licence). <br  />
</li>
<li><b>OpenAlex</b>: check <span class="tt">hosted_content</span> locations. <br  />
</li>
<li><b>arXiv</b>: for arXiv IDs, use canonical PDF endpoint. <br  />
</li>
<li><b>Fallback</b>: Crossref <span class="tt">link</span> array (if flagged OA). <br  />
</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1229"></a>
5.2 Fetch Rules</h2>
<ul>
<li>Only fetch when <span class="tt">licence ∈ {CC‑BY, CC‑BY‑SA, CC‑BY‑NC, CC0, public‑domain, arXiv, PMC‑OA}</span> (configurable allow‑list). <br  />
</li>
<li>HTTP: retry with backoff/jitter; max 10 MB per file by default (config). <br  />
</li>
<li>Persist: <span class="tt">{record_id, source_url, licence, mime, sha256, size_bytes, fetched_at}</span>; store binary path. <br  />
</li>
<li>Set HTTP <b>User-Agent</b> to a configurable value <span class="tt">Eunice-ResearchPlatform/0.5.3 (+&lt;contact_email&gt;)</span> and include an HTTP <b>From</b> header with <span class="tt">&lt;contact_email&gt;</span> when supported (for attribution and compliance). <br  />
</li>
<li>Honour <b>robots.txt</b> and site <b>Terms of Service</b>; skip fetching when disallowed and record the reason (<span class="tt">skipped_policy</span>). <br  />
</li>
<li>Persist attribution metadata (<span class="tt">user_agent</span>, <span class="tt">contact_email</span>) alongside the fetch record for audit/debugging.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1230"></a>
5.3 Parsing</h2>
<ul>
<li><b>PDF</b> → <b>GROBID</b> <span class="tt">processFulltextDocument</span> → TEI XML → extract sections (Title, Abstract, Introduction, Methods, Results, Discussion, Conclusion), references, and tables (if emitted). <br  />
</li>
<li><b>HTML</b> → DOM parser → similar sections by heading heuristics (h1–h6 patterns). <br  />
</li>
<li>Persist <span class="tt">parsed_sections</span> rows <span class="tt">{record_id, section, text, offsets}</span>; store <span class="tt">table_json</span> if available.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md1231"></a>
TEI → Section Mapping (deterministic)</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">TEI path (example)  </th><th class="markdownTableHeadNone">Stored section  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">teiHeader/fileDesc/titleStmt/title</span>  </td><td class="markdownTableBodyNone">title  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">abstract</span> (any)  </td><td class="markdownTableBodyNone">abstract  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">text/body/div[@type='introduction']</span>  </td><td class="markdownTableBodyNone">introduction  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">text/body/div[@type='materials']</span> or <span class="tt">...[@type='methods']</span>  </td><td class="markdownTableBodyNone">methods  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">text/body/div[@type='results']</span>  </td><td class="markdownTableBodyNone">results  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">text/body/div[@type='discussion']</span>  </td><td class="markdownTableBodyNone">discussion  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">text/back/div[@type='references']</span>  </td><td class="markdownTableBodyNone">references  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">otherwise (unmatched)  </td><td class="markdownTableBodyNone">other  </td></tr>
</table>
<blockquote class="doxtable">
<p>Note: The exact XPath may vary by TEI flavour; use configurable mappings with the above as defaults. </p>
</blockquote>
<h3 class="doxsection"><a class="anchor" id="autotoc_md1232"></a>
Security &amp; Hardening (HTML path)</h3>
<ul>
<li>Strip scripts/styles/iframes and external resources; parse with a safe, non-executing HTML parser.</li>
<li>Normalise Unicode (NFC) and collapse excessive whitespace.</li>
<li>Cap parse depth and total node count to mitigate parser bombs; enforce a maximum text size per section.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1233"></a>
5.4 Metrics</h2>
<ul>
<li><span class="tt">lit_fulltext_locate_total{result=found|not_found|skipped_licence}</span> <br  />
</li>
<li><span class="tt">lit_fulltext_fetch_total{result=success|failure}</span> <br  />
</li>
<li><span class="tt">lit_fulltext_parse_total{format=pdf|html,result=success|failure}</span> <br  />
</li>
<li>Average fetch size, parse time; GROBID health.</li>
</ul>
<p>All <span class="tt">lit_fulltext_*</span> metrics include the label <span class="tt">{worker="fulltext"}</span> for consistency with the platform metrics taxonomy.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1235"></a>
6) Data Model &amp; Migrations</h1>
<p>Add the following (names align with v0.5.2 tables):</p>
<ol type="1">
<li><b><span class="tt">literature_full_texts</span></b><ul>
<li><span class="tt">id uuid pk</span></li>
<li><span class="tt">record_id uuid fk -&gt; literature_records(id)</span></li>
<li><span class="tt">source_url text</span>, <span class="tt">licence text</span>, <span class="tt">mime text</span></li>
<li><span class="tt">sha256 char(64)</span>, <span class="tt">size_bytes int</span>, <span class="tt">storage_path text</span></li>
<li><span class="tt">fetched_at timestamptz</span></li>
<li>Indexes: <span class="tt">idx_fulltext_record_id</span>, <span class="tt">idx_fulltext_sha256</span></li>
</ul>
</li>
<li><b><span class="tt">literature_parsed_sections</span></b><ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">record_id uuid fk</span> <br  />
</li>
<li><span class="tt">section text</span> (enum‑like: title, abstract, introduction, methods, results, discussion, conclusion, references)</li>
<li><span class="tt">text text</span>, <span class="tt">offsets jsonb</span>, <span class="tt">table_json jsonb</span></li>
<li>Indexes: <span class="tt">idx_sections_record_id</span>, GIN on <span class="tt">(section)</span> and <span class="tt">(table_json)</span></li>
</ul>
</li>
<li><b><span class="tt">lit_autoscreen_eval</span></b> (optional; for offline evaluation results)<ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">created_at timestamptz</span>, <span class="tt">dataset text</span>, <span class="tt">metrics jsonb</span>, <span class="tt">confusion jsonb</span></li>
</ul>
</li>
</ol>
<blockquote class="doxtable">
<p>Update <span class="tt">literature_screening_decisions</span> to allow <span class="tt">actor ∈ {human, auto}</span> if not present already. </p>
</blockquote>
<p><b>Migrations:</b> provide forward and rollback scripts; data‑safe; default values nullable; no destructive changes to existing v0.5.2 tables.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1237"></a>
7) Services &amp; Tools</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1238"></a>
7.1 network‑service</h2>
<ul>
<li><b>Tools:</b><ul>
<li><span class="tt">full_text_locate(record_id)</span> → <span class="tt">{candidate_urls:[{url, licence, reason}], chosen}</span></li>
<li><span class="tt">full_text_fetch_parse(record_id, url)</span> → <span class="tt">{mime, sha256, sections_count, tables_count}</span></li>
</ul>
</li>
<li><b>Clients:</b> PMC, Unpaywall, OpenAlex, arXiv; GROBID; HTML parser. <br  />
</li>
<li><b>Config:</b> endpoints, timeouts, retry/backoff, size limit, licence allow‑list. <br  />
</li>
<li><b>Health &amp; Circuit Breaker:</b> ping the configured GROBID health endpoint (default <span class="tt">/api/isalive</span>) every 30s. Open a circuit after <b>5 consecutive failures</b> and cool down for <b>60s</b> before retrying. During open state, skip PDF parsing (fallback to HTML only) and emit a degraded metric.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1239"></a>
7.2 database‑service (MCP wrappers)</h2>
<ul>
<li><span class="tt">literature_queue_lease(stage, n, lease_owner)</span> (reuse)</li>
<li><span class="tt">literature_queue_decide(decisions[])</span> with <span class="tt">actor='auto'</span></li>
<li><span class="tt">full_text_upsert(record_id, meta)</span>; <span class="tt">parsed_sections_bulk_insert(record_id, sections[])</span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1240"></a>
7.3 api‑gateway (admin/operator endpoints)</h2>
<ul>
<li><span class="tt">POST /literature/auto-screen/start</span> (legacy: /v2/...) → start autoscreen worker for a run/topic. <br  />
</li>
<li><span class="tt">POST /literature/fulltext/fetch</span> (legacy: /v2/...) → trigger locate/fetch/parse for a run/topic (batch). <br  />
</li>
<li><span class="tt">GET  /literature/fulltext/status?run_id=...</span> (legacy: /v2/...) → progress metrics.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1241"></a>
7.4 research‑manager</h2>
<ul>
<li>Orchestrations to: 1) pull deduped records for run, <br  />
 2) drive autoscreen worker until queue empty, <br  />
 3) for included records, run locate→fetch→parse pipeline with concurrency and back‑pressure.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1243"></a>
8) Configuration (defaults)</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;autoscreen&quot;: {</div>
<div class="line">    &quot;model&quot;: &quot;&lt;pinned-llm-or-classifier&gt;&quot;,</div>
<div class="line">    &quot;prompt_version&quot;: &quot;1&quot;,</div>
<div class="line">    &quot;temperature&quot;: 0.0,</div>
<div class="line">    &quot;t_incl&quot;: 0.72,</div>
<div class="line">    &quot;t_excl&quot;: 0.28,</div>
<div class="line">    &quot;language_allow&quot;: [&quot;en&quot;],</div>
<div class="line">    &quot;type_allow&quot;: [&quot;journal-article&quot;,&quot;preprint&quot;,&quot;review&quot;]</div>
<div class="line">  },</div>
<div class="line">  &quot;fulltext&quot;: {</div>
<div class="line">    &quot;size_limit_mb&quot;: 10,</div>
<div class="line">    &quot;licence_allow&quot;: [&quot;CC-BY&quot;,&quot;CC-BY-SA&quot;,&quot;CC-BY-NC&quot;,&quot;CC0&quot;,&quot;public-domain&quot;,&quot;PMC-OA&quot;,&quot;arXiv&quot;],</div>
<div class="line">    &quot;user_agent&quot;: &quot;Eunice-ResearchPlatform/0.5.3 (+contact@example.com)&quot;,</div>
<div class="line">    &quot;contact_email&quot;: &quot;contact@example.com&quot;,</div>
<div class="line">    &quot;grobid&quot;: {&quot;url&quot;: &quot;http://grobid:8070&quot;, &quot;timeout_s&quot;: 60, &quot;health_endpoint&quot;: &quot;/api/isalive&quot;, &quot;circuit_breaker&quot;: {&quot;failures&quot;: 5, &quot;cooldown_s&quot;: 60}},</div>
<div class="line">    &quot;fetch&quot;: {&quot;connect_timeout_s&quot;: 10, &quot;read_timeout_s&quot;: 60, &quot;retries&quot;: 2}</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1245"></a>
9) SLOs (initial)</h1>
<ul>
<li>Autoscreen throughput: <b>≥ 120 docs/min</b> per worker on CPU. <br  />
</li>
<li>Locate+fetch success (eligible OA): <b>≥ 85%</b>. <br  />
</li>
<li>Parse success (of fetched): <b>≥ 95%</b>. <br  />
</li>
<li>End‑to‑end failure budget (locate→fetch→parse): <b>≤ 10%</b> (excluding non‑OA/blocked).</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1247"></a>
10) Definition of Done (DoD)</h1>
<ul>
<li>Autoscreen worker makes decisions for 100% of queued title/abstract items for a run, with metrics emitted. <br  />
</li>
<li>Decisions persisted with <span class="tt">actor='auto'</span>, confidence, and rationale JSON; PRISMA counts updated. <br  />
</li>
<li>Full‑text pipeline locates and fetches OA copies where available; parsed sections stored and queryable. <br  />
</li>
<li>Migrations merged; endpoints exposed; docs updated; unit and integration tests passing. <br  />
</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1249"></a>
11) Test Plan</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1250"></a>
Unit</h2>
<ul>
<li>Decision function with fixed seeds → deterministic outcomes for given inputs. <br  />
</li>
<li>Threshold logic (T_incl/T_excl) edge cases; rationale schema validation. <br  />
</li>
<li>GROBID client: TEI parser extracts expected sections from fixtures. <br  />
</li>
<li>HTML parser: heading heuristics and table capture on test pages.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1251"></a>
Integration</h2>
<ul>
<li>Run autoscreen against small labelled corpus; store evaluation metrics (precision/recall/F1). <br  />
</li>
<li>Full‑text resolve/fetch/parse on a mixed set (PMC, arXiv, Unpaywall) using tiny fixtures; verify <span class="tt">literature_full_texts</span> and <span class="tt">literature_parsed_sections</span> populated. <br  />
</li>
<li>Metrics counters increase as expected; PRISMA reflects automated includes/excludes.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1252"></a>
Non‑functional</h2>
<ul>
<li>Backoff/jitter honoured on HTTP 429/5xx; circuit breaker opens after N failures. <br  />
</li>
<li>Size limit respected; large files skipped with <span class="tt">skipped_size_limit</span> reason.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1254"></a>
12) Risks &amp; Mitigations</h1>
<ul>
<li><b>Licence ambiguity:</b> keep explicit allow‑list; store raw licence strings; skip unknown. <br  />
</li>
<li><b>Parser fragility:</b> dual path (GROBID + HTML); capture raw TEI/HTML for debugging. <br  />
</li>
<li><b>Classifier drift:</b> pin model; periodic eval job; store prompts/hashes. <br  />
</li>
<li><b>Throughput limits:</b> concurrency with bounded worker pool; back‑pressure when GROBID unhealthy.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1256"></a>
13) Rollout &amp; Backward Compatibility</h1>
<ul>
<li>Feature‑flag <span class="tt">autoscreen.enabled</span> and <span class="tt">fulltext.enabled</span>. <br  />
</li>
<li>Safe to deploy alongside v0.5.2; no behavioural change unless flags on. <br  />
</li>
<li>Rollback: disable flags; migrations are additive and do not drop columns/tables.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1258"></a>
14) Open Questions (track as issues)</h1>
<ul>
<li>Do we store full PDF/HTML binaries long‑term or rely on checksums + re‑fetch? <br  />
</li>
<li>Add per‑level profiles now or defer to v0.5.7 calibration? <br  />
</li>
<li>Centralised licence ontology vs. raw strings from sources. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
