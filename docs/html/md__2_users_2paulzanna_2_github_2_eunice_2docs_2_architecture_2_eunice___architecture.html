<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: ğŸ§  Eunice Research Platform Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_eunice___architecture.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ğŸ§  Eunice Research Platform Architecture </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md925"></a></p>
<p><b>Status</b>: Current Architecture (Post-MCP Implementation) <br  />
 <b>Version</b>: 0.6.4 <b>Last Updated</b>: August 10, 2025 <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md926"></a>
ğŸ“œ Overview</h1>
<p>Eunice is a fully standardized, modular, AI-driven research platform designed for systematic literature reviews, research planning, and academic project management. All services follow identical structure patterns with <b>successful MCP (Model Context Protocol) integration</b> for write operations and direct database access for read operations, ensuring optimal performance and data consistency.</p>
<p>The platform implements a hierarchical research structure: <b>Projects</b> â†’ <b>Research Topics</b> â†’ <b>Research Plans</b> â†’ <b>Tasks</b>, enabling structured and scalable research workflows.</p>
<p>Each functional component runs in its own <b>standardized Docker container</b> with multi-stage builds, comprehensive health monitoring, and security hardening.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md927"></a>
ğŸ¯ Recent Achievements (August 10, 2025)</h1>
<p>âœ… <b>MCP Database Integration</b> - Complete hybrid database access pattern implemented <br  />
 âœ… <b>All CRUD Operations Working</b> - Full Create, Read, Update, Delete functionality tested <br  />
 âœ… <b>Proper Read/Write Separation</b> - Native client for reads, MCP for writes <br  />
 âœ… <b>Statistics and Analytics</b> - Real-time completion rate calculations <br  />
 âœ… <b>Dynamic Field Updates</b> - Partial update support for all entities <br  />
 âœ… <b>Container Deployment</b> - All fixes deployed to Docker containers <br  />
 âœ… <b>End-to-End Testing</b> - Complete hierarchy testing (Projectsâ†’Topicsâ†’Plansâ†’Tasks) <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md928"></a>
ğŸ§± System Components</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md929"></a>
1. ğŸŒ API Gateway (FastAPI) - <b>âœ… OPERATIONAL</b></h2>
<p><b>Location</b>: <span class="tt">api-gateway/</span> <br  />
 <b>Structure</b>: Standardized with comprehensive health monitoring and <b>MCP integration</b> <br  />
</p>
<ul>
<li><b>Hierarchical API</b> with complete CRUD operations âœ…</li>
<li><b>Hybrid Database Access</b>:<ul>
<li>Direct database reads via native asyncpg client for <b>optimal performance</b> ğŸš€</li>
<li>MCP-routed writes via database service for <b>data consistency</b> ğŸ”’</li>
</ul>
</li>
<li><b>Authentication</b>: JWT integration with RBAC âœ…</li>
<li><b>Real-time Statistics</b>: Live completion rate calculations âœ…</li>
</ul>
<p><b>Key Features Implemented</b>:</p>
<ul>
<li>Dynamic field updates (only update provided fields)</li>
<li>Proper error handling and response parsing</li>
<li>Connection health monitoring</li>
<li>Graceful degradation when services unavailable</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md930"></a>
2. ğŸ–¥ï¸ Web Frontend (React + Vite)</h2>
<p><b>Location</b>: <span class="tt">frontend/</span> <br  />
 <b>Structure</b>: Modern React with shadcn/ui components <br  />
</p>
<ul>
<li>Type-safe API integration with the standardized backend</li>
<li>Real-time updates via WebSocket connections</li>
<li>Responsive design with consistent UI/UX patterns</li>
<li>Comprehensive error handling and loading states</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md931"></a>
3. ğŸ§  Research Manager</h2>
<p><b>Location</b>: <span class="tt">research-manager/</span> <br  />
 <b>Structure</b>: Fully standardized agent with prompt-driven logic <br  />
</p>
<ul>
<li>Coordinates complex research workflows</li>
<li>JSON-configured AI prompts for decision making</li>
<li>Multi-step research plan execution</li>
<li>Integration with Literature Agent for specialized tasks</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md932"></a>
4. ğŸ“¦ Database Service - <b>âœ… FULLY OPERATIONAL</b></h2>
<p><b>Location</b>: <span class="tt">database/</span> <br  />
 <b>Structure</b>: Standardized with <b>MCP-compatible tools</b> and validated schemas <br  />
</p>
<ul>
<li><b>MCP Server Integration</b>: HTTP endpoint at <span class="tt">/mcp/</span> for tool calling âœ…</li>
<li><b>Comprehensive Database Tools</b>: All CRUD operations for research entities âœ…</li>
<li><b>Dynamic Field Updates</b>: Partial updates support for efficient operations âœ…</li>
<li><b>Type-safe Operations</b>: Pydantic validation and parameterized queries âœ…</li>
<li><b>Hierarchical Data Management</b>: Proper referential integrity âœ…</li>
</ul>
<p><b>MCP Tool Surface (Consolidated)</b>:</p>
<ul>
<li>Primary metaâ€‘tools now exposed to agents:<ul>
<li><span class="tt">db.mutate</span> â€“ unified create/update/delete/upsert with optional batch + transaction + idempotency</li>
<li><span class="tt">db.query</span> â€“ unified read with filter / select / order / pagination (include relationships pending)</li>
</ul>
</li>
<li>Legacy granular tools (e.g. <span class="tt">create_project</span>, <span class="tt">update_research_plan</span>, etc.) remain temporarily as thin wrappers for backward compatibility and emit structured deprecation logs. They will be removed after the deprecation window.</li>
<li>JSON Schemas added under <span class="tt">database/schemas/</span> (<span class="tt">db.mutate.request.json</span>, <span class="tt">db.query.request.json</span>, perâ€‘resource schemas) to support validation and potential automated type generation.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md933"></a>
5. ğŸ” Network Service</h2>
<p><b>Location</b>: <span class="tt">network/</span> <br  />
 <b>Structure</b>: Standardized with external API integrations <br  />
</p>
<ul>
<li>Academic literature APIs (PubMed, Semantic Scholar, arXiv)</li>
<li>Web search capabilities with rate limiting</li>
<li>AI service integrations (OpenAI, Anthropic, HuggingFace)</li>
<li>Intelligent caching and error handling</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md934"></a>
6. ğŸ§  Memory Service</h2>
<p><b>Location</b>: <span class="tt">memory/</span> <br  />
 <b>Structure</b>: Standardized with context management <br  />
</p>
<ul>
<li>Persistent memory and context tracking</li>
<li>Agent state management across sessions</li>
<li>Conversation history with efficient retrieval</li>
<li>Memory lifecycle and optimization</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md935"></a>
7. ğŸ—„ Authentication Service</h2>
<p><b>Location</b>: <span class="tt">auth-service/</span> <br  />
 <b>Structure</b>: Standardized with security hardening <br  />
</p>
<ul>
<li>JWT token system with refresh tokens</li>
<li>RBAC implementation (Admin, Researcher, Collaborator)</li>
<li>TOTP-based 2FA support</li>
<li>Container security with non-root execution</li>
<li>Coordinates complex research workflows and task orchestration.</li>
<li>Implements:<ul>
<li>MCP client for service communication</li>
<li>Prompt selection and templating engine</li>
<li>Multi-step research plan execution</li>
</ul>
</li>
<li>Loads AI prompts from JSON configuration files.</li>
<li>Executes complex tool-chains via MCP (e.g. DB â†’ LLM â†’ Literature Search â†’ Analysis â†’ DB).</li>
<li>Manages research execution context and progress tracking.</li>
<li>Coordinates with Literature Agent for specialized literature tasks.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md936"></a>
8. ğŸ“¦ Database Service</h2>
<ul>
<li>MCP-compatible service that exposes <b>predefined database tools</b> for research data management:<ul>
<li><span class="tt">create_project</span>, <span class="tt">update_project</span>, <span class="tt">delete_project</span></li>
<li><span class="tt">create_research_topic</span>, <span class="tt">update_research_topic</span>, <span class="tt">delete_research_topic</span></li>
<li><span class="tt">create_research_plan</span>, <span class="tt">update_research_plan</span>, <span class="tt">delete_research_plan</span></li>
<li><span class="tt">create_task</span>, <span class="tt">update_task</span>, <span class="tt">delete_task</span></li>
<li><span class="tt">create_research_task</span>, <span class="tt">update_research_task</span>, <span class="tt">delete_research_task</span></li>
<li><span class="tt">create_literature_record</span>, <span class="tt">update_literature_record</span>, <span class="tt">delete_literature_record</span></li>
<li><span class="tt">create_search_term_optimization</span>, <span class="tt">update_search_term_optimization</span>, <span class="tt">delete_search_term_optimization</span></li>
</ul>
</li>
<li>Uses a secure PostgreSQL connection with connection pooling.</li>
<li>Supports only validated, parameterized queries for safety and reproducibility.</li>
<li>Implements comprehensive database schema for research workflows.</li>
<li>Handles hierarchical data relationships and referential integrity.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md937"></a>
9. ğŸ” Network Service</h2>
<ul>
<li>Provides web-accessible tools to MCP clients for external data access:<ul>
<li>Academic literature search (PubMed, Semantic Scholar, arXiv, CORE)</li>
<li>Web search capabilities (Google Custom Search, DuckDuckGo)</li>
<li>External API integrations (OpenAI, Anthropic, HuggingFace)</li>
<li>Research database connections (CrossRef, OpenAlex)</li>
</ul>
</li>
<li>Tools are exposed via function-style definitions with validated input schemas.</li>
<li>Implements rate limiting and error handling for external services.</li>
<li>Supports caching mechanisms for improved performance and reduced API costs.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md938"></a>
10. ğŸ§  Memory Service</h2>
<ul>
<li>Provides memory and context tracking for agents and sessions.</li>
<li>Stores conversation history, agent state, and contextual information.</li>
<li>Enables persistent memory across multiple interactions.</li>
<li>Integrates with MCP for agent memory management.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md939"></a>
11. ğŸ—„ Authentication Service</h2>
<ul>
<li>Manages user authentication and authorization.</li>
<li>Issues JWT tokens for API access.</li>
<li>Integrates with external identity providers (e.g. OAuth, SAML).</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md940"></a>
ğŸ³ Infrastructure Components</h1>
<p><b>All with standardized structure and security hardening</b></p>
<ul>
<li><b>ğŸŒ Nginx</b>: Load balancer and reverse proxy with SSL termination</li>
<li><b>ğŸ³ Docker Socket Proxy</b>: Security layer for controlled Docker API access <br  />
</li>
<li><b>ğŸ—„ PostgreSQL Database</b>: Hierarchical schema with optimized indexing</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md942"></a>
ğŸ—ï¸ Standardized Service Structure</h1>
<p>All services now follow this identical pattern:</p>
<div class="fragment"><div class="line">service/</div>
<div class="line">â”œâ”€â”€ src/                     # Python source code</div>
<div class="line">â”‚   â”œâ”€â”€ main.py             # FastAPI application entry</div>
<div class="line">â”‚   â”œâ”€â”€ config.py           # Pydantic configuration</div>
<div class="line">â”‚   â”œâ”€â”€ models.py           # Data models and schemas  </div>
<div class="line">â”‚   â”œâ”€â”€ health_check.py     # System monitoring</div>
<div class="line">â”‚   â””â”€â”€ utils.py            # Common utilities</div>
<div class="line">â”œâ”€â”€ config/                  # Configuration files</div>
<div class="line">â”‚   â”œâ”€â”€ config.json         # Service configuration</div>
<div class="line">â”‚   â””â”€â”€ logging.json        # Logging setup</div>
<div class="line">â”œâ”€â”€ tests/                   # Test suite</div>
<div class="line">â”‚   â”œâ”€â”€ conftest.py         # Test configuration</div>
<div class="line">â”‚   â””â”€â”€ test_*.py           # Comprehensive tests</div>
<div class="line">â”œâ”€â”€ logs/                    # Runtime logs</div>
<div class="line">â”œâ”€â”€ Dockerfile              # Multi-stage container build</div>
<div class="line">â”œâ”€â”€ requirements.txt         # Production dependencies</div>
<div class="line">â”œâ”€â”€ start.sh / start-dev.sh  # Startup scripts</div>
<div class="line">â””â”€â”€ .env.example            # Environment template</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md943"></a>
Key Standardization Features</h2>
<ol type="1">
<li><b>Type-Safe Configuration</b>: Pydantic models with environment variable support</li>
<li><b>Comprehensive Health Monitoring</b>: CPU, memory, disk, and service-specific checks</li>
<li><b>Complete Test Coverage</b>: pytest frameworks with fixtures and mocking</li>
<li><b>Security Hardening</b>: Multi-stage Docker builds with non-root execution</li>
<li><b>Structured Logging</b>: Configurable JSON logging with multiple handlers</li>
<li><b>Developer Experience</b>: Consistent startup, testing, and debugging patterns</li>
</ol>
<h1 class="doxsection"><a class="anchor" id="autotoc_md944"></a>
ğŸ”„ Data &amp; Message Flow - <b>MCP Implementation</b></h1>
<div class="fragment"><div class="line">flowchart TD</div>
<div class="line">    subgraph &quot;Frontend&quot;</div>
<div class="line">        UI[React + Vite UI&lt;br/&gt;shadcn/ui components]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;API Layer&quot;</div>
<div class="line">        GW[API Gateway&lt;br/&gt;Hybrid Database Access]</div>
<div class="line">        Auth[Auth Service&lt;br/&gt;Standardized Security]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Database Operations&quot;</div>
<div class="line">        Native[Native Database Client&lt;br/&gt;âš¡ Fast Reads]</div>
<div class="line">        MCP[MCP Database Client&lt;br/&gt;ğŸ”’ Consistent Writes]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Services&quot;</div>
<div class="line">        DBService[Database Service&lt;br/&gt;MCP Tools + HTTP Server]</div>
<div class="line">        NetService[Network Service&lt;br/&gt;External APIs]</div>
<div class="line">        MemService[Memory Service&lt;br/&gt;Context Management]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    subgraph &quot;Infrastructure&quot;</div>
<div class="line">        DB[(PostgreSQL&lt;br/&gt;research_tasks, projects,&lt;br/&gt;research_topics, research_plans)]</div>
<div class="line">        Nginx[Nginx&lt;br/&gt;Load Balancer]</div>
<div class="line">    end</div>
<div class="line"> </div>
<div class="line">    UI --&gt;|REST API| Nginx</div>
<div class="line">    Nginx --&gt;|Proxy| GW</div>
<div class="line">    GW --&gt;|Read Operations| Native</div>
<div class="line">    GW --&gt;|Write Operations| MCP</div>
<div class="line">    Auth --&gt;|JWT Validation| GW</div>
<div class="line">    Native --&gt;|Direct SQL| DB</div>
<div class="line">    MCP --&gt;|HTTP MCP Calls| DBService</div>
<div class="line">    DBService --&gt;|Validated Writes| DB</div>
<div class="line">    DBService --&gt;|MCP Tools| DB</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md945"></a>
Key Implementation Details âœ…</h2>
<ul>
<li><b>Read Operations</b>: Native asyncpg client â†’ Direct PostgreSQL connection (High Performance)</li>
<li><b>Write Operations</b>: MCP Client â†’ HTTP POST to <span class="tt">/mcp/</span> â†’ Database Service â†’ PostgreSQL (Data Integrity)</li>
<li><b>Table Consistency</b>: All operations target <span class="tt">research_tasks</span>, <span class="tt">research_topics</span>, <span class="tt">research_plans</span>, <span class="tt">projects</span> tables</li>
<li><b>Dynamic Updates</b>: Only provided fields are updated, others remain unchanged</li>
<li><b>Error Handling</b>: Graceful degradation and proper HTTP status codes</li>
<li><b>Health Monitoring</b>: Both database connections monitored independently</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md946"></a>
ğŸ§  Example: Task Status Update (MCP Implementation) âœ…</h1>
<p><b>Real Working Example from August 10, 2025 Testing</b>:</p>
<ol type="1">
<li><b>API Request</b>: <span class="tt">PUT /tasks/{task_id}</span> with <span class="tt">{"status": "completed"}</span></li>
<li><b>API Gateway</b> (Hybrid Access):<ul>
<li>Health check confirms service readiness âœ…</li>
<li>Pydantic validation ensures type safety âœ…</li>
<li>JWT authentication with RBAC check âœ…</li>
<li><b>Read</b>: Direct database query to verify task exists âš¡</li>
</ul>
</li>
<li><b>MCP Write Operation</b>:<ul>
<li>MCP client calls <span class="tt">update_research_task</span> tool âœ…</li>
<li>HTTP POST to <span class="tt"><a href="http://database-service:8004/mcp/">http://database-service:8004/mcp/</a></span> âœ…</li>
<li>Dynamic field update (only status field modified) âœ…</li>
</ul>
</li>
<li><b>Database Service</b> (MCP Tools):<ul>
<li>Validates input via Pydantic schemas âœ…</li>
<li>Executes parameterized UPDATE query safely âœ…</li>
<li>Returns success confirmation âœ…</li>
</ul>
</li>
<li><b>Response</b>: Updated task with new timestamp and status âœ…</li>
<li><b>Statistics Update</b>: Plan completion rate automatically recalculated âœ…</li>
</ol>
<p><b>Verified Results</b>:</p>
<ul>
<li>Database shows: <span class="tt">status = 'completed'</span>, <span class="tt">updated_at = '2025-08-09 14:49:51.304095'</span> âœ…</li>
<li>Statistics endpoint shows: <span class="tt">completed_tasks: 1</span>, <span class="tt">progress: 100.0</span> âœ…</li>
<li>Task list reflects changes immediately âœ…</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md947"></a>
ğŸ›¡ï¸ Security &amp; Quality Standards</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md948"></a>
Container Security (All Services)</h2>
<ul>
<li><b>Multi-stage builds</b> for minimal attack surface</li>
<li><b>Non-root execution</b> across all containers</li>
<li><b>Read-only filesystems</b> where applicable</li>
<li><b>Resource limits</b> and health monitoring</li>
<li><b>Secret management</b> via environment variables</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md949"></a>
Code Quality (All Services)</h2>
<ul>
<li><b>Type safety</b> with Pydantic models and mypy</li>
<li><b>Test coverage</b> &gt;80% across all modules</li>
<li><b>Linting and formatting</b> with black, flake8, isort</li>
<li><b>Security scanning</b> with bandit and safety</li>
<li><b>Documentation</b> with consistent patterns</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md950"></a>
Monitoring &amp; Observability (All Services)</h2>
<ul>
<li><b>Health endpoints</b> with system metrics</li>
<li><b>Structured logging</b> with JSON formatting <br  />
</li>
<li><b>Performance monitoring</b> with request tracking</li>
<li><b>Error handling</b> with graceful degradation</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md951"></a>
ğŸ“Š Benefits of Standardization</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md952"></a>
For Developers</h2>
<ul>
<li><b>Predictable Patterns</b>: Navigate any service intuitively</li>
<li><b>Reduced Learning Curve</b>: Same patterns across all components</li>
<li><b>Consistent Tooling</b>: Identical development and testing workflows</li>
<li><b>Clear Documentation</b>: Standardized structure and examples</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md953"></a>
For Operations</h2>
<ul>
<li><b>Uniform Deployment</b>: Same patterns for all services</li>
<li><b>Consistent Monitoring</b>: Identical health check and logging patterns</li>
<li><b>Easier Debugging</b>: Standard error handling and tracing</li>
<li><b>Simplified Scaling</b>: Predictable resource usage patterns</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md954"></a>
For Architecture</h2>
<ul>
<li><b>Maintainability</b>: Changes can be applied consistently</li>
<li><b>Extensibility</b>: New services follow established patterns</li>
<li><b>Quality Assurance</b>: Consistent testing and validation</li>
<li><b>Security</b>: Uniform security patterns and hardening</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md956"></a>
ğŸ“š Literature Agent (Planned)</h1>
<p>Planned multiâ€‘source retrieval &amp; evidence extraction (query expansion, semantic reâ€‘ranking, structured extraction, PRISMA metrics) will integrate postâ€‘0.6.4 and is tracked on the roadmap.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md958"></a>
ğŸ“š Documentation References</h1>
<ul>
<li><b><a class="el" href="md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_function___map.html">Function Map</a></b> â€“ API reference</li>
<li><b><a class="el" href="md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_roadmap.html">Development Roadmap</a></b> â€“ Future development plans</li>
<li><b>MCP Design</b> â€“ Hybrid access &amp; tool surface</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md960"></a>
ğŸ† MCP Implementation Achievements</h1>
<ul>
<li>âœ… <b>Hybrid Database Pattern</b>: Native reads + MCP writes for optimal performance</li>
<li>âœ… <b>Complete CRUD Operations</b>: All Create, Read, Update, Delete operations working</li>
<li>âœ… <b>Dynamic Field Updates</b>: Efficient partial updates for all entities <br  />
</li>
<li>âœ… <b>Real-time Statistics</b>: Live completion rate calculations</li>
<li>âœ… <b>Container Deployment</b>: All services containerized and operational</li>
<li>âœ… <b>End-to-End Testing</b>: Full hierarchy validation completed</li>
<li>âœ… <b>Production Ready</b>: Error handling, health monitoring, and graceful degradation</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md961"></a>
ğŸ”„ Additional API Workflows</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md962"></a>
Literature Record Management</h2>
<ul>
<li>Create, update, delete academic papers and publications</li>
<li>Store bibliographic metadata, abstracts, and categorizations <br  />
</li>
<li>Support DOI resolution and citation tracking</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md963"></a>
Research Execution Tracking</h2>
<ul>
<li>Initiate research tasks with specified depth levels</li>
<li>Monitor execution progress through multiple stages</li>
<li>Provide real-time status updates and completion metrics</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md964"></a>
Statistics and Analytics</h2>
<ul>
<li>Project-level aggregated statistics across all topics and plans</li>
<li>Topic-level metrics including plan counts and cost analysis</li>
<li>Plan-level progress tracking with task completion rates</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md966"></a>
ğŸ“ Prompts (JSON-based)</h1>
<p>Each AI prompt is a comprehensive JSON configuration file with complete AI model settings, e.g.:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;id&quot;: &quot;create_research_plan&quot;,</div>
<div class="line">  &quot;description&quot;: &quot;Generate a detailed research plan from a query and scope using a structured JSON format&quot;,</div>
<div class="line">  &quot;agent_type&quot;: &quot;ai_service&quot;,</div>
<div class="line">  &quot;model&quot;: &quot;grok-3-mini&quot;,</div>
<div class="line">  &quot;system_prompt&quot;: &quot;You are a research planning assistant. Provide detailed, structured responses in JSON format.&quot;,</div>
<div class="line">  &quot;user_prompt_template&quot;: &quot;Please create a comprehensive research plan for the following query:\n\nQuery: {query}\nScope: {scope}\nContext: {context_json}\n\n[Detailed template with specific output format requirements]&quot;,</div>
<div class="line">  &quot;tools&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;type&quot;: &quot;function&quot;,</div>
<div class="line">      &quot;function&quot;: {</div>
<div class="line">        &quot;name&quot;: &quot;google_search&quot;,</div>
<div class="line">        &quot;description&quot;: &quot;Search the web using Google Custom Search to find recent research&quot;,</div>
<div class="line">        &quot;parameters&quot;: {</div>
<div class="line">          &quot;type&quot;: &quot;object&quot;,</div>
<div class="line">          &quot;properties&quot;: {</div>
<div class="line">            &quot;query&quot;: {&quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;The search query&quot;},</div>
<div class="line">            &quot;num_results&quot;: {&quot;type&quot;: &quot;integer&quot;, &quot;default&quot;: 10, &quot;maximum&quot;: 10}</div>
<div class="line">          },</div>
<div class="line">          &quot;required&quot;: [&quot;query&quot;]</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;tool_choice&quot;: &quot;auto&quot;,</div>
<div class="line">  &quot;max_tokens&quot;: 3000,</div>
<div class="line">  &quot;temperature&quot;: 0.6,</div>
<div class="line">  &quot;created_at&quot;: &quot;2025-08-08T12:00:00Z&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Prompt configurations include:</p>
<ul>
<li>Complete AI model parameters (temperature, max_tokens, tool_choice)</li>
<li>Structured output format requirements</li>
<li>Tool definitions with JSON schemas</li>
<li>Template variables for dynamic content injection</li>
<li>Metadata for versioning and tracking</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md968"></a>
ğŸ§° Tools</h1>
<p>Tools are registered functions callable via MCP, implementing the complete research workflow. Each tool has:</p>
<ul>
<li>A unique name (e.g. <span class="tt">create_research_plan</span>, <span class="tt">google_search</span>, <span class="tt">get_literature_records</span>)</li>
<li>JSON Schema for input validation and type safety</li>
<li>Execution logic in the owning service (Database, Network, Memory)</li>
<li>Error handling and result formatting</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md969"></a>
Database Tools</h2>
<ul>
<li>Consolidated metaâ€‘tools: <span class="tt">db.mutate</span>, <span class="tt">db.query</span> (see above)</li>
<li>Legacy CRUD wrappers still callable but deprecated (log event: <span class="tt">tool.deprecated</span>)</li>
<li>Idempotency caching (TTL + bounded size) ensures safe retry of writes</li>
<li>Transactional batch mutations supported (<span class="tt">options.tx=true</span>)</li>
<li>Planned enhancement: relationship <span class="tt">include</span> expansion in <span class="tt">db.query</span> (currently placeholder returning empty arrays + warning)</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md970"></a>
Network Tools</h2>
<ul>
<li>Academic literature search across multiple databases</li>
<li>Web search for general research context</li>
<li>External API integrations for AI models and data sources</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md971"></a>
Memory Tools</h2>
<ul>
<li>Context tracking across research sessions</li>
<li>Agent state management and persistence</li>
<li>Historical interaction logging</li>
</ul>
<p>Tools may be stateful (e.g. DB writes, memory updates) or stateless (e.g. web search, calculations).</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md973"></a>
ğŸ³ Docker Containers</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Container  </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">database-service</span>  </td><td class="markdownTableBodyNone">PostgreSQL database service with schema management  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">api-gateway</span>  </td><td class="markdownTableBodyNone">FastAPI REST API + MCP client + Hierarchical API  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">research-manager</span>  </td><td class="markdownTableBodyNone">Research orchestrator agent with prompt logic  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">literature</span>  </td><td class="markdownTableBodyNone">Specialized literature review and analysis agent  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">database-service</span>  </td><td class="markdownTableBodyNone">Database access tools via MCP with research schema  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">network-service</span>  </td><td class="markdownTableBodyNone">Web/API tools for literature search and AI models  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">memory-service</span>  </td><td class="markdownTableBodyNone">Context tracking and agent state management  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">auth-service</span>  </td><td class="markdownTableBodyNone">JWT authentication and user management  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">docker-socket-proxy</span>  </td><td class="markdownTableBodyNone">Secure Docker API access layer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">nginx</span>  </td><td class="markdownTableBodyNone">Load balancer and reverse proxy (production)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="tt">postgres</span>  </td><td class="markdownTableBodyNone">PostgreSQL database with research data schema  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="tt">frontend</span>  </td><td class="markdownTableBodyNone">React + Vite frontend with shadcn/ui components  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md975"></a>
ğŸ” Security Considerations</h1>
<ul>
<li><b>Database Security</b>: All DB writes go through validated, predefined tools with parameterized queries (no raw SQL injection possible)</li>
<li><b>API Security</b>: JWT authentication implemented at API Gateway level with user session management</li>
<li><b>Container Isolation</b>: Each service runs in isolated Docker containers with minimal attack surface</li>
<li><b>Secret Management</b>: External API keys stored securely via <span class="tt">.env</span> files or Docker secret volumes</li>
<li><b>Network Security</b>: Docker Socket Proxy provides controlled access to Docker daemon</li>
<li><b>Input Validation</b>: All API inputs validated against JSON schemas before processing</li>
<li><b>MCP Security</b>: Message validation and agent authentication through MCP protocol</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md977"></a>
ğŸ”„ Extensibility &amp; Development</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md978"></a>
Adding New Features</h2>
<ol type="1">
<li><b>Define Data Model</b>: Add new entities to hierarchical data models if needed</li>
<li><b>Create Database Tools</b>: Implement CRUD operations in Database Service</li>
<li><b>Design API Endpoints</b>: Add REST endpoints to API Gateway V2 router</li>
<li><b>Configure AI Prompts</b>: Create JSON prompt configurations for AI-driven features</li>
<li><b>Update Frontend</b>: Add UI components using shadcn/ui library</li>
<li><b>Register Tools</b>: Expose new capabilities via MCP tool registration</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md979"></a>
Development Workflow</h2>
<ul>
<li><b>Local Development</b>: Use <span class="tt">start_dev.sh</span> for development environment with hot reload</li>
<li><b>Container Management</b>: Individual services can be developed and tested in isolation</li>
<li><b>Database Migrations</b>: Schema changes managed through Database Service initialization</li>
<li><b>Prompt Engineering</b>: JSON-based prompt configurations enable rapid AI behavior iteration</li>
<li><b>Testing</b>: Each service includes health checks and validation endpoints</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md980"></a>
No Controller/Business Logic Changes Required</h2>
<ul>
<li>New research workflows implemented through prompt engineering</li>
<li>Database operations use existing tool patterns</li>
<li>UI updates leverage existing component architecture</li>
<li>Agent coordination handled through MCP message passing </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
