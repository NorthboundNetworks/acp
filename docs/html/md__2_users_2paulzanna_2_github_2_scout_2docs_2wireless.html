<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: ESP-FC Wireless functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_scout_2docs_2wireless.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ESP-FC Wireless functions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md8431"></a></p>
<p>Espressif modules have a built-in WiFi module that can be used for configuration and control.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8432"></a>
WiFi configuration</h1>
<dl class="section note"><dt>Note</dt><dd>To be able to configure device using WiFi connection, you need to enable <span class="tt">SOFTSERIAL</span> function. WiFi function can only be used to configure device. Whilst WiFi is active, it is not possible to ARM controller and reboot is required.</dd></dl>
<p><img src="/docs/images/espfc_wifi_ap_enable.png" alt="Enable WiFi" class="inline"/></p>
<p>WiFi will start its own Access-Point if board will not detect receiver signal for at least 30 seconds (stay in failsafe mode since boot). Name of this AP is <span class="tt">ESP-FC</span> and it is open network. If you connect to this AP, then choose <span class="tt">Manual Selection</span> and type <span class="tt">tcp://192.168.4.1:1111</span></p>
<p><img src="/docs/images/espfc_wifi_ap_connect.png" alt="Connect to ESP-FC AP" class="inline"/></p>
<p>You can also automatically connect ESP-FC to your home network. To achive that, go to the CLI tab, and enter your network name and secret. </p><div class="fragment"><div class="line">set wifi_ssid MY-HOME-NET</div>
<div class="line">set wifi_pass MY-HOME-PASS</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Network name and pass must not contains spaces.</dd></dl>
<p>then you can check status of connection by typing <span class="tt">wifi</span> in CLI tab. </p><div class="fragment"><div class="line">wifi </div>
<div class="line">ST IP4: tcp://0.0.0.0:1111</div>
<div class="line">ST MAC: 30:30:F9:6E:10:74</div>
<div class="line">AP IP4: tcp://192.168.4.1:1111</div>
<div class="line">AP MAC: 32:30:F9:6E:10:74</div>
</div><!-- fragment --><p> In this mode you need to discover IP address granted by DHCP. In line <span class="tt">ST IP4</span> is the address that you need to use in configurator. If there is <span class="tt">0.0.0.0</span>, that means that FC was not able to connect to home network.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md8433"></a>
ESP-NOW control</h1>
<p>ESP-NOW is a proprietary wireless communication protocol defined by Espressif, which enables the direct, quick and low-power control of smart devices, without the need of a router.</p>
<p>As there are no real transmitters usng this protocol on the market, you have to build your own transmitting module first. If you alredy own RC transmitter with JR bay, you can use another ESP32 module. In this case follow <a href="https://github.com/rtlopez/espnow-rclink-tx">espnow-rclink-tx</a> instructions.</p>
<p>In ESP-FC you have to choose <span class="tt">SPI Rx (e.g. built-in Rx)</span> as Receiver mode in Receiver tab.</p>
<p><img src="/docs/images/espfc_receiver.png" alt="ESP-FC ESP-NOW Reciever" class="inline"/></p>
<p>Transmitter and receiver binds automatically after power up, you don't need to do anything. Recomended startup procedure is:</p><ol type="1">
<li>turn on transmitter first</li>
<li>next power up receiver/flight controller </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
