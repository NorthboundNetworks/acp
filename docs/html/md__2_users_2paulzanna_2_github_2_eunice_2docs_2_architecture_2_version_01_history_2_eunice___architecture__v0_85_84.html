<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: Eunice Architecture — v0.5.4</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('md__2_users_2paulzanna_2_github_2_eunice_2docs_2_architecture_2_version_01_history_2_eunice___architecture__v0_85_84.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Eunice Architecture — v0.5.4 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1259"></a></p>
<p><b>Title:</b> Evidence Extraction v2 (Methods &amp; Results) <br  />
 <b>Status:</b> Implemented <br  />
 <b>Date:</b> 12‑08‑2025 (Australia/Melbourne) <br  />
 <b>Depends on:</b> v0.5.2 (deterministic retrieval, dedup, ranking, screening queue, PRISMA), v0.5.3 (auto‑screening, full‑text acquisition &amp; parsing)</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1261"></a>
1) Objective</h1>
<p>Extract structured, citation‑anchored evidence from parsed full texts (and abstracts when full text is unavailable) to enable downstream appraisal and synthesis. The extractor must:</p>
<ul>
<li>Capture <b>study characteristics</b> (design, species/cell line, sample sizes, interventions/comparators, outcomes, assay methods).</li>
<li>Capture <b>numeric results</b> with units and statistics (means/SD, medians/IQR, CI, p‑values), including simple group contrasts where available.</li>
<li><b>Anchor</b> every claim to one or more exact text spans/tables with offsets and checksums (“no cite, no claim”).</li>
<li>Perform <b>unit normalisation</b> to SI where unambiguous, preserving the original.</li>
<li>Emit confidence and validation status, with a single automated <b>repair</b> attempt on schema violations.</li>
</ul>
<p>Out of scope: critical appraisal scores (v0.5.5), claim graph &amp; quantitative synthesis (v0.5.6), UI.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1263"></a>
2) High‑level Flow</h1>
<p>For each <b>included</b> record (from v0.5.3 auto‑screen):</p>
<p>1) Load <b>parsed sections</b> and tables from <span class="tt">literature_parsed_sections</span>. <br  />
 2) Run <b>extraction pipeline</b> (rules → LLM schema fill → validation → repair). <br  />
 3) Run <b>unit normalisation &amp; coherence checks</b>. <br  />
 4) Persist <b>extractions_v2</b> rows and <b>extraction_spans</b> (per cited span). <br  />
 5) Update metrics and PRISMA (extracted count).</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1265"></a>
3) Scope (Detailed)</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1266"></a>
In scope</h2>
<ul>
<li>JSON <b>schema v2</b> (below) for study characteristics and results.</li>
<li>Section &amp; table <b>selectors</b> with deterministic heuristics and TEI mapping.</li>
<li>LLM‑assisted, schema‑constrained extraction with pinned model, greedy decode, temperature 0.0, and prompt hashing.</li>
<li><b>Span anchoring</b> with <span class="tt">{section, start, end, sha256, quote_window}</span> for each fact.</li>
<li><b>Unit normalisation</b> (SI) and numeric integrity checks (non‑negative counts, plausible ranges, internal arithmetic checks where possible).</li>
<li>Database migrations, tools/endpoints, metrics, tests.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1267"></a>
Out of scope</h2>
<ul>
<li>OCR for figures; advanced table reconstruction beyond cell text. <br  />
</li>
<li>Complex effect size computation across heterogeneous designs (v0.5.6). <br  />
</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1269"></a>
4) Extraction Model</h1>
<p>A staged, deterministic pipeline:</p>
<p>1) <b>Selectors (rules):</b> choose candidate passages/tables from relevant sections (methods, results, tables, abstract). <br  />
 2) <b>LLM schema fill:</b> prompt with selected text chunks (size‑bounded), require JSON output exactly matching schema v2. <br  />
 3) <b>Validation:</b> strict JSON Schema validation; numeric/type checks; allowed enums. <br  />
 4) <b>Repair pass (single):</b> provide validator error messages and last output back to the model; re‑validate. <br  />
 5) <b>Confidence:</b> model‑reported confidence ∈ [0,1] combined with structural signals (table present, ranges consistent) into a composite.</p>
<p>Determinism: pinned model + tokenizer; greedy decoding; prompt version pinned and hashed; chunking rules deterministic.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1271"></a>
5) Schema v2 (JSON)</h1>
<p>Top‑level object <b>ExtractionV2</b> stored per record. Arrays may be empty if information absent.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;schema_version&quot;: 2,</div>
<div class="line">  &quot;study_characteristics&quot;: {</div>
<div class="line">    &quot;design&quot;: &quot;in_vitro|in_vivo|ex_vivo|clinical|other&quot;,</div>
<div class="line">    &quot;model&quot;: {&quot;species&quot;: &quot;chicken|human|mouse|...&quot;, &quot;cell_line&quot;: &quot;string|null&quot;, &quot;organ&quot;: &quot;brain|cortex|...&quot;},</div>
<div class="line">    &quot;sample&quot;: {&quot;groups&quot;: [{&quot;name&quot;: &quot;Control&quot;, &quot;n&quot;: 12}, {&quot;name&quot;: &quot;Treatment A&quot;, &quot;n&quot;: 12}]},</div>
<div class="line">    &quot;interventions&quot;: [{&quot;name&quot;: &quot;BDNF&quot;, &quot;dose&quot;: {&quot;value&quot;: 50, &quot;unit&quot;: &quot;ng/mL&quot;}, &quot;timing&quot;: &quot;DIV 0-7&quot;}],</div>
<div class="line">    &quot;comparators&quot;: [&quot;untreated&quot;, &quot;vehicle&quot;],</div>
<div class="line">    &quot;assays&quot;: [&quot;MEA&quot;, &quot;immunostaining&quot;, &quot;qPCR&quot;],</div>
<div class="line">    &quot;outcomes&quot;: [&quot;viability&quot;, &quot;spike_rate&quot;, &quot;neurite_length&quot;]</div>
<div class="line">  },</div>
<div class="line">  &quot;results&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;outcome&quot;: &quot;spike_rate&quot;,</div>
<div class="line">      &quot;measure&quot;: {&quot;type&quot;: &quot;mean_sd|median_iqr|proportion|odds_ratio|other&quot;, &quot;unit&quot;: &quot;Hz&quot;},</div>
<div class="line">      &quot;groups&quot;: [</div>
<div class="line">        {&quot;name&quot;: &quot;Control&quot;, &quot;value&quot;: 1.2, &quot;sd&quot;: 0.3},</div>
<div class="line">        {&quot;name&quot;: &quot;BDNF&quot;, &quot;value&quot;: 3.4, &quot;sd&quot;: 0.8}</div>
<div class="line">      ],</div>
<div class="line">      &quot;contrast&quot;: {&quot;type&quot;: &quot;difference|ratio|effect_size|p_value|ci&quot;, &quot;value&quot;: 2.2, &quot;ci&quot;: {&quot;low&quot;: 1.5, &quot;high&quot;: 2.9}, &quot;p&quot;: 0.004},</div>
<div class="line">      &quot;n_total&quot;: 24,</div>
<div class="line">      &quot;timepoint&quot;: &quot;DIV 7&quot;,</div>
<div class="line">      &quot;notes&quot;: &quot;&quot;,</div>
<div class="line">      &quot;spans&quot;: [</div>
<div class="line">        {&quot;section&quot;: &quot;results&quot;, &quot;start&quot;: 10543, &quot;end&quot;: 10592, &quot;sha256&quot;: &quot;&lt;64hex&gt;&quot;, &quot;quote&quot;: &quot;BDNF increased spike rate to 3.4±0.8 Hz ...&quot;},</div>
<div class="line">        {&quot;section&quot;: &quot;table&quot;,   &quot;start&quot;: 201,   &quot;end&quot;: 275,   &quot;sha256&quot;: &quot;&lt;64hex&gt;&quot;, &quot;quote&quot;: &quot;Table 2: Mean spike rate (Hz) ...&quot;}</div>
<div class="line">      ],</div>
<div class="line">      &quot;confidence&quot;: 0.78</div>
<div class="line">    }</div>
<div class="line">  ],</div>
<div class="line">  &quot;limitations&quot;: [&quot;small sample&quot;, &quot;no randomisation&quot;],</div>
<div class="line">  &quot;funding&quot;: {&quot;reported&quot;: true, &quot;statement&quot;: &quot;...&quot;, &quot;spans&quot;: []},</div>
<div class="line">  &quot;ethics&quot;: {&quot;reported&quot;: false},</div>
<div class="line">  &quot;provenance&quot;: {&quot;prompt_version&quot;: &quot;1&quot;, &quot;model&quot;: &quot;&lt;pinned&gt;&quot;, &quot;prompt_hash&quot;: &quot;&lt;sha256&gt;&quot;},</div>
<div class="line">  &quot;validation&quot;: {&quot;status&quot;: &quot;valid|repaired|invalid&quot;, &quot;errors&quot;: []}</div>
<div class="line">}</div>
</div><!-- fragment --><p>Notes:</p>
<ul>
<li>All numeric fields are floats or integers; <span class="tt">NaN</span> not permitted. <br  />
</li>
<li>Units are free‑text but normalised in a sibling <span class="tt">normalisations</span> block (see §6). <br  />
</li>
<li><span class="tt">spans</span> must reference either a TEI section name or <span class="tt">table</span> with a table‑local offset; <span class="tt">sha256</span> is of the <span class="tt">quote</span> text.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1273"></a>
6) Unit Normalisation &amp; Coherence</h1>
<ul>
<li>Maintain a library of canonical SI units and conversions (e.g., ng/mL → µg/L). <br  />
</li>
<li>For each measurable field, emit a <span class="tt">normalisations</span> entry:</li>
</ul>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;normalisations&quot;: [</div>
<div class="line">    {&quot;path&quot;: &quot;results[0].measure.unit&quot;, &quot;from&quot;: &quot;Hz&quot;, &quot;to&quot;: &quot;s^-1&quot;, &quot;factor&quot;: 1.0},</div>
<div class="line">    {&quot;path&quot;: &quot;study_characteristics.interventions[0].dose&quot;, &quot;from&quot;: &quot;ng/mL&quot;, &quot;to&quot;: &quot;µg/L&quot;, &quot;factor&quot;: 1.0}</div>
<div class="line">  ],</div>
<div class="line">  &quot;checks&quot;: [</div>
<div class="line">    {&quot;type&quot;: &quot;non_negative&quot;, &quot;path&quot;: &quot;results[0].groups[0].value&quot;, &quot;ok&quot;: true},</div>
<div class="line">    {&quot;type&quot;: &quot;sum_n&quot;, &quot;path&quot;: &quot;results[0].n_total&quot;, &quot;expected&quot;: 24, &quot;actual&quot;: 24, &quot;ok&quot;: true}</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li>Range checks: counts ≥ 0; probabilities in [0,1]; p‑values in (0,1]. <br  />
</li>
<li>Arithmetic checks: e.g., if CI and SE provided, ensure consistency. <br  />
</li>
<li>On failure, mark <span class="tt">validation.status = "invalid"</span> and include an error; do not drop the record.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1275"></a>
7) Data Model &amp; Migrations</h1>
<p>Additive migrations only.</p>
<ol type="1">
<li><b><span class="tt">extractions_v2</span></b><ul>
<li><span class="tt">id uuid pk</span></li>
<li><span class="tt">record_id uuid fk -&gt; literature_records(id)</span></li>
<li><span class="tt">schema_version smallint</span> (default 2)</li>
<li><span class="tt">payload jsonb</span> (the full ExtractionV2 object)</li>
<li><span class="tt">confidence numeric</span> (0..1)</li>
<li><span class="tt">validation_status text</span> (valid|repaired|invalid)</li>
<li><span class="tt">created_at timestamptz</span>, <span class="tt">updated_at timestamptz</span></li>
<li>Indexes: <span class="tt">idx_ext2_record_id</span>, GIN on <span class="tt">(payload)</span> for key queries</li>
</ul>
</li>
<li><b><span class="tt">extraction_spans</span></b><ul>
<li><span class="tt">id uuid pk</span>, <span class="tt">extraction_id uuid fk -&gt; extractions_v2(id)</span>, <span class="tt">record_id uuid fk</span></li>
<li><span class="tt">section text</span>, <span class="tt">start int</span>, <span class="tt">end int</span>, <span class="tt">sha256 char(64)</span>, <span class="tt">quote text</span>, <span class="tt">field_path text</span></li>
<li>Indexes: <span class="tt">idx_extspans_record_id</span>, <span class="tt">idx_extspans_extraction_id</span></li>
</ul>
</li>
<li><b>Small alteration</b> (if needed): allow <span class="tt">section='table'</span> in <span class="tt">literature_parsed_sections.section</span> enum or store table spans independently.</li>
</ol>
<p>Rollback scripts must drop new tables only; no destructive changes to existing.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1277"></a>
8) Services &amp; Tools</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1278"></a>
8.1 database‑service (MCP wrappers)</h2>
<ul>
<li><span class="tt">extraction_v2_start(run_id|record_ids[])</span> → queue extraction jobs. <br  />
</li>
<li><span class="tt">extraction_v2_upsert(record_id, payload)</span> → writes to <span class="tt">extractions_v2</span> + <span class="tt">extraction_spans</span>. <br  />
</li>
<li><span class="tt">extraction_v2_get(record_id)</span> → returns latest payload. <br  />
</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1279"></a>
8.2 network‑service / extractors</h2>
<ul>
<li>Deterministic chunker over <span class="tt">parsed_sections</span> (priority: results → methods → tables → abstract). <br  />
</li>
<li>LLM client pinned to model+prompt; greedy decode; timeouts; retries. <br  />
</li>
<li>Unit normaliser library. <br  />
</li>
<li>Validators (JSON Schema + numeric checks). <br  />
</li>
<li>Metrics emission.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1280"></a>
8.3 api‑gateway</h2>
<ul>
<li><span class="tt">POST /literature/extraction/start</span> (legacy: /v2/...) → by <span class="tt">run_id</span> or explicit <span class="tt">record_ids</span>. <br  />
</li>
<li><span class="tt">GET  /literature/extraction/{record_id}</span> (legacy: /v2/...) → latest ExtractionV2. <br  />
</li>
<li><span class="tt">GET  /literature/extraction/status?run_id=...</span> (legacy: /v2/...) → counts and failure reasons. <br  />
</li>
</ul>
<p>Notes: Endpoints also exposed under <span class="tt">/literature/extraction/*</span> for backward compatibility with v0.5.3 routes.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1281"></a>
8.4 research‑manager</h2>
<ul>
<li>Orchestrate extraction over included records with bounded concurrency; back‑pressure on failures.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1283"></a>
9) Metrics</h1>
<ul>
<li><span class="tt">lit_extract_total{result=success|repaired|invalid}</span> <br  />
</li>
<li><span class="tt">lit_extract_latency_ms_bucket</span> <br  />
</li>
<li><span class="tt">lit_extract_confidence_histogram</span> <br  />
</li>
<li><span class="tt">lit_units_normalised_total</span> <br  />
</li>
<li><span class="tt">lit_extract_validation_errors_total{type}</span> <br  />
</li>
</ul>
<p>All <span class="tt">lit_extract_*</span> metrics include label <span class="tt">{worker="extraction"}</span> and are exported via Prometheus on network-service <span class="tt">:9002</span>. Database-service exports its own metrics on <span class="tt">:9000</span>.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1285"></a>
10) Configuration (defaults)</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;extraction&quot;: {</div>
<div class="line">    &quot;model&quot;: &quot;&lt;pinned-llm&gt;&quot;,</div>
<div class="line">    &quot;prompt_version&quot;: &quot;1&quot;,</div>
<div class="line">    &quot;temperature&quot;: 0.0,</div>
<div class="line">    &quot;max_chunk_tokens&quot;: 3000,</div>
<div class="line">    &quot;max_results_per_record&quot;: 20,</div>
<div class="line">    &quot;repair_passes&quot;: 1,</div>
<div class="line">    &quot;require_spans&quot;: true,</div>
<div class="line">    &quot;unit_normalisation&quot;: true</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1287"></a>
11) SLOs (initial)</h1>
<ul>
<li><b>Extraction success (valid or repaired): ≥ 95%</b> of included records. <br  />
</li>
<li><b>Invalid after repair: ≤ 5%</b>. <br  />
</li>
<li><b>Numeric integrity:</b> ≥ 98% of numeric fields pass range/consistency checks on gold‑labelled fixtures. <br  />
</li>
<li><b>Throughput:</b> ≥ 30 records/min on CPU with cached models.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1289"></a>
12) Definition of Done (DoD)</h1>
<ul>
<li><span class="tt">extractions_v2</span> and <span class="tt">extraction_spans</span> tables populated for included records; payloads validate against schema v2. <br  />
</li>
<li>Each quantitative claim is span‑anchored with offsets and checksums. <br  />
</li>
<li>Unit normalisations and validation checks recorded; metrics emitted. <br  />
</li>
<li>Endpoints/tools available; docs updated; tests (unit+integration) passing; feature flag guarded (default OFF). <br  />
</li>
<li>E2E run exercised via <span class="tt">scripts/extraction_v2_e2e.py</span>; persisted payload + spans retrievable via DB MCP tool.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1291"></a>
13) Test Plan</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1292"></a>
Unit</h2>
<ul>
<li>JSON Schema validation for a variety of fixtures; repair pass converts invalid → valid. <br  />
</li>
<li>Unit conversions (ng/mL→µg/L, Hz→s⁻¹); range checks; arithmetic checks (CI/SE). <br  />
</li>
<li>Deterministic chunking given identical parsed_sections.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1293"></a>
Integration</h2>
<ul>
<li>End‑to‑end extraction for a small OA corpus (fixtures): ensure payloads populated; spans map to source text; numeric checks pass. <br  />
</li>
<li>Performance test on 500 documents to verify throughput target. <br  />
</li>
<li>Error‑path tests: malformed TEI, missing sections, oversized chunks.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md1294"></a>
Non‑functional</h2>
<ul>
<li>Timeouts and retries on model calls; backoff on repeated failures. <br  />
</li>
<li>Memory caps for chunk assembly; guard against extremely large sections.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1296"></a>
14) Risks &amp; Mitigations</h1>
<ul>
<li><b>Hallucination / unsupported claims:</b> strict span requirement; validator rejects unverifiable fields. <br  />
</li>
<li><b>Ambiguous units:</b> store original + normalised; mark <span class="tt">unsure</span> when mapping not one‑to‑one. <br  />
</li>
<li><b>Table parsing variability:</b> prefer table spans when available; fall back to narrative values. <br  />
</li>
<li><b>Model drift:</b> pin model/prompt; add periodic evaluation job on a held‑out labelled set.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1298"></a>
15) Rollout &amp; Backward Compatibility</h1>
<ul>
<li>Feature flag: <span class="tt">extraction_v2.enabled</span> (default off). <br  />
</li>
<li>Backfill optional: run extractor for previous runs once enabled. <br  />
</li>
<li>No breaking changes to earlier versions; v2 payload coexists with any prior extraction v1.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md1300"></a>
16) Open Questions</h1>
<ul>
<li>Do we need a light ontology for outcomes/assays now, or defer to synthesis phase? <br  />
</li>
<li>Should we store token offsets as well as character offsets for easier re‑anchoring across tokenisers? <br  />
</li>
<li>Where to persist unit mapping tables (code vs. DB)? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
