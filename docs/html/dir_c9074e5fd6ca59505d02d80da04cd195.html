<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACP - Autonomous Command Protocol: /Users/paulzanna/Github/Eunice/frontend/node_modules/tinyexec Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ACP - Autonomous Command Protocol<span id="projectnumber">&#160;v0.3.0</span>
   </div>
   <div id="projectbrief">Portable C99 framing library with COBS, CRC16, and HMAC-SHA256 authentication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_c9074e5fd6ca59505d02d80da04cd195.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">tinyexec Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md6619"></a>
tinyexec ðŸ“Ÿ</h1>
<blockquote class="doxtable">
<p>A minimal package for executing commands </p>
</blockquote>
<p>This package was created to provide a minimal way of interacting with child processes without having to manually deal with streams, piping, etc.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md6620"></a>
Installing</h1>
<div class="fragment"><div class="line">$ npm i -S tinyexec</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md6621"></a>
Usage</h1>
<p>A process can be spawned and awaited like so:</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line"> </div>
<div class="line">const result = await x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line"> </div>
<div class="line">// result.stdout - the stdout as a string</div>
<div class="line">// result.stderr - the stderr as a string</div>
<div class="line">// result.exitCode - the process exit code as a number</div>
</div><!-- fragment --><p>You may also iterate over the lines of output via an async loop:</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line"> </div>
<div class="line">const proc = x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line"> </div>
<div class="line">for await (const line of proc) {</div>
<div class="line">  // line will be from stderr/stdout in the order you&#39;d see it in a term</div>
<div class="line">}</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6622"></a>
Options</h2>
<p>Options can be passed to have finer control over spawning of the process:</p>
<div class="fragment"><div class="line">await x(&#39;ls&#39;, [], {</div>
<div class="line">  timeout: 1000</div>
<div class="line">});</div>
</div><!-- fragment --><p>The options object can have the following properties:</p>
<ul>
<li><span class="tt">signal</span> - an <span class="tt">AbortSignal</span> to allow aborting of the execution</li>
<li><span class="tt">timeout</span> - time in milliseconds at which the process will be forceably killed</li>
<li><span class="tt">persist</span> - if <span class="tt">true</span>, the process will continue after the host exits</li>
<li><span class="tt">stdin</span> - another <span class="tt">Result</span> can be used as the input to this process</li>
<li><span class="tt">nodeOptions</span> - any valid options to node's underlying <span class="tt">spawn</span> function</li>
<li><span class="tt">throwOnError</span> - if true, non-zero exit codes will throw an error</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6623"></a>
Piping to another process</h2>
<p>You can pipe a process to another via the <span class="tt">pipe</span> method:</p>
<div class="fragment"><div class="line">const proc1 = x(&#39;ls&#39;, [&#39;-l&#39;]);</div>
<div class="line">const proc2 = proc1.pipe(&#39;grep&#39;, [&#39;.js&#39;]);</div>
<div class="line">const result = await proc2;</div>
<div class="line"> </div>
<div class="line">console.log(result.stdout);</div>
</div><!-- fragment --><p><span class="tt">pipe</span> takes the same options as a regular execution. For example, you can pass a timeout to the pipe call:</p>
<div class="fragment"><div class="line">proc1.pipe(&#39;grep&#39;, [&#39;.js&#39;], {</div>
<div class="line">  timeout: 2000</div>
<div class="line">});</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6624"></a>
Killing a process</h2>
<p>You can kill the process via the <span class="tt">kill</span> method:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.kill();</div>
<div class="line"> </div>
<div class="line">// or with a signal</div>
<div class="line">proc.kill(&#39;SIGHUP&#39;);</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6625"></a>
Node modules/binaries</h2>
<p>By default, node's available binaries from <span class="tt">node_modules</span> will be accessible in your command.</p>
<p>For example, in a repo which has <span class="tt">eslint</span> installed:</p>
<div class="fragment"><div class="line">await x(&#39;eslint&#39;, [&#39;.&#39;]);</div>
</div><!-- fragment --><p>In this example, <span class="tt">eslint</span> will come from the locally installed <span class="tt">node_modules</span>.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6626"></a>
Using an abort signal</h2>
<p>An abort signal can be passed to a process in order to abort it at a later time. This will result in the process being killed and <span class="tt">aborted</span> being set to <span class="tt">true</span>.</p>
<div class="fragment"><div class="line">const aborter = new AbortController();</div>
<div class="line">const proc = x(&#39;node&#39;, [&#39;./foo.mjs&#39;], {</div>
<div class="line">  signal: aborter.signal</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// elsewhere...</div>
<div class="line">aborter.abort();</div>
<div class="line"> </div>
<div class="line">await proc;</div>
<div class="line"> </div>
<div class="line">proc.aborted; // true</div>
<div class="line">proc.killed; // true</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6627"></a>
Using with command strings</h2>
<p>If you need to continue supporting commands as strings (e.g. "command arg0 arg1"), you can use <a href="https://github.com/TrySound/args-tokenizer">args-tokenizer</a>, a lightweight library for parsing shell command strings into an array.</p>
<div class="fragment"><div class="line">import {x} from &#39;tinyexec&#39;;</div>
<div class="line">import {tokenizeArgs} from &#39;args-tokenizer&#39;;</div>
<div class="line"> </div>
<div class="line">const commandString = &#39;echo &quot;Hello, World!&quot;&#39;;</div>
<div class="line">const [command, ...args] = tokenizeArgs(commandString);</div>
<div class="line">const result = await x(command, args);</div>
<div class="line"> </div>
<div class="line">result.stdout; // Hello, World!</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md6628"></a>
API</h1>
<p>Calling <span class="tt">x(command[, args])</span> returns an awaitable <span class="tt">Result</span> which has the following API methods and properties available:</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6629"></a>
<span class="tt">pipe(command[, args[, options]])</span></h2>
<p>Pipes the current command to another. For example:</p>
<div class="fragment"><div class="line">x(&#39;ls&#39;, [&#39;-l&#39;])</div>
<div class="line">  .pipe(&#39;grep&#39;, [&#39;js&#39;]);</div>
</div><!-- fragment --><p>The parameters are as follows:</p>
<ul>
<li><span class="tt">command</span> - the command to execute (<em>without any arguments</em>)</li>
<li><span class="tt">args</span> - an array of arguments</li>
<li><span class="tt">options</span> - options object</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md6630"></a>
<span class="tt">process</span></h2>
<p>The underlying node <span class="tt">ChildProcess</span>. For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.process; // ChildProcess;</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6631"></a>
<span class="tt">kill([signal])</span></h2>
<p>Kills the current process with the specified signal. By default, this will use the <span class="tt">SIGTERM</span> signal.</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.kill();</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6632"></a>
<span class="tt">pid</span></h2>
<p>The current process ID. For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.pid; // number</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6633"></a>
<span class="tt">aborted</span></h2>
<p>Whether the process has been aborted or not (via the <span class="tt">signal</span> originally passed in the options object).</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.aborted; // bool</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6634"></a>
<span class="tt">killed</span></h2>
<p>Whether the process has been killed or not (e.g. via <span class="tt">kill()</span> or an abort signal).</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.killed; // bool</div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="autotoc_md6635"></a>
<span class="tt">exitCode</span></h2>
<p>The exit code received when the process completed execution.</p>
<p>For example:</p>
<div class="fragment"><div class="line">const proc = x(&#39;ls&#39;);</div>
<div class="line"> </div>
<div class="line">proc.exitCode; // number (e.g. 1)</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="autotoc_md6636"></a>
Comparison with other libraries</h1>
<p><span class="tt">tinyexec</span> aims to provide a lightweight layer on top of Node's own <span class="tt">child_process</span> API.</p>
<p>Some clear benefits compared to other libraries are that <span class="tt">tinyexec</span> will be much lighter, have a much smaller footprint and will have a less abstract interface (less "magic"). It will also have equal security and cross-platform support to popular alternatives.</p>
<p>There are various features other libraries include which we are unlikely to ever implement, as they would prevent us from providing a lightweight layer.</p>
<p>For example, if you'd like write scripts rather than individual commands, and prefer to use templating, we'd definitely recommend <a href="https://github.com/google/zx">zx</a>. zx is a much higher level library which does some of the same work <span class="tt">tinyexec</span> does but behind a template string interface.</p>
<p>Similarly, libraries like <span class="tt">execa</span> will provide helpers for various things like passing files as input to processes. We opt not to support features like this since many of them are easy to do yourself (using Node's own APIs). </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_b0ffaa9650680648f71633623b80e4c9.html">Eunice</a></li><li class="navelem"><a href="dir_06a7aea77c9c918e297ef6ec7ffe0f68.html">frontend</a></li><li class="navelem"><b>node_modules</b></li><li class="navelem"><a href="dir_c9074e5fd6ca59505d02d80da04cd195.html">tinyexec</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for ACP - Autonomous Command Protocol by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
